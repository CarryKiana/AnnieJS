var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),annie;!function(e){var t=function(){function e(){this._instanceId=0,this._instanceType="annie.AObject",this._instanceId=e._object_id++}return Object.defineProperty(e.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instanceType",{get:function(){return this._instanceType},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){},e._object_id=0,e}();e.AObject=t;var n=function(t){function n(){var e=t.call(this)||this;return e.eventTypes={},e.eventTypes1={},e._instanceType="annie.EventDispatcher",e}return __extends(n,t),n.getMouseEventCount=function(e){void 0===e&&(e="");var t=0;return""==e?t=n._totalMEC:n._MECO[e]&&(t=n._MECO[e]),t},n.prototype.addEventListener=function(e,t,n){if(void 0===n&&(n=!0),!e)throw new Error("添加侦听的type值为undefined");if(!t)throw new Error("侦听回调函数不能为null");var r=this,i=r.eventTypes;n||(i=r.eventTypes1),i[e]instanceof Object||(i[e]=[]),i[e].indexOf(t)<0&&(i[e].unshift(t),0==e.indexOf("onMouse")&&r._changeMouseCount(e,!0))},n.prototype._changeMouseCount=function(e,t){var r=t?1:-1;n._MECO[e]||(n._MECO[e]=0),n._MECO[e]+=r,n._MECO[e]<0&&(n._MECO[e]=0),n._totalMEC+=r},n.prototype.dispatchEvent=function(t,n,r){void 0===n&&(n=null),void 0===r&&(r=!0);var i=this;"string"==typeof t&&(i._defaultEvent instanceof e.Event?i._defaultEvent.reset(t,i):i._defaultEvent=new e.Event(t),t=i._defaultEvent);var a=i.eventTypes[t.type];if(r||(a=i.eventTypes1[t.type]),a instanceof Array){t.target instanceof Object||(t.target=i),void 0!=n&&(t.data=n);for(var o=a.length,s=o-1;s>=0;s--)t._pd||(a[s]instanceof Function?a[s](t):a.splice(s,1));return!0}return!1},n.prototype.hasEventListener=function(e,t){void 0===t&&(t=!0);var n=this;if(t){if(n.eventTypes&&n.eventTypes[e]instanceof Array&&n.eventTypes[e].length>0)return!0}else if(n.eventTypes1&&n.eventTypes1[e]instanceof Array&&n.eventTypes1[e].length>0)return!0;return!1},n.prototype.removeEventListener=function(e,t,n){void 0===n&&(n=!0);var r=this,i=r.eventTypes[e];if(n||(i=r.eventTypes1[e]),i instanceof Array)for(var a=i.length,o=a-1;o>=0;o--)i[o]==t&&(i.splice(o,1),0==e.indexOf("onMouse")&&r._changeMouseCount(e,!1))},n.prototype.removeAllEventListener=function(){var e=this;for(var t in e.eventTypes)if(0==t.indexOf("onMouse"))for(var n=0;n<e.eventTypes[t].length;n++)e._changeMouseCount(t,!1);for(var t in e.eventTypes1)if(0==t.indexOf("onMouse"))for(var n=0;n<e.eventTypes1[t].length;n++)e._changeMouseCount(t,!1);e.eventTypes1={},e.eventTypes={}},n.prototype.destroy=function(){var e=this;e.removeAllEventListener(),e.eventTypes1=null,e.eventTypes=null,e._defaultEvent=null},n._MECO={},n._totalMEC=0,n}(t);e.EventDispatcher=n}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.type="",n.target=null,n.data=null,n._pd=!1,n._instanceType="annie.Event",n.type=t,n}return __extends(t,e),t.prototype.stopImmediatePropagation=function(){this._pd=!0},t.prototype.destroy=function(){var e=this;e.target=null,e.data=null},t.prototype.reset=function(e,t){var n=this;n.target=t,n._pd=!1,n.type=e},t.ON_INIT_STAGE="onInitStage",t.RESIZE="onResize",t.ON_RUN_CHANGED="onRunChanged",t.ON_PLAY_UPDATE="onPlayUpdate",t.ON_PLAY_END="onPlayEnd",t.ON_PLAY_START="onPlayStart",t.ON_FLIP_START="onFlipStart",t.ON_FLIP_STOP="onFlipStop",t.ON_SCROLL_TO_HEAD="onScrollToHead",t.ON_SCROLL_STOP="onScrollStop",t.ON_SCROLL_START="onScrollStart",t.ON_SCROLL_ING="onScrollIng",t.ON_SCROLL_TO_END="onScrollToEnd",t.ON_SLIDE_START="onSlideStart",t.ON_SLIDE_END="onSlideEnd",t.ADD_TO_STAGE="onAddToStage",t.REMOVE_TO_STAGE="onRemoveToStage",t.ENTER_FRAME="onEnterFrame",t.END_FRAME="onEndFrame",t.CALL_FRAME="onCallFrame",t.COMPLETE="onComplete",t.PROGRESS="onProgress",t.ERROR="onError",t.ABORT="onAbort",t.START="onStart",t.TIMER="onTimer",t.TIMER_COMPLETE="onTimerComplete",t.ON_DRAW_PERCENT="onDrawPercent",t}(e.AObject);e.Event=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;return n.clientX=0,n.clientY=0,n.stageX=0,n.stageY=0,n.localX=0,n.localY=0,n.currentTarget=null,n.identifier=0,n.timeStamp=0,n._instanceType="annie.MouseEvent",n}return __extends(t,e),t.prototype.updateAfterEvent=function(){this.target.stage._updateMatrix()},t.prototype.destroy=function(){this.currentTarget=null,e.prototype.destroy.call(this)},t.MOUSE_DOWN="onMouseDown",t.MOUSE_UP="onMouseUp",t.CLICK="onMouseClick",t.MOUSE_MOVE="onMouseMove",t.MOUSE_OVER="onMouseOver",t.MOUSE_OUT="onMouseOut",t}(e.Event);e.MouseEvent=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.clientPoint1=new e.Point,r.clientPoint2=new e.Point,r.scale=0,r.rotate=0,r._instanceType="annie.TouchEvent",r}return __extends(n,t),n.prototype.updateAfterEvent=function(){this.target._updateMatrix()},n.prototype.destroy=function(){var e=this;e.clientPoint1=null,e.clientPoint2=null,t.prototype.destroy.call(this)},n.ON_MULTI_TOUCH="onMultiTouch",n}(e.Event);e.TouchEvent=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var r=e.call(this)||this;r.x=0,r.y=0;var i=r;return i._instanceType="annie.Point",i.x=t,i.y=n,r}return __extends(t,e),t.prototype.destroy=function(){},t.distance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;return 4==n?Math.sqrt((e[0]-e[2])*(e[0]-e[2])+(e[1]-e[3])*(e[1]-e[3])):2==n?Math.sqrt((e[0].x-e[1].x)*(e[0].x-e[1].x)+(e[0].y-e[1].y)*(e[0].y-e[1].y)):void 0},t}(e.AObject);e.Point=t}(annie||(annie={}));var annie;!function(e){function t(e){switch(e){case i:case-a:return 0;case r:case-r:return-1;case a:case-i:return 0;default:return Math.cos(e)}}function n(e){switch(e){case i:case-a:return 1;case r:case-r:return 0;case a:case-i:return-1;default:return Math.sin(e)}}var r=Math.PI,i=r>>1,a=r+i,o=Math.PI/180,s=function(r){function i(t,n,i,a,o,s){void 0===t&&(t=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===o&&(o=0),void 0===s&&(s=0);var l=r.call(this)||this;l.a=1,l.b=0,l.c=0,l.d=1,l.tx=0,l.ty=0,l.transformPoint=function(t,n,r){void 0===r&&(r=null);var i=this;return r instanceof e.Point||(r=new e.Point),r.x=t*i.a+n*i.c+i.tx,r.y=t*i.b+n*i.d+i.ty,r},l.prepend=function(e){var t=this,n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,s=e.ty,l=t.a,u=t.c,c=t.tx;t.a=n*l+i*t.b,t.b=r*l+a*t.b,t.c=n*u+i*t.d,t.d=r*u+a*t.d,t.tx=n*c+i*t.ty+o,t.ty=r*c+a*t.ty+s};var u=l;return u._instanceType="annie.Matrix",u.a=t,u.b=n,u.c=i,u.d=a,u.tx=o,u.ty=s,l}return __extends(i,r),i.prototype.clone=function(){var e=this;return new i(e.a,e.b,e.c,e.d,e.tx,e.ty)},i.prototype.setFrom=function(e){var t=this;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},i.prototype.identity=function(){var e=this;e.a=e.d=1,e.b=e.c=e.tx=e.ty=0},i.prototype.invert=function(){var e=this,t=new i(e.a,e.b,e.c,e.d,e.tx,e.ty),n=e.a,r=e.b,a=e.c,o=e.d,s=e.tx,l=e.ty;if(0==r&&0==a)return 0==n||0==o?t.a=t.d=t.tx=t.ty=0:(n=t.a=1/n,o=t.d=1/o,t.tx=-n*s,t.ty=-o*l),t;var u=n*o-r*a;if(0==u)return t.identity(),t;u=1/u;var c=t.a=o*u;return r=t.b=-r*u,a=t.c=-a*u,o=t.d=n*u,t.tx=-(c*s+a*l),t.ty=-(r*s+o*l),t},i.prototype.createBox=function(e,r,i,a,s,l,u,c,_){var d=this;if(0!=s?l=u=s%360:(l%=360,u%=360),0==l&&0==u)d.a=i,d.b=d.c=0,d.d=a;else{l*=o,u*=o;var p=t(l),h=n(l);l==u?(d.a=p*i,d.b=h*i):(d.a=t(u)*i,d.b=n(u)*i),d.c=-h*a,d.d=p*a}d.tx=e+c-(c*d.a+_*d.c),d.ty=r+_-(c*d.b+_*d.d)},i.isEqual=function(e,t){return e.tx==t.tx&&e.ty==t.ty&&e.a==t.a&&e.b==t.b&&e.c==t.c&&e.d==t.d},i.prototype.concat=function(e){var t=this,n=t.a,r=t.b,i=t.c,a=t.d,o=t.tx,s=t.ty,l=e.a,u=e.b,c=e.c,_=e.d,d=e.tx,p=e.ty;t.a=n*l+r*c,t.b=n*u+r*_,t.c=i*l+a*c,t.d=i*u+a*_,t.tx=o*l+s*c+d,t.ty=o*u+s*_+p},i.prototype.rotate=function(e){var t=this,n=Math.sin(e),r=Math.cos(e),i=t.a,a=t.b,o=t.c,s=t.d,l=t.tx,u=t.ty;t.a=i*r-a*n,t.b=i*n+a*r,t.c=o*r-s*n,t.d=o*n+s*r,t.tx=l*r-u*n,t.ty=l*n+u*r},i.prototype.scale=function(e,t){var n=this;n.a*=e,n.d*=t,n.c*=e,n.b*=t,n.tx*=e,n.ty*=t},i.prototype.translate=function(e,t){var n=this;n.tx+=e,n.ty+=t},i.prototype.destroy=function(){},i}(e.AObject);e.Matrix=s}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var a=t.call(this)||this;a.x=0,a.y=0,a.width=0,a.height=0;var o=a;return o._instanceType="annie.Rectangle",o.x=e,o.y=n,o.height=i,o.width=r,a}return __extends(n,t),n.prototype.isPointIn=function(e){var t=this;return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},n.createFromRects=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0==e.length)return null;if(1==e.length)return e[0];for(var n=e[0],r=n.x,i=n.y,a=n.width,o=n.height,s=void 0,l=void 0,u=void 0,c=void 0,_=1;_<e.length;_++)s=r+a,u=i+o,l=e[_].x+e[_].width,c=e[_].y+e[_].height,(r>e[_].x||0==s)&&(r=e[_].x),(i>e[_].y||0==u)&&(i=e[_].y),s<l&&(s=l),u<c&&(u=c),n.x=r,n.y=i,n.width=s-r,n.height=u-i;return n},n.createFromPoints=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var i=n[0].x,a=n[0].y,o=n[0].x,s=n[0].y,l=1;l<n.length;l++)n[l]instanceof e.Point&&(i>n[l].x&&(i=n[l].x),a>n[l].y&&(a=n[l].y),o<n[l].x&&(o=n[l].x),s<n[l].y&&(s=n[l].y));return t.x=i,t.y=a,t.width=o-i,t.height=s-a,t},n.testRectCross=function(e,t){var n,r,i,a;return n=e.x+e.width/2,r=e.y+e.height/2,i=t.x+t.width/2,a=t.y+t.height/2,Math.abs(n-i)<=e.width/2+t.width/2&&Math.abs(r-a)<=e.height/2+t.height/2},n}(e.AObject);e.Rectangle=t}(annie||(annie={}));var annie;!function(e){var t=function(){function e(){}return e.getBlendMode=function(e){return this._modeList[e]},e.NORMAL=0,e.DARKEN=2,e.MULTIPLY=3,e.LIGHTEN=4,e.SCREEN=5,e.OVERLAY=6,e.HARDLIGHT=7,e.ADD=8,e.SUBTRACT=9,e.DIFFERENCE=10,e.INVERT=11,e.ERASE=13,e.SOURCE_IN=14,e.SOFT_LIGHT=15,e.XOR=16,e.COPY=17,e.HUE=18,e.SATURATION=19,e.COLOR=20,e.LUMINOSITY=21,e.EXCLUSION=22,e.COLOR_BURN=23,e.COLOR_DODGE=24,e.SOURCE_OUT=25,e.SOURCE_ATOP=26,e._modeList=["source-over","layer","darken","multiply","lighten","screen","overlay","hard-light","add","subtract","difference","invert","alpha","erase","source-in","soft-light","xor","copy","hue","saturation","color","luminosity","exclusion","color-burn","color-dodge","source-out","source-atop"],e}();e.BlendMode=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.a2x_um=!1,n.a2x_ua=!1,n.a2x_uf=!1,n._isCache=!1,n._a2x_drawRect={isSheetSprite:!1,x:0,y:0,w:0,h:0,uvX:0,uvY:0,uvW:0,uvH:0},n._cacheAsBitmap=!1,n.stage=null,n.parent=null,n._cAlpha=1,n._ocAlpha=1,n._cMatrix=new e.Matrix,n.mouseEnable=!0,n.cFilters=[],n.name="",n._x=0,n._offsetX=0,n._offsetY=0,n._y=0,n._scaleX=1,n._scaleY=1,n._rotation=0,n._alpha=1,n._skewX=0,n._skewY=0,n._anchorX=0,n._anchorY=0,n._visible=!0,n._blendMode=0,n._matrix=new e.Matrix,n._mask=null,n._filters=[],n._cp=!0,n._isUseToMask=0,n._hitArea=null,n.hitTestWithPixel=!1,n._texture=null,n._bounds=new e.Rectangle,n._splitBoundsList=[],n.soundList=[],n._a2x_res_obj={},n._isOnStage=void 0,n._changeTransformInfo=[!1,!1,!1,!1,!1,!1],n._instanceType="annie.DisplayObject",n}return __extends(n,t),Object.defineProperty(n.prototype,"isCache",{get:function(){return this._isCache},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){var t=this;e!=t._cacheAsBitmap&&(t._offsetX=0,t._offsetY=0,t._cacheAsBitmap=e,t._isCache=t._cacheAsBitmap||t._filters.length>0||0!=t._blendMode,t.a2x_uf=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(e){var t=this;e!=t._x&&(t._x=e,t.a2x_um=!0),t._changeTransformInfo[0]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(e){var t=this;e!=t._y&&(t._y=e,t.a2x_um=!0),t._changeTransformInfo[1]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this._scaleX},set:function(e){var t=this;e!=t._scaleX&&(t._scaleX=e,t.a2x_um=!0),t._changeTransformInfo[2]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleY",{get:function(){return this._scaleY},set:function(e){var t=this;e!=t._scaleY&&(t._scaleY=e,t.a2x_um=!0),t._changeTransformInfo[3]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(e){var t=this;e==t._rotation&&0==t._skewX&&0==t._skewY||(t._rotation=e,t._skewX=0,t._skewY=0,t.a2x_um=!0),t._changeTransformInfo[4]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this._alpha},set:function(e){var t=this;e!=t._alpha&&(t._alpha=e,t.a2x_ua=!0),t._changeTransformInfo[5]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewX",{get:function(){return this._skewX},set:function(e){var t=this;e==t._skewX&&0==t._rotation||(t._skewX=e,t._rotation=0,t.a2x_um=!0),t._changeTransformInfo[4]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewY",{get:function(){return this._skewY},set:function(e){var t=this;e==t._skewY&&0==t._rotation||(t._skewY=e,t._rotation=0,t.a2x_um=!0),t._changeTransformInfo[4]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorX",{get:function(){return this._anchorX},set:function(e){var t=this;e!=t._anchorX&&(t._anchorX=e,t.a2x_um=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorY",{get:function(){return this._anchorY},set:function(e){var t=this;e!=t._anchorY&&(t._anchorY=e,t.a2x_um=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this._visible},set:function(e){var t=this;e!=t._visible&&(t._cp=!0,t._visible=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){var t=this;e!=t._blendMode&&(t._blendMode=e,t._isCache=t._cacheAsBitmap||t._filters.length>0||0!=t._blendMode,t.a2x_uf=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matrix",{get:function(){return this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._mask},set:function(t){var n=this;t!=n._mask&&(t instanceof e.DisplayObject?t._isUseToMask++:n._mask instanceof e.DisplayObject&&n._mask._isUseToMask--,n._mask=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filters",{get:function(){return this._filters},set:function(e){var t=this;if(e instanceof Array){if(0==e.length&&0==t._filters.length)return;t._filters.length=0;for(var n=0;n<e.length;n++)t.filters[n]=e[n];t.a2x_uf=!0}else t._filters.length>0&&(t._filters.length=0,t.a2x_uf=!0);t._isCache=t._cacheAsBitmap||t._filters.length>0||0!=t._blendMode},enumerable:!0,configurable:!0}),n.prototype.globalToLocal=function(e,t){return void 0===t&&(t=null),this._cMatrix.invert().transformPoint(e.x,e.y,t)},n.prototype.localToGlobal=function(e,t){return void 0===t&&(t=null),this._cMatrix.transformPoint(e.x,e.y,t)},Object.defineProperty(n.prototype,"hitArea",{get:function(){return this._hitArea},set:function(e){this._hitArea=e},enumerable:!0,configurable:!0}),n.prototype.hitTestPoint=function(e,t){void 0===t&&(t=!1);var r=this;if(!r.visible||!r.mouseEnable)return null;var i=r._texture;if(!i||0==i.width||0==i.height)return null;var a;if(a=t?r.globalToLocal(e,n._p1):e,r._hitArea&&r._hitArea.isPointIn(a))return r;if(r.hitTestWithPixel){var o=void 0;if("annie.Bitmap"!=r.instanceType){if(o=i.getContext("2d"),o.getImageData(a.x>>0,a.y>>0,1,1).data[3]>0)return r}else{var s=n._canvas;if(o=s.getContext("2d"),s.width=1,s.height=1,o.clearRect(0,0,1,1),o.setTransform(1,0,0,1,a.x>>0,a.y>>0),o.drawImage(i,0,0),o.getImageData(0,0,1,1).data[3]>0)return r}}else if(r._bounds.isPointIn(a))return r;return null},n.prototype.getBounds=function(){return this._bounds},n.prototype.getDrawRect=function(t,r){void 0===t&&(t=null),void 0===r&&(r=null);var i=this;void 0==t&&(t=i.matrix),void 0==r&&(r=i.getBounds());var a=r.x,o=r.y,s=r.width,l=r.height;t.transformPoint(a,o,n._p1),t.transformPoint(a+s,o,n._p2),t.transformPoint(a+s,o+l,n._p3),t.transformPoint(a,o+l,n._p4),e.Rectangle.createFromPoints(n._transformRect,n._p1,n._p2,n._p3,n._p4)},n.prototype._updateMatrix=function(t){void 0===t&&(t=!1);var n,r,i,a,o=this,s=o.parent instanceof e.Sprite;if(t){if(o._ocMatrix||(o._ocMatrix=new e.Matrix),!s)return o._ocMatrix.identity(),void(o._ocAlpha=1);r=o.parent._ocMatrix,a=o.parent._ocAlpha,n=o._ocMatrix,o._matrix.createBox(o._x+o._offsetX,o._y+o._offsetY,o._scaleX,o._scaleY,o._rotation,o._skewX,o._skewY,o._anchorX,o._anchorY),n.setFrom(o._matrix),i=o._alpha,s&&(n.prepend(r),i*=a),o._ocAlpha=i}else{if(n=o._cMatrix,i=o._cAlpha,s&&(r=o.parent._cMatrix,a=o.parent._cAlpha),o.a2x_um&&o._matrix.createBox(o._x+o._offsetX,o._y+o._offsetY,o._scaleX,o._scaleY,o._rotation,o._skewX,o._skewY,o._anchorX,o._anchorY),o._cp)o.a2x_um=o.a2x_ua=!0;else if(s){var l=o.parent;l.a2x_um&&(o.a2x_um=!0),l.a2x_ua&&(o.a2x_ua=!0)}o.a2x_um&&(n.setFrom(o._matrix),s&&n.prepend(r)),o.a2x_ua&&(i=o._alpha,s&&(i*=a)),o._cp=!1,o._cAlpha=i}},Object.defineProperty(n.prototype,"width",{get:function(){return this._updateMatrix(),this.getDrawRect(),n._transformRect.width},set:function(e){var t=this;t._updateMatrix(),t.getDrawRect();var r=n._transformRect.width;if(r>0){var i=e/r;t.scaleX*=i}else t.scaleX=1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._updateMatrix(),this.getDrawRect(),n._transformRect.height},set:function(e){var t=this;t._updateMatrix(),t.getDrawRect();var r=n._transformRect.height;if(r>0){var i=e/r;t.scaleY*=i}else t.scaleY=1},enumerable:!0,configurable:!0}),n.prototype.getWH=function(){return this._updateMatrix(),this.getDrawRect(),{w:n._transformRect.width,h:n._transformRect.height}},n.prototype.stopAllSounds=function(){var e=this.soundList;if(e instanceof Array)for(var t=e.length-1;t>=0;t--)e[t].stop()},n.prototype._updateSplitBoundInfo=function(){var t=this,n=[],r=t.getBounds();if(r.width*r.height>0){var i=1,a=1,o=0,s=0,l=r.width,u=r.height;e.isCutDraw&&(o=1024,s=1024,l=o+2,u=s+2,r.width>o&&(i=Math.ceil(r.width/o)),r.height>s&&(a=Math.ceil(r.height/s)));for(var c=0;c<i;c++)for(var _=0;_<a;_++){var d=c*o,p=_*s;c==i-1&&(l=r.width-d),_==a-1&&(u=r.height-p),n.push({isDraw:!0,rect:new e.Rectangle(d+r.x,p+r.y,l,u)})}}t._splitBoundsList=n,t._checkDrawBounds()},n.prototype._checkDrawBounds=function(){var t=this,r=t._splitBoundsList,i=n._transformRect;if(t.stage)for(var a=0;a<r.length;a++)t.getDrawRect(t._cMatrix,r[a].rect),r[a].isDraw=e.Rectangle.testRectCross(i,t.stage.renderObj.viewPort)},n.prototype.getSound=function(e){var t=this.soundList,n=[];if(t instanceof Array)if("string"==typeof e)for(var r=t.length-1;r>=0;r--)t[r].name==e&&n.push(t[r]);else e>=0&&e<t.length&&n.push(t[e]);return n},n.prototype.addSound=function(e){var t=this;t.soundList instanceof Array||(t.soundList=[]),t.soundList.push(e)},n.prototype.removeSound=function(e){var t=this.soundList;if(t instanceof Array)if("string"==typeof e)for(var n=t.length-1;n>=0;n--)t[n].name==e&&t.splice(n,1);else e>=0&&e<t.length&&t.splice(e,1)},n.prototype.destroy=function(){var e=this;e.stopAllSounds();for(var n=0;n<e.soundList.length;n++)e.soundList[n].destroy();e.soundList=null,e._a2x_res_obj=null,e.mask=null,e.filters=null,e.parent=null,e.stage=null,e._bounds=null,e._splitBoundsList=null,e.cFilters=null,e._matrix=null,e._cMatrix=null,e._texture=null,t.prototype.destroy.call(this)},n.prototype._onRemoveEvent=function(t){var n=this;n._isOnStage=!1;var r=n.soundList;if(r.length>0)for(var i=0;i<r.length;i++)r[i].stop2();n.dispatchEvent(e.Event.REMOVE_TO_STAGE)},n.prototype._onAddEvent=function(){var t=this;t._isOnStage=!0;var n=t.soundList;if(n.length>0)for(var r=0;r<n.length;r++)n[r].play2();t.dispatchEvent(e.Event.ADD_TO_STAGE)},n.prototype._onUpdateFrame=function(t,n){void 0===t&&(t=1),void 0===n&&(n=!1),this._visible&&!n&&this.dispatchEvent(e.Event.ENTER_FRAME)},n.prototype.startDrag=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=null);var r=this;e.Stage._dragDisplay=r,e.Stage._isDragCenter=t,e.Stage._lastDragPoint.x=Number.MAX_VALUE,e.Stage._lastDragPoint.y=Number.MAX_VALUE,n?(e.Stage._dragBounds.x=n.x,e.Stage._dragBounds.y=n.y,e.Stage._dragBounds.width=n.width,e.Stage._dragBounds.height=n.height):(e.Stage._dragBounds.x=0,e.Stage._dragBounds.y=0,e.Stage._dragBounds.width=Number.MIN_VALUE,e.Stage._dragBounds.height=Number.MIN_VALUE)},n.prototype.stopDrag=function(){e.Stage._dragDisplay=null},n.prototype.clearCustomTransform=function(e){void 0===e&&(e=-1);var t=this;if(e=-1)for(var n=0;n<6;n++)t._changeTransformInfo[n]=!1;else t._changeTransformInfo[e]=!1},n.prototype.clearBounds=function(){this._bounds.x=0,this._bounds.y=0,this._bounds.width=0,this._bounds.height=0},n._p1=new e.Point,n._p2=new e.Point,n._p3=new e.Point,n._p4=new e.Point,n._canvas=window.document.createElement("canvas"),n._transformRect=new e.Rectangle,n}(e.EventDispatcher);e.DisplayObject=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(e,n){void 0===n&&(n=null);var r=t.call(this)||this;r._cacheCanvas=null,r._bitmapData=null;var i=r;if(i._instanceType="annie.Bitmap",void 0!=n){var a=i._a2x_drawRect;a.isSheetSprite=!0,a.x=n.x,a.y=n.x,a.w=n.width,a.h=n.height}return i.bitmapData=e,r}return __extends(n,t),Object.defineProperty(n.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(e){var t=this;e!=t._bitmapData&&(t.clearBounds(),t._bitmapData=e,t._texture=e)},enumerable:!0,configurable:!0}),n.prototype._updateMatrix=function(n){void 0===n&&(n=!1),t.prototype._updateMatrix.call(this,n);var r=this,i=r._bitmapData;if(!i||0==i.width||0==i.height)return void(r._texture=null);var a=r._a2x_drawRect,o=i.width,s=i.height;if(n||(a.isSheetSprite&&(o=a.w,s=a.h),r._bounds.width!=o||r._bounds.height!=s?(r._bounds.width=o,r._bounds.height=s,o*s>0&&r._updateSplitBoundInfo(),r._filters.length>0&&(r.a2x_uf=!0),r._texture=i):r.a2x_um&&r._checkDrawBounds(),r.a2x_um=!1,r.a2x_ua=!1),r.a2x_uf){r.a2x_uf=!1,r._cacheCanvas||(r._cacheCanvas=document.createElement("canvas"));var l=r._cacheCanvas;l.width=o>>0,l.heigth=s>>0,l.style.width=Math.ceil(o/e.devicePixelRatio)+"px",l.style.height=Math.ceil(s/e.devicePixelRatio)+"px";var u=l.getContext("2d");u.clearRect(0,0,o,s),u.drawImage(i,0,0);var c=r._filters,_=c.length;if(_>0){for(var d=u.getImageData(0,0,o,s),p=0;p<_;p++)c[p].drawFilter(d);a.isSheetSprite?u.putImageData(d,a.x,a.y,o,s,0,0,o,s):u.putImageData(d,0,0),r._texture=l}else r._texture=i}},n.convertToImage=function(t,n,r){void 0===r&&(r=!0);var i;i=r?e.DisplayObject._canvas:window.document.createElement("canvas");var a=n.width,o=n.height,s=i.getContext("2d");if(i.width=a,i.height=o,s.drawImage(t.bitmapData,n.x,n.y,a,o,0,0,a,o),r){var l=new Image;return l.src=i.toDataURL(),l}return i},n.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),e._bitmapData=null,e._cacheCanvas=null},n}(e.DisplayObject);e.Bitmap=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this,null)||this;e._command=[],e.beginRadialGradientFill=function(e,t){this._fill(n.getGradientColor(e,t))},e.beginRadialGradientStroke=function(e,t,r,i,a,o){void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=10),this._stroke(n.getGradientColor(e,t),r,i,a,o)},e.a2x_ut=!0;var r=e;return r._instanceType="annie.Shape",r.hitTestWithPixel=!0,r.bitmapData=document.createElement("canvas"),e}return __extends(n,t),n.getGradientColor=function(t,r){var i,a=e.DisplayObject._canvas.getContext("2d");i=4==t.length?a.createLinearGradient(t[0],t[1],t[2],t[3]):a.createRadialGradient(t[0],t[1],0,t[2],t[3],t[4]);for(var o=0,s=r.length;o<s;o++)i.addColorStop(r[o][0],n.getRGBA(r[o][1],r[o][2]));return i},n.getBitmapStyle=function(t){return e.DisplayObject._canvas.getContext("2d").createPattern(t,"repeat")},n.getRGBA=function(e,t){if(0==e.indexOf("0x")&&(e=e.replace("0x","#")),e.length<7&&(e="#000000"),1!=t){e="rgba("+parseInt("0x"+e.substr(1,2))+","+parseInt("0x"+e.substr(3,2))+","+parseInt("0x"+e.substr(5,2))+","+t+")"}return e},n.prototype.addDraw=function(e,t){var n=this;n._command[n._command.length]=[1,e,t]},n.prototype.drawRoundRect=function(e,t,n,r,i,a,o,s){void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0);var l=(n<r?n:r)/2,u=0,c=0,_=0,d=0;i<0&&(i*=u=-1),i>l&&(i=l),a<0&&(a*=c=-1),a>l&&(a=l),s<0&&(s*=_=-1),s>l&&(s=l),o<0&&(o*=d=-1),o>l&&(o=l);var p=this._command;p[p.length]=[1,"moveTo",[e+n-a,t]],p[p.length]=[1,"arcTo",[e+n+a*c,t-a*c,e+n,t+a,a]],p[p.length]=[1,"lineTo",[e+n,t+r-s]],p[p.length]=[1,"arcTo",[e+n+s*_,t+r+s*_,e+n-s,t+r,s]],p[p.length]=[1,"lineTo",[e+o,t+r]],p[p.length]=[1,"arcTo",[e-o*d,t+r+o*d,e,t+r-o,o]],p[p.length]=[1,"lineTo",[e,t+i]],p[p.length]=[1,"arcTo",[e-i*u,t-i*u,e+i,t,i]],p[p.length]=[1,"closePath",[]]},n.prototype.moveTo=function(e,t){this._command[this._command.length]=[1,"moveTo",[e,t]]},n.prototype.lineTo=function(e,t){this._command[this._command.length]=[1,"lineTo",[e,t]]},n.prototype.arcTo=function(e,t){this._command[this._command.length]=[1,"arcTo",[e,t]]},n.prototype.quadraticCurveTo=function(e,t,n,r){this._command[this._command.length]=[1,"quadraticCurveTo",[e,t,n,r]]},n.prototype.bezierCurveTo=function(e,t,n,r,i,a){this._command[this._command.length]=[1,"bezierCurveTo",[e,t,n,r,i,a]]},n.prototype.closePath=function(){this._command[this._command.length]=[1,"closePath",[]]},n.prototype.drawRect=function(e,t,n,r){var i=this._command;i[i.length]=[1,"moveTo",[e,t]],i[i.length]=[1,"lineTo",[e+n,t]],i[i.length]=[1,"lineTo",[e+n,t+r]],i[i.length]=[1,"lineTo",[e,t+r]],i[i.length]=[1,"closePath",[]]},n.prototype.drawArc=function(e,t,n,r,i){this._command[this._command.length]=[1,"arc",[e,t,n,r/180*Math.PI,i/180*Math.PI]]},n.prototype.drawCircle=function(e,t,n){this._command[this._command.length]=[1,"arc",[e,t,n,0,2*Math.PI]]},n.prototype.drawEllipse=function(e,t,n,r){var i=.5522848,a=n/2*i,o=r/2*i,s=e+n,l=t+r,u=e+n/2,c=t+r/2,_=this._command;_[_.length]=[1,"moveTo",[e,c]],_[_.length]=[1,"bezierCurveTo",[e,c-o,u-a,t,u,t]],_[_.length]=[1,"bezierCurveTo",[u+a,t,s,c-o,s,c]],_[_.length]=[1,"bezierCurveTo",[s,c+o,u+a,l,u,l]],_[_.length]=[1,"bezierCurveTo",[u-a,l,e,c+o,e,c]]},n.prototype.clear=function(){var e=this;e._command=[],e._texture=null,e._bitmapData.width=0,e._bitmapData.height=0,e.a2x_ut=!1,e.clearBounds()},n.prototype.beginFill=function(e){this._fill(e)},n.prototype.beginLinearGradientFill=function(e,t){this._fill(n.getGradientColor(e,t))},n.prototype.beginBitmapFill=function(e,t){var r=this;t&&(r._isBitmapFill=t),r._fill(n.getBitmapStyle(e))},n.prototype._fill=function(e){var t=this,n=t._command;n[n.length]=[0,"fillStyle",e],n[n.length]=[1,"beginPath",[]]},n.prototype.beginStroke=function(e,t,n,r,i){void 0===t&&(t=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),this._stroke(e,t,n,r,i)},n.prototype.beginLinearGradientStroke=function(e,t,r,i,a,o){void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=10),this._stroke(n.getGradientColor(e,t),r,i,a,o)},n.prototype.beginBitmapStroke=function(e,t,r,i,a,o){void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=10);var s=this;t&&(s._isBitmapStroke=t),s._stroke(n.getBitmapStyle(e),r,i,a,o)},n.prototype._stroke=function(e,t,r,i,a){var o=this._command;o[o.length]=[0,"lineWidth",t],o[o.length]=[0,"lineCap",n._caps[r]],o[o.length]=[0,"lineJoin",n._joins[i]],o[o.length]=[0,"miterLimit",a],o[o.length]=[0,"strokeStyle",e],o[o.length]=[1,"beginPath",[]]},n.prototype.endFill=function(){var e=this,t=e._command,n=e._isBitmapFill;n&&(t[t.length]=[2,"setTransform",n]),t[t.length]=[1,"fill",[]],n&&(e._isBitmapFill=null),e.a2x_ut=!0},n.prototype.setLineDash=function(e){void 0===e&&(e=[]);var t=this._command;t[t.length]=[1,"setLineDash",[e,0]]},n.prototype.endStroke=function(){var e=this,t=e._command,n=e._isBitmapStroke;n&&(t[t.length]=[2,"setTransform",n]),t[t.length]=[1,"stroke",[]],n&&(e._isBitmapStroke=null),e.a2x_ut=!0},n.prototype.decodePath=function(e){for(var t=this,n=["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"],r=e.length,i=0;i<r;i++)0==e[i]||1==e[i]?(t.addDraw(n[e[i]],[e[i+1],e[i+2]]),i+=2):(t.addDraw(n[e[i]],[e[i+1],e[i+2],e[i+3],e[i+4]]),i+=4);t.a2x_ut=!0},n.prototype._updateMatrix=function(n){void 0===n&&(n=!1);var r=this;if(r.a2x_ut){var i=r._bitmapData,a=i.getContext("2d");r.a2x_ut=!1;var o=r._command.length,s=void 0,l=void 0,u=void 0,c=void 0,_=void 0;if(o>0){var d=void 0,p=0,h=0,f=0;for(_=0;_<o;_++)if(d=r._command[_],1==d[0]){if("moveTo"==d[1]||"lineTo"==d[1]||"arcTo"==d[1]||"bezierCurveTo"==d[1])void 0==s&&(s=d[2][0]),void 0==l&&(l=d[2][1]),void 0==u&&(u=d[2][0]),void 0==c&&(c=d[2][1]),"bezierCurveTo"==d[1]?(s=Math.min(s,d[2][0],d[2][2],d[2][4]),l=Math.min(l,d[2][1],d[2][3],d[2][5]),u=Math.max(u,d[2][0],d[2][2],d[2][4]),c=Math.max(c,d[2][1],d[2][3],d[2][5]),p=d[2][4],h=d[2][5]):(s=Math.min(s,d[2][0]),l=Math.min(l,d[2][1]),u=Math.max(u,d[2][0]),c=Math.max(c,d[2][1]),p=d[2][0],h=d[2][1]);else if("quadraticCurveTo"==d[1]){var v=.5*(p+d[2][0]),m=.5*(h+d[2][1]),g=.5*(d[2][0]+d[2][2]),y=.5*(d[2][1]+d[2][3]);void 0==s&&(s=v),void 0==l&&(l=m),void 0==u&&(u=v),void 0==c&&(c=m),s=Math.min(s,v,g,d[2][2]),l=Math.min(l,m,y,d[2][3]),u=Math.max(u,v,g,d[2][2]),c=Math.max(c,m,y,d[2][3]),p=d[2][2],h=d[2][3]}else if("arc"==d[1]){var x=d[2][0],b=d[2][1],E=d[2][2],T=x-E,w=b-E,M=x+E,R=b+E;void 0==s&&(s=T),void 0==l&&(l=w),void 0==u&&(u=M),void 0==c&&(c=R),s=Math.min(s,T),l=Math.min(l,w),u=Math.max(u,M),c=Math.max(c,R)}}else"lineWidth"==d[1]&&f<d[2]&&(f=d[2]);if(void 0!=s||f>0){void 0==s&&(s=0,l=0),s-=2+f,l-=2+f,u+=2+f,c+=2+f;var O=u-s,A=c-l;r._offsetX=s,r._offsetY=l,A=Math.ceil(A),O=Math.ceil(O),i.width=O,i.height=A,i.style.width=O/e.devicePixelRatio+"px",i.style.height=A/e.devicePixelRatio+"px",a.clearRect(0,0,O,A),a.setTransform(1,0,0,1,-s,-l),r._draw(a)}}r._texture=i,r._filters.length>0&&(r.a2x_uf=!0)}t.prototype._updateMatrix.call(this,n)},n.prototype._draw=function(e,t){void 0===t&&(t=!1);var n,r=this,i=r._command,a=i.length,o=r._offsetX,s=r._offsetY,l=!1;t&&e.beginPath();for(var u=0;u<a;u++)if(n=i[u],n[0]>0){var c=n[2].length;if(t&&(l||"beginPath"==n[1]||"closePath"==n[1]||0==c))continue;if(0==c)e[n[1]]();else if(2==c)e[n[1]](n[2][0],n[2][1]);else if(4==c)e[n[1]](n[2][0],n[2][1],n[2][2],n[2][3]);else if(5==c)e[n[1]](n[2][0],n[2][1],n[2][2],n[2][3],n[2][4]);else if(6==c){var _=n[2][4],d=n[2][5];2==n[0]&&(_-=o,d-=s),e[n[1]](n[2][0],n[2][1],n[2][2],n[2][3],_,d)}}else t?"strokeStyle"==n[1]?l=!0:"fillStyle"==n[1]&&(l=!1):e[n[1]]=n[2];t&&e.closePath()},n.prototype.changeColor=function(e){for(var t=this,n=t._command.length,r=t._command,i=0;i<n;i++)0==r[i][0]&&("fillStyle"==r[i][1]&&e.fillColor&&r[i][2]!=e.fillColor&&(r[i][2]=e.fillColor,t.a2x_ut=!0),"strokeStyle"==r[i][1]&&e.strokeColor&&r[i][2]!=e.strokeColor&&(r[i][2]=e.strokeColor,t.a2x_ut=!0),"lineWidth"==r[i][1]&&e.lineWidth&&r[i][2]!=e.lineWidth&&(r[i][2]=e.lineWidth,t.a2x_ut=!0))},n.prototype.destroy=function(){var e=this;e._command=null,e._isBitmapStroke=null,e._isBitmapFill=null,t.prototype.destroy.call(this)},n._caps=["butt","round","square"],n._joins=["miter","round","bevel"],n}(e.Bitmap);e.Shape=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;e.mcSpeed=1,e._cMcSpeed=1,e.mouseChildren=!0,e.children=[];var n=e;return n._instanceType="annie.Sprite",n.hitTestWithPixel=!0,e}return __extends(n,t),n.prototype.destroy=function(){
for(var r=this,i=0;i<r.children.length;i++)r.children[i].destroy();r.parent instanceof e.Sprite&&n._removeFormParent(r.parent,r),r.children=null,r._hitArea=null,t.prototype.destroy.call(this)},n.prototype.addChild=function(e){this.addChildAt(e,this.children.length)},n.prototype.removeChild=function(e){for(var t=this,n=t.children.length,r=0;r<n;r++)if(t.children[r]==e){t.removeChildAt(r);break}},n._getElementsByName=function(t,r,i,a,o){var s=r.children.length;if(s>0)for(var l,u=void 0,c=0;c<s;c++){if(u=r.children[c],(l=u.name)&&""!=l&&t.test(l)&&(o[o.length]=u,i))return;a&&u instanceof e.Sprite&&n._getElementsByName(t,u,i,a,o)}},n.prototype.getChildByName=function(e,t,r){if(void 0===t&&(t=!0),void 0===r&&(r=!1),!e)return null;var i,a=this;i="string"==typeof e?new RegExp("^"+e+"$"):e;var o=[];n._getElementsByName(i,a,t,r,o);var s=o.length;return 0==s?null:1==s?o[0]:o},n.prototype.addChildAt=function(t,r){if(t instanceof e.DisplayObject){var i,a=this,o=t.parent;o instanceof e.Sprite&&n._removeFormParent(o,t),i=a.children.length,r>=i?a.children[i]=t:0==r?a.children.unshift(t):a.children.splice(r,0,t),o!=a&&(t._cp=!0,t.parent=a,a._isOnStage&&!t._isOnStage&&(t.stage=a.stage,t._onAddEvent()))}},n._removeFormParent=function(e,t){for(var n=e.children,r=n.length,i=0;i<r;i++)if(n[i]==t){n.splice(i,1);break}},n.prototype.getChildAt=function(e){return this.children.length-1>=e?this.children[e]:null},n.prototype.getChildIndex=function(e){for(var t=this,n=t.children.length,r=0;r<n;r++)if(t.children[r]==e)return r;return-1},n.prototype.swapChild=function(e,t){var n=this,r=-1,i=-1,a=n.children.length;if(r="number"==typeof e?e:n.getChildIndex(e),i="number"==typeof t?t:n.getChildIndex(t),r==i||r<0||r>=a||i<0||i>=a)return!1;var o=n.children[r];return n.children[r]=n.children[i],n.children[i]=o,!0},n.prototype.removeChildAt=function(e){var t,n=this,r=n.children.length-1;r<0||(t=e==r?n.children.pop():0==e?n.children.shift():n.children.splice(e,1)[0],n._isOnStage&&t._isOnStage&&(t._onRemoveEvent(!1),t.stage=null),t.parent=null)},n.prototype.updateCache=function(){this.a2x_uf=!0},n.prototype.removeAllChildren=function(){for(var e=this,t=e.children.length,n=t-1;n>=0;n--)e.removeChildAt(0)},n.prototype.hitTestPoint=function(n,r){void 0===r&&(r=!1);var i=this;if(!i._visible||!i.mouseEnable)return null;if(i._isCache)return t.prototype.hitTestPoint.call(this,n,r);var a=n;r||(a=i.localToGlobal(n,new e.Point));for(var o,s,l=i.children.length,u={},c=l-1;c>=0;c--)if(s=i.children[c],!(s._isUseToMask>0)&&(void 0==s.mask||(void 0==u[s.mask._instanceId]&&(s.mask.hitTestPoint(a,!0)?u[s.mask._instanceId]=!0:u[s.mask._instanceId]=!1),0!=u[s.mask._instanceId]))&&(o=s.hitTestPoint(a,!0)))return o;return null},n.prototype.getBounds=function(){var t=this,n=t._bounds;n.x=0,n.y=0,n.width=0,n.height=0;var r=t.children,i=r.length;if(i>0)for(var a=0;a<i;a++)r[a].visible&&0==r[a]._isUseToMask&&r[a].getDrawRect(),e.Rectangle.createFromRects(n,e.DisplayObject._transformRect);return n},n.prototype._updateMatrix=function(n){void 0===n&&(n=!1);var r=this;if(r._visible){if(r.a2x_uf)if(r.a2x_uf=!1,r._isCache){e.createCache(r);var i=r._texture.width,a=r._texture.height;i*a>0&&r._updateSplitBoundInfo()}else r.a2x_um=!0;t.prototype._updateMatrix.call(this,n);for(var o=r.children,s=o.length,l=0;l<s;l++)o[l]._updateMatrix(n);n||(r._isCache&&r.a2x_um&&r._checkDrawBounds(),r.a2x_ua=!1,r.a2x_um=!1)}},n.prototype._onRemoveEvent=function(n){for(var r=this,i=null,a=r.children.concat(),o=a.length,s=o-1;s>=0;s--)(i=a[s])instanceof e.DisplayObject&&i._isOnStage&&(i._onRemoveEvent(n),i.stage=null);t.prototype._onRemoveEvent.call(this,n)},n.prototype._onAddEvent=function(){for(var n=this,r=null,i=n.children.concat(),a=i.length,o=a-1;o>=0;o--)(r=i[o])instanceof e.DisplayObject&&!r._isOnStage&&(r.stage=n.stage,r._onAddEvent());t.prototype._onAddEvent.call(this)},n.prototype._onUpdateFrame=function(e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var r=this;r._cMcSpeed=r.mcSpeed*e,t.prototype._onUpdateFrame.call(this,r._cMcSpeed,n);for(var i=null,a=r.children.concat(),o=a.length,s=o-1;s>=0;s--)(i=a[s])&&i._onUpdateFrame(r._cMcSpeed,n)},n}(e.DisplayObject);e.Sprite=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n){var r=e.call(this)||this;r.media=null,r.type="",r.isPlaying=!0,r.name="",r._loop=1,r._repeate=1;var i=r;return i._instanceType="annie.Media","string"==typeof t?(i.media=document.createElement(n),i.media.src=t):i.media=t,i._SBWeixin=i._weixinSB.bind(i),i.media.addEventListener("ended",i._endEvent=function(){-1==i._loop?i.play(0):(i._loop--,i._loop>0?i.play(0,i._loop):i.stop()),i.dispatchEvent("onPlayEnd")}.bind(i)),i.type=n.toLocaleUpperCase(),i.media.addEventListener("timeupdate",i._updateEvent=function(){i.dispatchEvent("onPlayUpdate",{currentTime:i.media.currentTime})}),i.media.addEventListener("play",i._playEvent=function(){i.dispatchEvent("onPlayStart")}),r}return __extends(t,e),t.prototype.play=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this;0==t?n._loop=n._repeate:(n._loop=t,n._repeate=t),n.media.currentTime!=e&&(n.media.currentTime=e);var r=window;if(r.WeixinJSBridge)try{r.WeixinJSBridge.invoke("getNetworkType",{},n._SBWeixin)}catch(e){n.media.play()}else n.media.play();n.isPlaying=!0},t.prototype._weixinSB=function(){this.media.play()},t.prototype.stop=function(){var e=this;e.media.pause(),e.media.currentTime=0,e.isPlaying=!1},t.prototype.pause=function(e){void 0===e&&(e=!0);var t=this;e?(t.media.pause(),t.isPlaying=!1):(t.media.play(),t.isPlaying=!0)},Object.defineProperty(t.prototype,"volume",{get:function(){return this.media.volume},set:function(e){var t=this;t.media.volume=e,t.media.muted=0==e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t=this;t.media.pause(),t.media.removeEventListener("ended",t._endEvent),t.media.removeEventListener("onPlayStart",t._playEvent),t.media.removeEventListener("timeupdate",t._updateEvent),t.media=null,e.prototype.destroy.call(this)},t}(e.EventDispatcher);e.Media=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(r){var i=t.call(this,r,"Audio")||this,a=i;return a._instanceType="annie.Sound",e.Sound._soundList.push(a),a.volume=n._volume,i}return __extends(n,t),n.prototype.destroy=function(){for(var n=e.Sound._soundList.length,r=n-1;r>=0;r--)e.Sound._soundList[r]&&e.Sound._soundList[r]!=this||e.Sound._soundList.splice(r,1);t.prototype.destroy.call(this)},n.prototype.stop2=function(){var e=this;e.isPlaying&&e.media.pause()},n.prototype.play2=function(){var e=this;e.isPlaying&&e.play()},n.stopAllSounds=function(){for(var t=e.Sound._soundList.length,n=t-1;n>=0;n--)e.Sound._soundList[n]?e.Sound._soundList[n].stop2():e.Sound._soundList.splice(n,1)},n.resumePlaySounds=function(){for(var t=e.Sound._soundList.length,n=t-1;n>=0;n--)e.Sound._soundList[n]?e.Sound._soundList[n].play2():e.Sound._soundList.splice(n,1)},n.setAllSoundsVolume=function(t){for(var r=e.Sound._soundList.length,i=r-1;i>=0;i--)e.Sound._soundList[i]?e.Sound._soundList[i].volume=t:e.Sound._soundList.splice(i,1);n._volume=t},n._soundList=[],n._volume=1,n}(e.Media);e.Sound=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=e.call(this,t,"Video")||this,a=i;return a._instanceType="annie.Video",a.media.setAttribute("playsinline","true"),a.media.setAttribute("webkit-playsinline","true"),a.media.setAttribute("x-webkit-airplay","true"),a.media.setAttribute("x5-video-player-type","h5"),a.media.poster="",a.media.preload="auto",a.media.controls=!1,n&&r&&(a.media.width=n,a.media.height=r),i}return __extends(t,e),t}(e.Media);e.Video=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._curFrame=0,e._wantFrame=1,e._lastFrameObj=null,e._isPlaying=!0,e._isFront=!0,e._floatFrame=0,e._a2x_res_class={tf:1},e._a2x_res_children=[],e._a2x_script=null,e._a2x_mode=-2,e._clicked=!1,e._a2x_sounds=null,e._instanceType="annie.MovieClip",e}return __extends(n,t),Object.defineProperty(n.prototype,"currentFrame",{get:function(){var e=this;return e._wantFrame>0?e._wantFrame:e._curFrame},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFront",{get:function(){return this._isFront},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this._a2x_res_class.tf},enumerable:!0,configurable:!0}),n.prototype.stop=function(){this._isPlaying=!1},n.prototype.addFrameScript=function(e,t){var n=this;n._a2x_script instanceof Object||(n._a2x_script={}),n._a2x_script[e]=t},n.prototype.removeFrameScript=function(e){var t=this;t._a2x_script instanceof Object&&(t._a2x_script[e]=null)},Object.defineProperty(n.prototype,"isButton",{get:function(){return-1==this._a2x_mode},enumerable:!0,configurable:!0}),n.prototype.initButton=function(){var e=this;if(-1!=e._a2x_mode&&e._a2x_res_class.tf>1){e.mouseChildren=!1,e.addEventListener("onMouseDown",e._mouseEvent.bind(e)),e.addEventListener("onMuseOver",e._mouseEvent.bind(e)),e.addEventListener("onMouseUp",e._mouseEvent.bind(e)),e.addEventListener("onMouseOut",e._mouseEvent.bind(e));var t=1;e._clicked&&(t=e.totalFrames>2?3:2),e.gotoAndStop(t),e._a2x_mode=-1}},Object.defineProperty(n.prototype,"clicked",{get:function(){return this._clicked},set:function(e){var t=this;e!=t._clicked&&(e?t._mouseEvent({type:"onMouseDown"}):t.gotoAndStop(1),t._clicked=e)},enumerable:!0,configurable:!0}),n.prototype._mouseEvent=function(e){var t=this;if(!t._clicked){var n=2;"onMouseDown"==e.type?t.totalFrames>2&&(n=3):"onMouseOver"==e.type?t.totalFrames>1&&(n=2):n=1,t.gotoAndStop(n)}},n.prototype.getCurrentLabel=function(){var e=this;return e._a2x_res_class.tf>1&&e._a2x_res_class.l[e._curFrame-1]?e._a2x_res_class.l[e._curFrame-1]:null},n.prototype.nextFrame=function(){var e=this;e._wantFrame+=e._cMcSpeed,e._wantFrame>e._a2x_res_class.tf&&(e._wantFrame=e._a2x_res_class.tf),e._isPlaying=!1,e._onCheckUpdateFrame()},n.prototype.prevFrame=function(){var e=this;e._wantFrame-=e._cMcSpeed,e._wantFrame<1&&(e._wantFrame=1),e._isPlaying=!1,e._onCheckUpdateFrame()},n.prototype.gotoAndStop=function(e){var t=this;t._isPlaying=!1;var n=t._a2x_res_class;"string"==typeof e?(e=void 0!=n.label[e]?n.label[e]:t._curFrame,t._floatFrame=0):"number"==typeof e&&(e>n.tf?e=n.tf:e<1&&(e=1)),t._wantFrame=e,t._onCheckUpdateFrame()},n.prototype.play=function(e){void 0===e&&(e=!0);var t=this;t._isPlaying=!0,t._isFront=e},n.prototype.gotoAndPlay=function(e,t){void 0===t&&(t=!0);var n=this;n._isFront=t,n._isPlaying=!0;var r=n._a2x_res_class;"string"==typeof e?(e=void 0!=r.label[e]?r.label[e]:n._curFrame,n._floatFrame=0):"number"==typeof e&&(e>r.tf?e=r.tf:e<1&&(e=1)),n._wantFrame=e,n._onCheckUpdateFrame()},n.prototype._onCheckUpdateFrame=function(){var e=this;e._wantFrame!=e._curFrame&&e._isOnStage&&e._updateTimeline()},n.prototype._onAddEvent=function(){t.prototype._onAddEvent.call(this),this._onCheckUpdateFrame()},n.prototype._updateTimeline=function(){var t=this;if(t._a2x_res_class.tf>1&&(t._a2x_mode>=0?(t._isPlaying=!1,t.parent instanceof e.MovieClip?t._wantFrame=t.parent._wantFrame-t._a2x_mode:t._wantFrame=1):t._isPlaying&&t._wantFrame==t._curFrame&&t._visible&&(t._isFront?(t._wantFrame+=t._cMcSpeed,t._wantFrame>t._a2x_res_class.tf&&(t._wantFrame=1)):(t._wantFrame-=t._cMcSpeed,t._wantFrame<1&&(t._wantFrame=t._a2x_res_class.tf))),t._wantFrame!=t._curFrame)){var n=Math.floor(t._curFrame),r=Math.floor(t._wantFrame);if(t._floatFrame=t._wantFrame-r,t._curFrame=t._wantFrame,n!=r){var i=t._a2x_res_class,a=t._a2x_res_children,o=a.length,s=0,l=null,u=null,c=r-1,_=void 0,d=t._isFront,p=i.f[i.timeLine[c]],h=[],f=[];if(t._lastFrameObj!=p){t._lastFrameObj=p,t.children.length=0;for(var v=null,m=-1,g=o-1;g>=0;g--)s=a[g][0],l=a[g][1],u=p instanceof Object&&p.c instanceof Object?p.c[s]:null,u instanceof Object?(e.d(l,u,!0),void 0!=u.ma?(v=l,m=u.ma):v instanceof Object&&(l.mask=v,s==m&&(v=null)),t.children.unshift(l),l._isOnStage||h.unshift(l)):l._isOnStage&&f.unshift(l);t._floatFrame>0&&t._updateFrameGap();for(var y=h.length,g=0;g<y;g++)l=h[g],!l._isOnStage&&t._isOnStage&&(l._cp=!0,l.parent=t,l.stage=t.stage,l._onAddEvent());y=f.length;for(var g=0;g<y;g++)l=f[g],l._isOnStage&&t._isOnStage&&(l._onRemoveEvent(!0),l.stage=null,l.parent=null)}if(t._a2x_mode<0){var x=!1;if(t._a2x_script instanceof Object&&(_=t._a2x_script[c])instanceof Function&&(_(),x=!0),x||(_=i.a[c])instanceof Array&&t[_[0]](void 0==_[1]||_[1],void 0==_[2]||_[2]),(_=i.e[c])instanceof Array)for(var g=0;g<_.length;g++)t.dispatchEvent(e.Event.CALL_FRAME,{frameIndex:t._curFrame,frameName:_[g]});(1==t._curFrame&&!d||t._curFrame==t._a2x_res_class.tf&&d)&&t.hasEventListener(e.Event.END_FRAME)&&t.dispatchEvent(e.Event.END_FRAME,{frameIndex:t._curFrame,frameName:"endFrame"})}var b=i.s[c];if(b instanceof Object)for(var E in b)t._a2x_sounds[E-1].play(0,b[E])}else t._floatFrame>0&&t._updateFrameGap()}},n.prototype._onUpdateFrame=function(e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var r,i=this;n&&(r=i._isPlaying,i._isPlaying=!1),i._updateTimeline(),n&&(i._isPlaying=r),t.prototype._onUpdateFrame.call(this,e,n)},n.prototype._onRemoveEvent=function(e){t.prototype._onRemoveEvent.call(this,e),e&&n._resetMC(this)},n.prototype._updateFrameGap=function(){for(var e=this,t=e._a2x_res_class,n=e._a2x_res_children,r=n.length,i=0,a=null,o=null,s=null,l=Math.floor(e._curFrame),u=e._lastFrameObj,c=e._floatFrame,_=t.f[t.timeLine[l]],d=r-1;d>=0;d--)if(i=n[d][0],a=n[d][1],_&&_.c&&u&&u.c&&(o=_.c[i],void 0!=(s=u.c[i])&&void 0!=o)){if(void 0!=o.tr&&1!=o.tr.length||(o.tr=[0,0,1,1,0,0]),void 0==o.al&&(o.al=1),a._changeTransformInfo[0]||(a._x=s.tr[0]+(o.tr[0]-s.tr[0])*c),a._changeTransformInfo[1]||(a._y=s.tr[1]+(o.tr[1]-s.tr[1])*c),a._changeTransformInfo[2]||(a._scaleX=s.tr[2]+(o.tr[2]-s.tr[2])*c),a._changeTransformInfo[3]||(a._scaleY=s.tr[3]+(o.tr[3]-s.tr[3])*c),!a._changeTransformInfo[4]){var p=o.tr[4]-s.tr[4],h=o.tr[5]-s.tr[5];p>180?p-=360:p<-180&&(p+=360),h>180?h-=360:h<-180&&(h+=360),a._skewX=s.tr[4]+p*c,a._skewY=s.tr[5]+h*c}a._changeTransformInfo[5]||(a._alpha=s.al+(o.al-s.al)*c,a.a2x_ua=!0),a.a2x_um=!0}e._floatFrame=0},n._resetMC=function(e){e._wantFrame=1,e._curFrame=0,e._isFront=!0,e._floatFrame=0,e._a2x_mode<-1?e._isPlaying=!0:e._isPlaying=!1},n.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),e._lastFrameObj=null,e._a2x_script=null,e._a2x_res_children=null,e._a2x_res_class=null,e._a2x_sounds=null},n}(e.Sprite);e.MovieClip=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var n=t.call(this)||this;n.htmlElement=null,n._isAdded=!1;var r=n;return r._instanceType="annie.FloatDisplay",r.addEventListener(e.Event.REMOVE_TO_STAGE,function(e){r.htmlElement&&(r.htmlElement.style.display="none")}),r.addEventListener(e.Event.ADD_TO_STAGE,function(e){if(r.htmlElement){var t=r.htmlElement.style;r._isAdded?r.htmlElement&&r.visible&&(t.display="inline-block"):(r._isAdded=!0,r.stage.rootDiv.insertBefore(r.htmlElement,r.stage.rootDiv.childNodes[0]))}}),n}return __extends(n,t),n.prototype.init=function(e){var t,n=this;t="string"==typeof e?document.getElementById(e):"annie.Video"==e._instanceType?e.media:e,n.htmlElement&&n.removeHtmlElement();var r=t.style;r.position="absolute",r.display="none",r.transformOrigin=r.WebkitTransformOrigin="0 0 0";var i=t.width||n.getStyle(t,"width"),a=t.height||n.getStyle(t,"height");n._bounds.width=parseInt(i),n._bounds.height=parseInt(a),n.htmlElement=t},n.prototype.getStyle=function(e,t){if(e.style[t])return e.style[t];if(document.defaultView&&document.defaultView.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1"),t=t.toLowerCase();var n=document.defaultView.getComputedStyle(e,"");return n&&n.getPropertyValue(t)}return null},n.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var n=this,r=n.htmlElement;if(r){var i=r.style,a=n._visible;if(a)if(n._isOnStage)for(var o=n.parent;o instanceof e.Sprite;){if(!o._visible){a=!1;break}o=o.parent}else a=!1;var s=a?"inline-block":"none";s!=i.display&&(i.display=s)}},n.prototype._updateMatrix=function(n){void 0===n&&(n=!1);var r=this,i=r.htmlElement;if(r._visible&&i){if(t.prototype._updateMatrix.call(this,n),r.a2x_um||r.a2x_ua||r.a2x_uf){var a=i.style;if(r.a2x_um){var o=r._cMatrix,s=e.devicePixelRatio;a.transform=a.webkitTransform="matrix("+(o.a/s).toFixed(4)+","+(o.b/s).toFixed(4)+","+(o.c/s).toFixed(4)+","+(o.d/s).toFixed(4)+","+(o.tx/s).toFixed(4)+","+(o.ty/s).toFixed(4)+")"}r.a2x_ua&&(a.opacity=r._cAlpha)}n||(r.a2x_uf=!1,r.a2x_um=!1,r.a2x_ua=!1)}},n.prototype._render=function(e){},n.prototype.removeHtmlElement=function(){var e=this,t=e.htmlElement;t&&(t.style.display="none",t.parentNode&&t.parentNode.removeChild(t),e._isAdded=!1,e.htmlElement=null)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeHtmlElement()},n}(e.DisplayObject);e.FloatDisplay=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this,null)||this;return e._textAlign="left",e._textAlpha=1,e._textHeight=0,e._lineHeight=14,e._textWidth=120,e._lineType="single",e._text="",e._font="Arial",e._size=12,e._color="#fff",e._italic=!1,e._bold=!1,e._border=!1,e._stroke=0,e._strokeColor="#000",e.realLines=[],e.a2x_ut=!0,e._instanceType="annie.TextField",e.bitmapData=window.document.createElement("canvas"),e}return __extends(n,t),Object.defineProperty(n.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){var t=this;e!=t._textAlign&&(t._textAlign=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textAlpha",{get:function(){return this._textAlpha},set:function(e){var t=this;e!=t._textAlpha&&(t._textAlpha=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this._textHeight},set:function(e){var t=this;e!=t._textHeight&&(t._textHeight=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){var t=this;e!=t._lineHeight&&(t._lineHeight=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this._textWidth},set:function(e){var t=this;e!=t._textWidth&&(t._textWidth=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineType",{get:function(){return this._lineType},set:function(e){var t=this;e!=t._lineType&&(t._lineType=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(e){var t=this;(e+="")!=t._text&&(t._text=e,""==t._text?(t.a2x_ut=!1,t._texture=null,t._bitmapData.width=0,t._bitmapData.height=0,t.clearBounds()):t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this._font},set:function(e){var t=this;e!=t._font&&(t._font=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},set:function(e){var t=this;e!=t._size&&(t._size=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(e){var t=this;e!=t._color&&(t._color=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return this._italic},set:function(e){var t=this;e!=t._italic&&(t._italic=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return this._bold},set:function(e){var t=this;e!=t._bold&&(t._bold=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"border",{get:function(){return this._border},set:function(e){var t=this;e!=t._border&&(t._border=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=this;e!=t._stroke&&(t._stroke=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(e){var t=this;e!=t._strokeColor&&(t._strokeColor=e,t.a2x_ut=!0)},enumerable:!0,configurable:!0}),n.prototype._prepContext=function(t){var n=this,r=n.size||12;r+="px ",r+=n.font,n._bold&&(r="bold "+r),n._italic&&(r="italic "+r),t.font=r,t.textAlign=n._textAlign||"left",t.textBaseline="top",t.lineJoin="miter",t.miterLimit=2.5,t.fillStyle=e.Shape.getRGBA(n._color,n._textAlpha),t.strokeStyle=n.strokeColor,t.lineWidth=Math.abs(n._stroke)},Object.defineProperty(n.prototype,"lines",{get:function(){return this.realLines.length},enumerable:!0,configurable:!0}),n.prototype._getMeasuredWidth=function(e){return this._bitmapData.getContext("2d").measureText(e).width},n.prototype._updateMatrix=function(e){void 0===e&&(e=!1);var n=this;if(n.a2x_ut){var r=n._bitmapData,i=r.getContext("2d");n.a2x_ut=!1;var a=n._text.toString().split(/(?:\r\n|\r|\n)/),o=[];n.realLines=o,n._prepContext(i);var s=0,l=n._lineHeight;if(n._text.indexOf("\n")<0&&"single"==n.lineType){o[o.length]=a[0];var u=a[0];if(n._getMeasuredWidth(u)>n._textWidth)for(var c=n._getMeasuredWidth(u[0]),_=u[0],d=u.length,p=1;p<d;p++){if(s=i.measureText(u[p]).width,(c+=s)>n._textWidth){o[0]=_;break}_+=u[p]}}else for(var h=0,f=a.length;h<f;h++){var u=a[h];if(u){for(var c=n._getMeasuredWidth(u[0]),_=u[0],d=u.length,p=1;p<d;p++)s=i.measureText(u[p]).width,c+=s,c>n._textWidth?(o[o.length]=_,_=u[p],c=s):_+=u[p];o[o.length]=_}}var v=l*o.length+4>>0,m=n._textWidth>>0,g=0;"center"==n._textAlign?g=.5*m:"right"==n._textAlign&&(g=m),r.width=m,r.height=v,i.clearRect(0,0,r.width,r.width),n.border&&(i.beginPath(),i.strokeStyle="#000",i.lineWidth=1,i.strokeRect(0,0,m,v),i.closePath()),i.setTransform(1,0,0,1,g+2,2),n._prepContext(i);for(var h=0;h<o.length;h++)n._stroke>0&&i.strokeText(o[h],0,h*l,m),i.fillText(o[h],0,h*l,m),n._stroke<0&&i.strokeText(o[h],0,h*l,m);n._filters.length>0?n.a2x_uf=!0:n._texture=r}t.prototype._updateMatrix.call(this,e)},n}(e.Bitmap);e.TextField=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(r){void 0===r&&(r=0);var i=t.call(this)||this;i.inputType=0,i.isAutoDownKeyBoard=!0,i._size=14,i._font="Arial";var a=null,o=i;o._instanceType="annie.InputText",r<2?(a=document.createElement("input"),a.type=n._inputTypeList[r]):(a=document.createElement("textarea"),a.style.resize="none",a.style.overflow="hidden"),o.inputType=r;var s=function(){o.stage._isMouseClickCanvas&&o.isAutoDownKeyBoard&&"pc"!=e.osType&&o.htmlElement&&o.htmlElement.blur()}.bind(o);return o.addEventListener(e.Event.REMOVE_TO_STAGE,function(t){o.stage.removeEventListener(e.MouseEvent.MOUSE_DOWN,s)}),o.addEventListener(e.Event.ADD_TO_STAGE,function(t){o.stage.addEventListener(e.MouseEvent.MOUSE_DOWN,s)}),o.init(a),i}return __extends(n,t),n.prototype.init=function(e){t.prototype.init.call(this,e);var n=this;n.htmlElement.style.outline="none",n.htmlElement.style.borderWidth="thin",n.htmlElement.style.borderColor="#000",n.htmlElement.style.padding=0,n.htmlElement.style.margin=0,n.htmlElement.onblur=function(){window.scrollTo(0,0)}},n.prototype.initInfo=function(e,t,n,r,i,a,o){var s=this;s.htmlElement.placeholder=e,s.htmlElement.style.font=r+"px "+i,s._size=r,s._font=i,s.htmlElement.style.color=t,s.htmlElement.style.textAlign=n,s.border=a,2!=s.inputType&&(s.lineHeight=o)},Object.defineProperty(n.prototype,"lineHeight",{get:function(){return parseInt(this.htmlElement.style.lineHeight)},set:function(e){this.htmlElement.style.lineHeight=e+"px",this.htmlElement.style.height=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return"bold"==this.htmlElement.style.fontWeight},set:function(e){var t=this.htmlElement.style;t.fontWeight=e?"bold":"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},set:function(e){var t=this;t._size!=e&&(t._size=e,t.htmlElement.style.font=e+"px "+t._font)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this._font},set:function(e){var t=this;e!=t._font&&(t._font=e,t.htmlElement.style.font=t._size+"px "+t._font)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return"italic"==this.htmlElement.style.fontStyle},set:function(e){var t=this.htmlElement.style;t.fontStyle=e?"italic":"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return parseInt(this.htmlElement.style.height)},set:function(e){this.htmlElement.style.height=e+"px",2!=this.inputType&&(this.htmlElement.style.lineHeight=e+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return parseInt(this.htmlElement.style.width)},set:function(e){this.htmlElement.style.width=e+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this.htmlElement.style.color},set:function(e){this.htmlElement.style.color=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"border",{get:function(){return"none"!=this.htmlElement.style.borderStyle},set:function(e){var t=this;e?(t.htmlElement.style.borderStyle="inset",t.htmlElement.style.backgroundColor="#fff"):(t.htmlElement.style.borderStyle="none",t.htmlElement.style.backgroundColor="transparent")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){var e=this;if(e.htmlElement)return e.htmlElement.value},set:function(e){var t=this;t.htmlElement&&(t.htmlElement.value=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxCharacters",{get:function(){var e=this.htmlElement.getAttribute("maxlength");return null==e?0:e},set:function(e){this.htmlElement.setAttribute("maxlength",e)},enumerable:!0,configurable:!0}),n._inputTypeList=["input","password","textarea"],n}(e.FloatDisplay);e.InputText=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(r,i,a,o,s,l){void 0===r&&(r="annieEngine"),void 0===i&&(i=640),void 0===a&&(a=1040),void 0===o&&(o=30),void 0===s&&(s="fixedHeight"),void 0===l&&(l=0);var u=t.call(this)||this;if(u.iosTouchendPreventDefault=!0,u.isPreventDefaultEvent=!0,u.rootDiv=null,u.renderObj=null,u.renderType=0,u._viewRect=new e.Rectangle,u.isMultiTouch=!1,u.isMultiMouse=!1,u.autoSteering=!1,u.autoResize=!1,u.desWidth=0,u.desHeight=0,u.divHeight=0,u.divWidth=0,u.bgColor="",u._isFullScreen=!0,u._scaleMode="onScale",u._flush=0,u._currentFlush=0,u._lastDpList={},u._ml=[],u._mp=[],u._mouseDownPoint={},u._mouseEventTypes={mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp",touchcancel:"onMouseUp"},u.sp=new e.Point,u.lp=new e.Point,u.muliPoints=[],u._mP1=new e.Point,u._mP2=new e.Point,u.mouseEvent=null,u._isMouseClickCanvas=!0,u.resize=function(){var t=this,n=t.getRootDivWH(t.rootDiv);if(0==t.divWidth||0==t.divHeight){if(0==n.w||0==n.h)return;t.a2x_um=!0,t.divHeight=n.h,t.divWidth=n.w,t.renderObj.reSize(n.w*e.devicePixelRatio,n.h*e.devicePixelRatio),t.setAlign(),t.dispatchEvent("onInitStage")}else t.autoResize&&(t.divWidth==n.w&&t.divHeight==n.h||(t.a2x_um=!0,t.divHeight=n.h,t.divWidth=n.w,t.renderObj.reSize(n.w*e.devicePixelRatio,n.h*e.devicePixelRatio),t.setAlign(),t.dispatchEvent("onResize")))},e.debug&&!n._isLoadedVConsole){n._isLoadedVConsole=!0;var c=document.createElement("script");c.onload=function(){new VConsole,c.onload=null},document.head.appendChild(c),c.src="libs/vconsole.min.js"}var _=u;_.a2x_ua=!0,_.a2x_um=!0,_._instanceType="annie.Stage",_.stage=_,_._isOnStage=!0,_.name=r;var d=document.getElementById(r);_.renderType=l,_.desWidth=i,_.desHeight=a,_.rootDiv=d,_.setFrameRate(o),_._scaleMode=s,_.anchorX=i>>1,_.anchorY=a>>1,_.renderObj=0==l?new e.CanvasRender:new e.WebGLRender,_.renderObj.init(document.createElement("canvas")),_.rootDiv.appendChild(_.renderObj.rootContainer);var p=d;return _.mouseEvent=_._onMouseEvent.bind(_),"pc"==e.osType?(p.addEventListener("mousedown",_.mouseEvent,!1),p.addEventListener("mousemove",_.mouseEvent,!1),p.addEventListener("mouseup",_.mouseEvent,!1)):(p.addEventListener("touchstart",_.mouseEvent,!1),p.addEventListener("touchmove",_.mouseEvent,!1),p.addEventListener("touchend",_.mouseEvent,!1),p.addEventListener("touchcancel",_.mouseEvent,!1)),n.addUpdateObj(_),u}return __extends(n,t),Object.defineProperty(n,"pause",{get:function(){return n._pause},set:function(t){var r=n;t!=r._pause&&(r._pause=t,t?e.Sound.stopAllSounds():e.Sound.resumePlaySounds(),e.globalDispatcher.dispatchEvent("onRunChanged",{pause:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){var t=this;e!=t._scaleMode&&(t._scaleMode=e,t.setAlign())},enumerable:!0,configurable:!0}),n.prototype._render=function(e){var t=this;e.begin(t.bgColor),e.draw(t),e.end()},n.prototype._initMouseEvent=function(e,t,n,r,i){e._pd=!1,e.clientX=t.x,e.clientY=t.y,e.stageX=n.x,e.stageY=n.y,e.timeStamp=i,e.identifier=r},n.prototype.flush=function(){var e=this;0==e._flush?(e.resize(),e._onUpdateFrame(1),e._updateMatrix(),e._render(e.renderObj)):0==e._currentFlush?(e._currentFlush=e._flush,e.resize()):(e._currentFlush==e._flush&&(e._onUpdateFrame(),e._updateMatrix(),e._render(e.renderObj)),e._currentFlush--)},n.prototype.setFrameRate=function(e){var t=this;t._flush=60/e-1>>0,t._flush<0&&(t._flush=0)},n.prototype.getFrameRate=function(){return 60/(this._flush+1)},n.prototype.getRootDivWH=function(e){var t=640,n=960;return""!=e.style.width?(t=parseInt(e.style.width),n=parseInt(e.style.height),this._isFullScreen=!1):(this._isFullScreen=!0,t=document.documentElement.clientWidth,n=document.documentElement.clientHeight),{w:t,h:n}},n.prototype._onMouseEvent=function(t){var r=this,i=r.renderObj.rootContainer,a=0,o=0;"_a2x_canvas"==t.target.id?(r._isMouseClickCanvas=!0,r.isPreventDefaultEvent&&("touchend"==t.type&&"ios"==e.osType&&r.iosTouchendPreventDefault&&t.preventDefault(),("touchmove"==t.type||"touchstart"==t.type&&"android"==e.osType)&&t.preventDefault())):r._isMouseClickCanvas=!1,r._isFullScreen||(a=i.getBoundingClientRect().left+i.scrollLeft,o=i.getBoundingClientRect().top+i.scrollTop);var s=n._dragDisplay;if(r.isMultiTouch&&t.targetTouches&&t.targetTouches.length>1){if(2==t.targetTouches.length){r._mP1.x=t.targetTouches[0].clientX-a,r._mP1.y=t.targetTouches[0].clientY-o,r._mP2.x=t.targetTouches[1].clientX-a,r._mP2.y=t.targetTouches[1].clientY-o;var l=Math.atan2(r._mP1.y-r._mP2.y,r._mP1.x-r._mP2.x)/Math.PI*180,u=e.Point.distance(r._mP1,r._mP2);if(r.muliPoints.push({p1:r._mP1,p2:r._mP2,angle:l,dis:u}),r.muliPoints.length>=2){r._touchEvent instanceof e.TouchEvent||(r._touchEvent=new e.TouchEvent(e.TouchEvent.ON_MULTI_TOUCH),r._touchEvent.target=r);var c=r.muliPoints.length;r._touchEvent.rotate=2*(r.muliPoints[c-1].angle-r.muliPoints[c-2].angle),r._touchEvent.scale=(r.muliPoints[c-1].dis-r.muliPoints[c-2].dis)/(r.divHeight>r.divWidth?r.desWidth:r.desHeight)*4,r._touchEvent.clientPoint1.x=r.muliPoints[c-1].p1.x*e.devicePixelRatio,r._touchEvent.clientPoint2.x=r.muliPoints[c-1].p2.x*e.devicePixelRatio,r._touchEvent.clientPoint1.y=r.muliPoints[c-1].p1.y*e.devicePixelRatio,r._touchEvent.clientPoint2.y=r.muliPoints[c-1].p2.y*e.devicePixelRatio,r.dispatchEvent(r._touchEvent),r.muliPoints.shift()}}else r.muliPoints.length=0;r._mouseDownPoint={},r._lastDpList={},s&&(n._lastDragPoint.x=Number.MAX_VALUE,n._lastDragPoint.y=Number.MAX_VALUE)}else if(r.muliPoints.length>0&&(r._touchEvent.rotate=0,r._touchEvent.scale=0,r._touchEvent.clientPoint1.x=0,r._touchEvent.clientPoint2.x=0,r._touchEvent.clientPoint1.y=0,r._touchEvent.clientPoint2.y=0,r.dispatchEvent(r._touchEvent),r.muliPoints.length=0),e.EventDispatcher._totalMEC>0){
var _,d=void 0,p=r._mouseEventTypes[t.type],h=[],f=void 0,v=void 0,m=void 0;if("pc"==e.osType)t.identifier="pc0",d=[t];else if(r.isMultiMouse)d=t.changedTouches;else{var g=t.changedTouches[0];if(void 0==r._lastDpList[g.identifier]&&("onMouseDown"!=p||r._lastDpList.isStart))return;r._lastDpList.isStart=!0,d=[g]}for(var y=d.length,x=0;x<y;x++){if(v=0,h.length=0,m=d[x].identifier,f=r._mp.length>0?r._mp.shift():new e.Point,f.x=(d[x].clientX-a)*e.devicePixelRatio,f.y=(d[x].clientY-o)*e.devicePixelRatio,r.globalToLocal(f,r.sp),s&&s.stage&&s.parent){var b=s.x,E=s.y;s.parent.globalToLocal(f,r.lp),n._isDragCenter?(b=r.lp.x,E=r.lp.y):(n._lastDragPoint.x!=Number.MAX_VALUE&&(b+=r.lp.x-n._lastDragPoint.x,E+=r.lp.y-n._lastDragPoint.y),n._lastDragPoint.x=r.lp.x,n._lastDragPoint.y=r.lp.y),r.lp.x=b,r.lp.y=E,n._dragBounds.width!=Number.MIN_VALUE&&(b<n._dragBounds.x?b=n._dragBounds.x:b>n._dragBounds.x+n._dragBounds.width&&(b=n._dragBounds.x+n._dragBounds.width),E<n._dragBounds.y?E=n._dragBounds.y:E>n._dragBounds.y+n._dragBounds.height&&(E=n._dragBounds.y+n._dragBounds.height)),s.x=b,s.y=E}if(r._ml[v]instanceof e.MouseEvent?(_=r._ml[v],_.type=p):(_=new e.MouseEvent(p),r._ml[v]=_),h[h.length]=_,r._initMouseEvent(_,f,r.sp,m,t.timeStamp),v++,"onMouseDown"==p?r._mouseDownPoint[m]=f:"onMouseUp"==p&&r._mouseDownPoint[m]instanceof e.Point&&e.Point.distance(r._mouseDownPoint[m],f)<20&&e.EventDispatcher.getMouseEventCount("onMouseClick")>0&&(r._ml[v]instanceof e.MouseEvent?(_=r._ml[v],_.type="onMouseClick"):(_=new e.MouseEvent("onMouseClick"),r._ml[v]=_),h[h.length]=_,r._initMouseEvent(_,f,r.sp,m),v++),v>0){var T=r.hitTestPoint(f,!0),w=[];if(T instanceof e.DisplayObject)do{T instanceof e.Sprite&&0==T.mouseChildren&&(w.length=0),w[w.length]=T,T=T.parent}while(T instanceof e.DisplayObject);else w[0]=r;for(var c=w.length,M=c-1;M>=0;M--){T=w[M];for(var R=0;R<v;R++)!h[R]._pd&&T.hasEventListener(h[R].type)&&(h[R].currentTarget=T,h[R].target=w[0],T.globalToLocal(f,r.lp),h[R].localX=r.lp.x,h[R].localY=r.lp.y,T.dispatchEvent(h[R]))}w.reverse();for(var M=c-1;M>=0;M--){T=w[M];for(var R=0;R<v;R++)!h[R]._pd&&T.hasEventListener(h[R].type,!1)&&(h[R].currentTarget=T,h[R].target=w[v-1],T.globalToLocal(f,r.lp),h[R].localX=r.lp.x,h[R].localY=r.lp.y,T.dispatchEvent(h[R],null,!1))}if("onMouseDown"!=p){if((e.EventDispatcher.getMouseEventCount("onMouseOver")>0||e.EventDispatcher.getMouseEventCount("onMouseOut")>0)&&r._lastDpList[m]instanceof Array){var O=r._lastDpList[m].length,A=w.length;c=O>A?O:A;for(var P=!1,C=void 0,S=void 0,M=1;M<c;M++)P||r._lastDpList[m][M]!=w[M]&&(P=!0,r._ml[v]instanceof e.MouseEvent?(C=r._ml[v],C.type="onMouseOver"):(C=new e.MouseEvent("onMouseOver"),r._ml[v]=C),r._initMouseEvent(C,f,r.sp,m),v++,r._ml[v]instanceof e.MouseEvent?(S=r._ml[v],S.type="onMouseOut"):(S=new e.MouseEvent("onMouseOut"),r._ml[v]=S),r._initMouseEvent(S,f,r.sp,m)),P&&(r._lastDpList[m][M]&&(T=r._lastDpList[m][M],!S._pd&&T.hasEventListener("onMouseOut")&&(S.currentTarget=T,S.target=r._lastDpList[m][O-1],T.globalToLocal(f,r.lp),S.localX=r.lp.x,S.localY=r.lp.y,T.dispatchEvent(S))),(T=w[M])instanceof e.DisplayObject&&!C._pd&&T.hasEventListener("onMouseOver")&&(C.currentTarget=T,C.target=w[A-1],T.globalToLocal(f,r.lp),C.localX=r.lp.x,C.localY=r.lp.y,T.dispatchEvent(C)))}r._mp[r._mp.length]=f}"onMouseUp"==p?(delete r._mouseDownPoint[m],delete r._lastDpList[m],r._lastDpList.isStart=!1,s&&(n._lastDragPoint.x=Number.MAX_VALUE,n._lastDragPoint.y=Number.MAX_VALUE)):r._lastDpList[m]=w}}}},n.prototype.setAlign=function(){var t=this,n=t.divHeight*e.devicePixelRatio,r=t.divWidth*e.devicePixelRatio,i=t.desHeight,a=t.desWidth;t.anchorX=a>>1,t.anchorY=i>>1;var o=n>=r,s=i>=a,l=1,u=1;if(t.x=r-a>>1,t.y=n-i>>1,t.autoSteering&&s!=o){var c=n;n=r,r=c}if("noScale"!=t._scaleMode)switch(l=n/i,u=r/a,t._scaleMode){case"noBorder":u>l?l=u:u=l;break;case"showAll":u<l?l=u:u=l;break;case"fixedWidth":l=u;break;case"fixedHeight":u=l}t.scaleX=u,t.scaleY=l,t.autoSteering?t.rotation=s==o?0:i>a?-90:90:t.rotation=0,t._viewRect.x=a-r/u>>1,t._viewRect.y=i-n/l>>1,t._viewRect.width=a-2*t._viewRect.x,t._viewRect.height=i-2*t._viewRect.y},Object.defineProperty(n.prototype,"viewRect",{get:function(){return this._viewRect},enumerable:!0,configurable:!0}),n.flushAll=function(){if(!n._pause)for(var e=n.allUpdateObjList.length,t=e-1;t>=0;t--)n.allUpdateObjList[t]&&n.allUpdateObjList[t].flush();requestAnimationFrame(n.flushAll)},n.addUpdateObj=function(e){for(var t=!1,r=n.allUpdateObjList.length,i=0;i<r;i++)if(n.allUpdateObjList[i]==e){t=!0;break}t||n.allUpdateObjList.unshift(e)},n.removeUpdateObj=function(e){for(var t=n.allUpdateObjList.length,r=0;r<t;r++)if(n.allUpdateObjList[r]==e){n.allUpdateObjList.splice(r,1);break}},n.prototype.destroy=function(){t.prototype.destroy.call(this);var r=this;n.removeUpdateObj(r);var i=r.rootDiv;"pc"!=e.osType?(i.removeEventListener("touchstart",r.mouseEvent,!1),i.removeEventListener("touchmove",r.mouseEvent,!1),i.removeEventListener("touchend",r.mouseEvent,!1),i.removeEventListener("touchcancel",r.mouseEvent,!1)):(i.removeEventListener("mousedown",r.mouseEvent,!1),i.removeEventListener("mousemove",r.mouseEvent,!1),i.removeEventListener("mouseup",r.mouseEvent,!1)),i.style.display="none",i.parentNode&&i.parentNode.removeChild(i),r.renderObj=null},n._pause=!1,n._isLoadedVConsole=!1,n._dragDisplay=null,n._dragBounds=new e.Rectangle,n._lastDragPoint=new e.Point,n._isDragCenter=!1,n.allUpdateObjList=[],n}(e.Sprite);e.Stage=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n,r,i){void 0===t&&(t="black"),void 0===n&&(n=2),void 0===r&&(r=2),void 0===i&&(i=2);var a=e.call(this)||this;a.color="black",a.offsetX=2,a.offsetY=2,a.blur=2,a.type="Shadow";var o=a;return o._instanceType="annie.ShadowFilter",o.offsetX=n,o.offsetY=r,o.blur=i,o.color=t,a}return __extends(t,e),t.prototype.toString=function(){var e=this;return e.type+e.offsetX+e.offsetY+e.blur+e.color},t.prototype.drawFilter=function(e){void 0===e&&(e=null)},t.prototype.destroy=function(){},t}(e.AObject);e.ShadowFilter=t;var n=function(e){function t(t){var n=e.call(this)||this;n.redMultiplier=0,n.redOffset=0,n.greenMultiplier=0,n.greenOffset=0,n.blueMultiplier=0,n.blueOffset=0,n.alphaMultiplier=0,n.alphaOffset=0,n.type="Color";var r=n;return r._instanceType="annie.ColorFilter",r.redMultiplier=t[0],r.greenMultiplier=t[1],r.blueMultiplier=t[2],r.alphaMultiplier=t[3],r.redOffset=t[4],r.greenOffset=t[5],r.blueOffset=t[6],r.alphaOffset=t[7],n}return __extends(t,e),t.prototype.drawFilter=function(e){if(void 0===e&&(e=null),e)for(var t=this,n=e.data,r=n.length,i=0;i<r;i+=4)n[i]=n[i]*t.redMultiplier+t.redOffset,n[i+1]=n[i+1]*t.greenMultiplier+t.greenOffset,n[i+2]=n[i+2]*t.blueMultiplier+t.blueOffset,n[i+3]=n[i+3]*t.alphaMultiplier+t.alphaOffset},t.prototype.toString=function(){var e=this;return e.type+e.redMultiplier+e.greenMultiplier+e.blueMultiplier+e.alphaMultiplier+e.redOffset+e.greenOffset+e.blueOffset+e.alphaOffset},t.prototype.destroy=function(){},t}(e.AObject);e.ColorFilter=n;var r=function(e){function t(n,r,i,a){var o=e.call(this)||this;o.brightness=0,o.contrast=0,o.saturation=0,o.hue=0,o.type="ColorMatrix";var s=o;s._instanceType="annie.ColorMatrixFilter",s.brightness=n,s.contrast=r,s.saturation=i,s.hue=a,s.colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n=s._cleanValue(n,255),0!=n&&s._multiplyMatrix([1,0,0,0,n,0,1,0,0,n,0,0,1,0,n,0,0,0,1,0,0,0,0,0,1]),r=o._cleanValue(r,100);var l;if(0!=r&&(r<0?l=127+r/100*127:(l=r%1,l=0==l?t.DELTA_INDEX[r]:t.DELTA_INDEX[r<<0]*(1-l)+t.DELTA_INDEX[1+(r<<0)]*l,l=127*l+127),s._multiplyMatrix([l/127,0,0,0,.5*(127-l),0,l/127,0,0,.5*(127-l),0,0,l/127,0,.5*(127-l),0,0,0,1,0,0,0,0,0,1])),0!=(i=o._cleanValue(i,100))){l=1+(i>0?3*i/100:i/100);var u=.3086,c=.6094,_=.082;s._multiplyMatrix([u*(1-l)+l,c*(1-l),_*(1-l),0,0,u*(1-l),c*(1-l)+l,_*(1-l),0,0,u*(1-l),c*(1-l),_*(1-l)+l,0,0,0,0,0,1,0,0,0,0,0,1])}if(0!=(a=o._cleanValue(a,180)/180*Math.PI)){var d=Math.cos(a),p=Math.sin(a),u=.213,c=.715,_=.072;s._multiplyMatrix([u+d*(1-u)+p*-u,c+d*-c+p*-c,_+d*-_+p*(1-_),0,0,u+d*-u+.143*p,c+d*(1-c)+.14*p,_+d*-_+-.283*p,0,0,u+d*-u+p*-(1-u),c+d*-c+p*c,_+d*(1-_)+p*_,0,0,0,0,0,1,0,0,0,0,0,1])}return o}return __extends(t,e),t.prototype.drawFilter=function(e){if(void 0===e&&(e=null),e)for(var t,n,r,i,a=e.data,o=a.length,s=this.colorMatrix,l=s[0],u=s[1],c=s[2],_=s[3],d=s[4],p=s[5],h=s[6],f=s[7],v=s[8],m=s[9],g=s[10],y=s[11],x=s[12],b=s[13],E=s[14],T=s[15],w=s[16],M=s[17],R=s[18],O=s[19],A=0;A<o;A+=4)t=a[A],n=a[A+1],r=a[A+2],i=a[A+3],a[A]=t*l+n*u+r*c+i*_+d,a[A+1]=t*p+n*h+r*f+i*v+m,a[A+2]=t*g+n*y+r*x+i*b+E,a[A+3]=t*T+n*w+r*M+i*R+O},t.prototype._multiplyMatrix=function(e){var t,n,r,i=[];for(t=0;t<5;t++){for(n=0;n<5;n++)i[n]=this.colorMatrix[n+5*t];for(n=0;n<5;n++){var a=0;for(r=0;r<5;r++)a+=e[n+5*r]*i[r];this.colorMatrix[n+5*t]=a}}},t.prototype._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},t.prototype.toString=function(){var e=this;return e.type+e.brightness+e.hue+e.saturation+e.contrast},t.prototype.destroy=function(){this.colorMatrix=null},t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t}(e.AObject);e.ColorMatrixFilter=r;var i=function(e){function t(t,n,r){void 0===t&&(t=2),void 0===n&&(n=2),void 0===r&&(r=1);var i=e.call(this)||this;i.type="blur",i.blurX=0,i.blurY=0,i.quality=1;var a=i;return a._instanceType="annie.BlurFilter",a.blurX=t,a.blurY=n,a.quality=r,i}return __extends(t,e),t.prototype.toString=function(){var e=this;return e.type+e.blurX+e.blurY+e.quality},t.prototype.drawFilter=function(e){void 0===e&&(e=null);var n=this,r=n.blurX>>1;if(isNaN(r)||r<0)return!1;var i=n.blurY>>1;if(isNaN(i)||i<0)return!1;if(0==r&&0==i)return!1;var a=n.quality;(isNaN(a)||a<1)&&(a=1),a|=0,a>3&&(a=3),a<1&&(a=1);var o=e.data,s=0,l=0,u=0,c=0,_=0,d=0,p=0,h=0,f=0,v=0,m=0,g=0,y=0,x=0,b=0,E=r+r+1|0,T=i+i+1|0,w=0|e.width,M=0|e.height,R=w-1|0,O=M-1|0,A=r+1|0,P=i+1|0,C={r:0,b:0,g:0,a:0},S=C;for(u=1;u<E;u++)S=S.n={r:0,b:0,g:0,a:0};S.n=C;var L={r:0,b:0,g:0,a:0},D=L;for(u=1;u<T;u++)D=D.n={r:0,b:0,g:0,a:0};D.n=L;for(var F=null,I=0|t.MUL_TABLE[r],k=0|t.SHG_TABLE[r],j=0|t.MUL_TABLE[i],B=0|t.SHG_TABLE[i];a-- >0;){p=d=0;var U=I,N=k;for(l=M;--l>-1;){for(h=A*(g=o[0|d]),f=A*(y=o[d+1|0]),v=A*(x=o[d+2|0]),m=A*(b=o[d+3|0]),S=C,u=A;--u>-1;)S.r=g,S.g=y,S.b=x,S.a=b,S=S.n;for(u=1;u<A;u++)c=d+((R<u?R:u)<<2)|0,h+=S.r=o[c],f+=S.g=o[c+1],v+=S.b=o[c+2],m+=S.a=o[c+3],S=S.n;for(F=C,s=0;s<w;s++)o[d++]=h*U>>>N,o[d++]=f*U>>>N,o[d++]=v*U>>>N,o[d++]=m*U>>>N,c=p+((c=s+r+1)<R?c:R)<<2,h-=F.r-(F.r=o[c]),f-=F.g-(F.g=o[c+1]),v-=F.b-(F.b=o[c+2]),m-=F.a-(F.a=o[c+3]),F=F.n;p+=w}for(U=j,N=B,s=0;s<w;s++){for(d=s<<2|0,h=P*(g=o[d])|0,f=P*(y=o[d+1|0])|0,v=P*(x=o[d+2|0])|0,m=P*(b=o[d+3|0])|0,D=L,u=0;u<P;u++)D.r=g,D.g=y,D.b=x,D.a=b,D=D.n;for(_=w,u=1;u<=i;u++)d=_+s<<2,h+=D.r=o[d],f+=D.g=o[d+1],v+=D.b=o[d+2],m+=D.a=o[d+3],D=D.n,u<O&&(_+=w);if(d=s,F=L,a>0)for(l=0;l<M;l++)c=d<<2,o[c+3]=b=m*U>>>N,b>0?(o[c]=h*U>>>N,o[c+1]=f*U>>>N,o[c+2]=v*U>>>N):o[c]=o[c+1]=o[c+2]=0,c=s+((c=l+P)<O?c:O)*w<<2,h-=F.r-(F.r=o[c]),f-=F.g-(F.g=o[c+1]),v-=F.b-(F.b=o[c+2]),m-=F.a-(F.a=o[c+3]),F=F.n,d+=w;else for(l=0;l<M;l++)c=d<<2,o[c+3]=b=m*U>>>N,b>0?(b=255/b,o[c]=(h*U>>>N)*b,o[c+1]=(f*U>>>N)*b,o[c+2]=(v*U>>>N)*b):o[c]=o[c+1]=o[c+2]=0,c=s+((c=l+P)<O?c:O)*w<<2,h-=F.r-(F.r=o[c]),f-=F.g-(F.g=o[c+1]),v-=F.b-(F.b=o[c+2]),m-=F.a-(F.a=o[c+3]),F=F.n,d+=w}}},t.prototype.destroy=function(){},t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t}(e.AObject);e.BlurFilter=i}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.rootContainer=null,n.viewPort=new e.Rectangle,n._blendMode=0,n._instanceType="annie.CanvasRender",n}return __extends(n,t),n.prototype.begin=function(e){var t=this,n=t.rootContainer,r=t._ctx;r.setTransform(1,0,0,1,0,0),""==e?r.clearRect(0,0,n.width,n.height):(r.fillStyle=e,r.fillRect(0,0,n.width,n.height))},n.prototype.beginMask=function(e){var t=this,n=t._ctx;n.save(),n.globalAlpha=0,t.drawMask(e),n.clip()},n.prototype.drawMask=function(e){var t=this,n=e._cMatrix,r=t._ctx;if(r.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),"annie.Shape"==e._instanceType)e._draw(r,!0);else if("annie.Sprite"==e._instanceType||"annie.MovieClip"==e._instanceType)for(var i=0;i<e.children.length;i++)t.drawMask(e.children[i]);else{var a=e._bounds;r.beginPath(),r.rect(0,0,a.width,a.height),r.closePath()}},n.prototype.endMask=function(){this._ctx.restore()},n.prototype.draw=function(t){var n=this;if(t._visible&&t._cAlpha>0){if(!(t instanceof e.Sprite)||t._isCache){var r=t._texture;if(!r||0==r.width||0==r.height)return;var i=n._ctx,a=void 0;a=t._cMatrix,i.globalAlpha!=t._cAlpha&&(i.globalAlpha=t._cAlpha),n._blendMode!=t.blendMode&&(i.globalCompositeOperation=e.BlendMode.getBlendMode(t.blendMode),n._blendMode=t.blendMode),i.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty);var o=t._splitBoundsList,s=o.length,l=t._a2x_drawRect;if(1!=s||l.isSheetSprite&&!t._isCache){var u=0,c=0;l.isSheetSprite&&(u=l.x,c=l.y);for(var _=0;_<s;_++)if(!0===o[_].isDraw){var d=o[_].rect;i.drawImage(r,d.x+u,d.y+c,d.width,d.height,d.x,d.y,d.width,d.height)}}else i.drawImage(r,0,0)}else{var p=t.children.length;if(p>0){for(var h=t.children,f=void 0,v=void 0,_=0;_<p;_++)v=h[_],v._isUseToMask>0||(f instanceof e.DisplayObject?v.mask instanceof e.DisplayObject&&v.mask.parent==v.parent?v.mask!=f&&(n.endMask(),f=v.mask,n.beginMask(f)):(n.endMask(),f=null):v.mask instanceof e.DisplayObject&&v.mask.parent==v.parent&&(f=v.mask,n.beginMask(f)),n.draw(v));f instanceof e.DisplayObject&&n.endMask()}}}},n.prototype.end=function(){},n.prototype.init=function(e){var t=this;t.rootContainer=e,t.rootContainer.id="_a2x_canvas",t._ctx=e.getContext("2d")},n.prototype.reSize=function(t,n){var r=this,i=r.rootContainer;i.width=t,i.height=n,r.viewPort.width=i.width,r.viewPort.height=i.height,i.style.width=Math.ceil(t/e.devicePixelRatio)+"px",i.style.height=Math.ceil(n/e.devicePixelRatio)+"px"},n.prototype.destroy=function(){var e=this;e.rootContainer=null,e._ctx=null},n}(e.AObject);e.CanvasRender=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._blendMode=0,e._instanceType="annie.OffCanvasRender",e}return __extends(n,t),n.prototype.begin=function(e){var t=this,n=t.rootContainer,r=t._ctx;r.setTransform(1,0,0,1,0,0),""==e&&r.clearRect(0,0,n.width,n.height)},n.prototype.beginMask=function(e){var t=this,n=t._ctx;n.save(),n.globalAlpha=0,t.drawMask(e),n.clip()},n.prototype.drawMask=function(e){var t=this,n=e._ocMatrix,r=t._ctx;if(r.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),"annie.Shape"==e._instanceType)e._draw(r,!0);else if("annie.Sprite"==e._instanceType||"annie.MovieClip"==e._instanceType)for(var i=0;i<e.children.length;i++)t.drawMask(e.children[i]);else{var a=e._bounds;r.beginPath(),r.rect(0,0,a.width,a.height),r.closePath()}},n.prototype.endMask=function(){this._ctx.restore()},n.prototype.draw=function(t){var n=this;if(t._visible&&t._cAlpha>0){if(!(t instanceof e.Sprite)||t._isCache&&void 0!=t.parent){var r=t._texture;if(0==r.width||0==r.height)return;var i=n._ctx,a=t._ocMatrix;i.globalAlpha!=t._ocAlpha&&(i.globalAlpha=t._ocAlpha),n._blendMode!=t.blendMode&&(i.globalCompositeOperation=e.BlendMode.getBlendMode(t.blendMode),n._blendMode=t.blendMode),i.setTransform(a.a,a.b,a.c,a.d,a.tx-n._offsetX,a.ty-n._offsetY);var o=t._a2x_drawRect;!o.isSpriteSheet||t._isCache?i.drawImage(r,0,0):i.drawImage(r,o.x,o.y,o.width,o.height,0,0,o.width,o.height)}else{var s=t.children.length;if(s>0){for(var l=t.children,u=void 0,c=void 0,_=0;_<s;_++)c=l[_],c._isUseToMask>0||(u instanceof e.DisplayObject?c.mask instanceof e.DisplayObject&&c.mask.parent==c.parent?c.mask!=u&&(n.endMask(),u=c.mask,n.beginMask(u)):(n.endMask(),u=null):c.mask instanceof e.DisplayObject&&c.mask.parent==c.parent&&(u=c.mask,n.beginMask(u)),n.draw(c));u instanceof e.DisplayObject&&n.endMask()}}}},n.prototype.end=function(){},n.prototype.init=function(e){var t=this;t.rootContainer=e,t._ctx=e.getContext("2d")},n.prototype.reSize=function(t,n){var r=this,i=r.rootContainer;i.width=t,i.height=n,i.style.width=Math.ceil(t/e.devicePixelRatio)+"px",i.style.height=Math.ceil(n/e.devicePixelRatio)+"px"},n.prototype.destroy=function(){var e=this;e.rootContainer=null,e._ctx=null},n}(e.AObject);e.OffCanvasRender=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.rootContainer=null,n.viewPort=new e.Rectangle,n._blendMode=0,n._antialias=!1,n._premultiply=!1,n._autoPurge=0,n._projectionMatrix=null,n._projectionMatrixFlip=null,n._clearColor={r:1,g:1,b:1,a:1},n._maxCardsPerBatch=1e4,n._activeShader=null,n._vertices=null,n._vertexPositionBuffer=null,n._uvs=null,n._uvPositionBuffer=null,n._indices=null,n._textureIndexBuffer=null,n._alphas=null,n._alphaBuffer=null,n._textureDictionary={},n._batchTextures=[],n._batchTextureCount=8,n._lastTextureInsert=-1,n._batchID=0,n._lastTrackedCanvas=0,n._storeID=0,n.batchCardCount=0,n._instanceType="annie.WebGLRender",n}return __extends(n,t),n.prototype.begin=function(e){var t=this;t._ctx.clearColor(t._clearColor.r,t._clearColor.g,t._clearColor.b,t._clearColor.a)},n.prototype.beginMask=function(e){},n.prototype.drawMask=function(e){},n.prototype.endMask=function(){},n.prototype.draw=function(e){var t=this;t.batchCardCount=0,t._drawBatchGroup(e),t._drawBuffers()},n.prototype.end=function(){},n.prototype.init=function(e){var t=this;t.rootContainer=e,t.rootContainer.id="_a2x_webgl";var n,r={depth:!1,alpha:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};try{n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}catch(e){return void console.log("No Supported WebGL")}n.disable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t._premultiply),t._ctx=n,t._batchTextureCount=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),t._createShaderProgram(),t._createBuffers();for(var i=0;i<t._batchTextureCount;i++)t._batchTextures[i]=t.getBaseTexture()},n.prototype.reSize=function(t,n){var r=this,i=r.rootContainer;i.width=t,i.height=n,r.viewPort.width=t,r.viewPort.height=n,i.style.width=Math.ceil(t/e.devicePixelRatio)+"px",i.style.height=Math.ceil(n/e.devicePixelRatio)+"px";var a=r._ctx;a.viewportWidth=t,a.viewportHeight=n,r.updateViewport()},n.prototype.destroy=function(){var e=this;e.rootContainer=null,e._ctx=null},n.prototype.releaseTexture=function(e){var t=this,n=!0;if(e.children){for(var r=0;r<e.children.length;r++)t.releaseTexture(e.children[r]);e._isCache||(n=!1)}if(n){var i=e._texture;void 0!=i._storeID&&(t._killTextureObject(t._textureDictionary[i._storeID]),delete i._storeID)}},n.prototype._createShaderProgram=function(){for(var e=this,t=!1;!t;)try{e._activeShader=e._getShaderProgram(),t=!0}catch(t){e._batchTextureCount-=4,e._batchTextureCount<1&&(e._batchTextureCount=1)}},n.prototype.updateViewport=function(){var e=this,t=e.viewPort.width,n=e.viewPort.height,r=e._ctx;r&&(r.viewport(0,0,t,n),e._projectionMatrix=new Float32Array([2/t,0,0,0,0,-2/n,1,0,0,0,1,0,-1,1,.1,0]),e._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e._projectionMatrixFlip.set(e._projectionMatrix),e._projectionMatrixFlip[5]*=-1,e._projectionMatrixFlip[13]*=-1)},n.prototype.getBaseTexture=function(){var e=this,t=e._ctx,n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),n.width=1,n.height=1,e.setTextureParams(),n},n.prototype.setTextureParams=function(){var e=this._ctx;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},n.prototype._getShaderProgram=function(){var e=this,t=e._ctx;t.useProgram(null);var r=n.REGULAR_VERTEX_HEADER+n.REGULAR_VERTEX_BODY,i=n.REGULAR_FRAGMENT_HEADER+n.REGULAR_FRAGMENT_BODY,a=e._createShader(t.VERTEX_SHADER,r),o=e._createShader(t.FRAGMENT_SHADER,i),s=t.createProgram();t.attachShader(s,a),t.attachShader(s,o),t.linkProgram(s),t.useProgram(s),s.vertexPositionAttribute=t.getAttribLocation(s,"vertexPosition"),t.enableVertexAttribArray(s.vertexPositionAttribute),s.uvPositionAttribute=t.getAttribLocation(s,"uvPosition"),t.enableVertexAttribArray(s.uvPositionAttribute),s.textureIndexAttribute=t.getAttribLocation(s,"textureIndex"),t.enableVertexAttribArray(s.textureIndexAttribute),s.alphaAttribute=t.getAttribLocation(s,"objectAlpha"),t.enableVertexAttribArray(s.alphaAttribute);for(var l=[],u=0;u<e._batchTextureCount;u++)l[u]=u;return s.samplerData=l,s.samplerUniform=t.getUniformLocation(s,"uSampler"),t.uniform1iv(s.samplerUniform,l),s.pMatrixUniform=t.getUniformLocation(s,"pMatrix"),s},n.prototype._createShader=function(e,t){var r=this,i=r._ctx;t=t.replace(/{{count}}/g,r._batchTextureCount+"");for(var a="",o=1;o<r._batchTextureCount;o++)a+="} else if (indexPicker <= "+o+".5) { color = texture2D(uSampler["+o+"], vTextureCoord);";t=t.replace(/{{alternates}}/g,a),t=t.replace(/{{fragColor}}/g,r._premultiply?n.REGULAR_FRAG_COLOR_PREMULTIPLY:n.REGULAR_FRAG_COLOR_NORMAL);var s=i.createShader(e);return i.shaderSource(s,t),i.compileShader(s),s},n.prototype._createBuffers=function(){var e,t,r,i=this,a=i._ctx,o=i._maxCardsPerBatch*n.INDICIES_PER_CARD,s=i._vertexPositionBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,s),e=2;var l=i._vertices=new Float32Array(o*e);for(t=0,r=l.length;t<r;t+=e)l[t]=l[t+1]=0;a.bufferData(a.ARRAY_BUFFER,l,a.DYNAMIC_DRAW),s.itemSize=e,s.numItems=o;var u=i._uvPositionBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,u),e=2;var c=i._uvs=new Float32Array(o*e);for(t=0,r=c.length;t<r;t+=e)c[t]=c[t+1]=0;a.bufferData(a.ARRAY_BUFFER,c,a.DYNAMIC_DRAW),u.itemSize=e,u.numItems=o;var _=i._textureIndexBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,_),e=1;var d=i._indices=new Float32Array(o*e);for(t=0,r=d.length;t<r;t++)d[t]=0;a.bufferData(a.ARRAY_BUFFER,d,a.DYNAMIC_DRAW),_.itemSize=e,_.numItems=o;var p=i._alphaBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,p),e=1;var h=i._alphas=new Float32Array(o*e);for(t=0,r=h.length;t<r;t++)h[t]=1;a.bufferData(a.ARRAY_BUFFER,h,a.DYNAMIC_DRAW),p.itemSize=e,p.numItems=o},n.prototype._createTexture=function(e){var t,n=this,r=n._storeID++;return t=r<n._batchTextureCount?n._batchTextures[r]:n.getBaseTexture(),t._activeIndex=-1,n._textureDictionary[r]=t,e._storeID=r,t._storeID=r,t._imageData=e,t},n.prototype._pushTextureToBatch=function(e){var t=this;if(-1==e._activeIndex||t._batchTextures[e._activeIndex]!=e){var n=-1,r=(t._lastTextureInsert+1)%t._batchTextureCount,i=r;do{if(t._batchTextures[i]._batchID!=t._batchID){n=i;break}i=(i+1)%t._batchTextureCount}while(i!==r);-1==n&&(t._drawBuffers(),t.batchCardCount=0,n=r),e._activeIndex=n,t._lastTextureInsert=n,t._batchTextures[n]=e,t._updateTextureData(e)}e._batchID=t._batchID},n.prototype._updateTextureData=function(e){var t=this,n=t._ctx;n.activeTexture(n.TEXTURE0+e._activeIndex),n.bindTexture(n.TEXTURE_2D,e),t.setTextureParams();try{n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e._imageData)}catch(e){}},n.prototype._killTextureObject=function(e){if(e){var t=this,n=t._ctx;if(void 0!==e._storeID){delete t._textureDictionary[e._storeID],delete e._imageData._storeID,delete e._storeID;try{e._frameBuffer&&(n.deleteFramebuffer(e._frameBuffer),delete e._frameBuffer)}catch(e){}try{n.deleteTexture(e)}catch(e){}}}},n.prototype._drawBatchGroup=function(e){for(var t,r,i,a,o=this,s=e.children.length,l=0;l<s;l++){var u=e.children[l];if(u._visible&&!(u._cAlpha<0))if(!u.children||u._isCache){var c=u._texture;if(c&&!(c.width<=0)){o.batchCardCount+1>o._maxCardsPerBatch&&(o._drawBuffers(),o.batchCardCount=0);var _=void 0,d=void 0,p=void 0,h=void 0,f=o._uvs,v=o._vertices,m=o._indices,g=o._alphas;if(void 0==c._storeID)p=o._createTexture(c);else if(!(p=o._textureDictionary[c._storeID]))continue;h=u._a2x_drawRect,o._pushTextureToBatch(p),d=p._activeIndex,h.isSheetSprite?(u._uvRect||(u._uvRect={}),_=u._uvRect,_.t=h.y/c.height,_.l=h.x/c.width,_.b=(h.y+h.h)/c.height,_.r=(h.x+h.w)/c.width,t=0,r=0,i=h.w+t,a=h.h+r):(_=n.UV_RECT,t=0,r=0,i=c.width+t,a=c.height+r);var y=o.batchCardCount*n.INDICIES_PER_CARD,x=y<<1,b=u._cMatrix;v[x]=t*b.a+r*b.c+b.tx,v[x+1]=t*b.b+r*b.d+b.ty,v[x+2]=t*b.a+a*b.c+b.tx,v[x+3]=t*b.b+a*b.d+b.ty,v[x+4]=i*b.a+r*b.c+b.tx,v[x+5]=i*b.b+r*b.d+b.ty,v[x+6]=v[x+2],v[x+7]=v[x+3],v[x+8]=v[x+4],v[x+9]=v[x+5],v[x+10]=i*b.a+a*b.c+b.tx,v[x+11]=i*b.b+a*b.d+b.ty,f[x]=_.l,f[x+1]=_.t,f[x+2]=_.l,f[x+3]=_.b,f[x+4]=_.r,f[x+5]=_.t,f[x+6]=_.l,f[x+7]=_.b,f[x+8]=_.r,f[x+9]=_.t,f[x+10]=_.r,f[x+11]=_.b,m[y]=m[y+1]=m[y+2]=m[y+3]=m[y+4]=m[y+5]=d,g[y]=g[y+1]=g[y+2]=g[y+3]=g[y+4]=g[y+5]=u._cAlpha,o.batchCardCount++}}else o._drawBatchGroup(u)}},n.prototype._drawBuffers=function(){var e=this,t=e._ctx;if(!(e.batchCardCount<=0)){var r=e._activeShader,i=e._vertexPositionBuffer,a=e._textureIndexBuffer,o=e._uvPositionBuffer,s=e._alphaBuffer;t.bindBuffer(t.ARRAY_BUFFER,i),t.vertexAttribPointer(r.vertexPositionAttribute,i.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,e._vertices),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(r.textureIndexAttribute,a.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,e._indices),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(r.uvPositionAttribute,o.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,e._uvs),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(r.alphaAttribute,s.itemSize,t.FLOAT,!1,0,0),t.bufferSubData(t.ARRAY_BUFFER,0,e._alphas),t.uniformMatrix4fv(r.pMatrixUniform,t.FALSE,e._projectionMatrix);for(var l=0;l<e._batchTextureCount;l++){var u=e._batchTextures[l];t.activeTexture(t.TEXTURE0+l),t.bindTexture(t.TEXTURE_2D,u),e.setTextureParams()}t.drawArrays(t.TRIANGLES,0,e.batchCardCount*n.INDICIES_PER_CARD),e._batchID++,e._batchID==Number.MAX_VALUE&&(e._batchID=0)}},n.INDICIES_PER_CARD=6,n.UV_RECT={t:0,l:0,b:1,r:1},n.REGULAR_VARYING_HEADER="precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;",n.REGULAR_VERTEX_HEADER=n.REGULAR_VARYING_HEADER+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;",n.REGULAR_FRAGMENT_HEADER=n.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];",n.REGULAR_VERTEX_BODY="void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}",n.REGULAR_FRAGMENT_BODY="void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}",n.REGULAR_FRAG_COLOR_NORMAL="gl_FragColor = vec4(color.rgb, color.a * alphaValue);",n.REGULAR_FRAG_COLOR_PREMULTIPLY="if(color.a > 0.001) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}",n}(e.AObject);e.WebGLRender=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e._req=null,e.headers=[],e.responseType="",e.url="",e.method="get",e.data=null,e._fqs=function(e,t){var n=[];if(e instanceof Object)for(var r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t&&(n=n.concat(t)),n.join("&")},e._fus=function(e,t){var n=this;if(void 0==t)return e;var r=[],i=e.indexOf("?");if(-1!=i){var a=e.slice(i+1);return r=r.concat(a.split("&")),e.slice(0,i)+"?"+n._fqs(t,r)}return e+"?"+n._fqs(t,r)},e._instanceType="annie.URLLoader",e}return __extends(n,t),n.prototype.loadCancel=function(){var e=this;e._req&&e._req.abort()},n.prototype.load=function(t,n){void 0===n&&(n="form");var r=this;if(r.loadCancel(),""==r.responseType){var i=t.split("."),a=i[i.length-1],o=a.split("?")[0].toLocaleLowerCase();"."+o==e.suffixName?e._isReleased?r.responseType="swf":r.responseType="js":r.responseType="mp3"==o||"ogg"==o||"wav"==o?"sound":"jpg"==o||"jpeg"==o||"png"==o||"gif"==o?"image":"css"==o?"css":"mp4"==o?"video":"svg"==o?"svg":"xml"==o?"xml":"json"==o?"json":"txt"==o?"text":"js"==o?"js":"unKnow"}var s=0;if(r._req instanceof XMLHttpRequest||(r._req=new XMLHttpRequest,r._req.withCredentials=!1,r._req.onprogress=function(e){r.dispatchEvent("onProgress",{loadedBytes:e.loaded,totalBytes:e.total})},r._req.onerror=function(e){s++,s>2?r.dispatchEvent("onError",{id:2,msg:e.message}):(r._req.abort(),r.data instanceof Object?r._req.send(r.data):r._req.send())},r._req.onload=function(){var t=new e.Event("onComplete"),n=r._req.response;t.data={type:r.responseType,response:null};var i;switch(r.responseType){case"css":i=document.createElement("link"),i.rel="stylesheet",i.href=r.url;break;case"video":i=r.url;break;case"json":i=JSON.parse(n);break;case"js":i="JS_CODE",e.Eval(n);break;default:i=n}t.data.response=i,r.data=null,r.responseType="",r.dispatchEvent(t)}),r.data instanceof Object&&"get"==r.method.toLocaleLowerCase()?(r.url=r._fus(t,r.data),r.data=null):r.url=t,"swf"==r.responseType||"image"==r.responseType||"sound"==r.responseType?r._req.responseType="blob":r._req.responseType="",r._req.open(r.method,r.url,!0),r.headers.length>0){for(var l=0;l<r.headers.length;l+=2)r._req.setRequestHeader(r.headers[l],r.headers[l+1]);r.headers.length=0}if("form"==n)r._req.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=UTF-8"),r._req.send(r._fqs(r.data,null));else{var u="application/json";"json"!=n&&(u="multipart/form-data"),r._req.setRequestHeader("Content-type",u+";charset=UTF-8"),r._req.send(r.data)}},n.prototype.addHeader=function(e,t){this.headers.push(e,t)},n.prototype.destroy=function(){var e=this;e.loadCancel(),e.headers=null,e.data=null,t.prototype.destroy.call(this)},n}(e.EventDispatcher);e.URLLoader=t}(annie||(annie={}));var annie;!function(e){
function t(){I.load(P+"resource/"+A[C]+"/"+A[C]+".res.json?t="+X)}function n(n){for(var r=n.data.response,i=r.length-1;i>=0;i--)"imageRect"==r[i].type&&(e.res[A[C]][r[i].id]=r[i],r.splice(i,1));B.push(r),S+=r.length,C++,A[C]?t():(C=0,N=1/S,s())}function r(e){if(F){var t=window,n=e.data.totalBytes;t.swfBytes&&t.swfBytes[A[C]]&&(n=t.swfBytes[A[C]]),F(100*(U+e.data.loadedBytes/n*N)>>0)}}function i(e){var t;for(var n in e)if(t=e[n],1==t.t){if(!(t.f instanceof Object)){t.f=[];continue}if(t.tf>1){for(var r=t.f,i=r.length,a=null,s=null,l=[],u=0;u<i;u++){if((a=r[u].c)instanceof Object){for(var c in a){var _=a[c].at;if(void 0!=_&&-1!=_){if(0==_)l.push(c);else for(var d=0;d<l.length;d++)if(l[d]==_){l.splice(d,0,c);break}delete a[c].at}}if(s instanceof Object)for(var c in s)if(a[c]instanceof Object)if(-1!=a[c].at)for(var p in s[c])void 0==a[c][p]&&"fi"!=p&&(a[c][p]=s[c][p]);else delete a[c];else a[c]=s[c]}s=a}t.ol=l}}0==--Y&&o()}function a(t){var n=A[C],r=t.data.response;if(e._isReleased){var a,s=new FileReader,l=0,u=0,c=1;s.readAsText(r.slice(r.size-c,r.size)),s.onload=function(){if(0==l)l++,u=c,c+=parseInt(s.result),s.readAsText(r.slice(r.size-c,r.size-u));else if(1==l)l++,u=c,c+=parseInt(s.result),s.readAsText(r.slice(r.size-c,r.size-u));else if(2==l)l++,u=0,c=0,a=JSON.parse(s.result),u=c,c+=a[0].src,Y=a.length-1,s.readAsText(r.slice(u,c));else if(3==l){l++,e.Eval(s.result);for(var t=1;t<a.length;t++)!function(t){if("imageRect"==a[t].type)e.res[n][a[t].id]=a[t],G(null);else if(u=c,c+=a[t].src,"image"==a[t].type){var o=new Image;o.onload=G,o.src=URL.createObjectURL(r.slice(u,c)),e.res[n][a[t].id]=o}else if("sound"==a[t].type){var s=new Audio;if("ios"==e.osType){var l=new FileReader;l.onload=function(){s.src=l.result,G(null)},l.readAsDataURL(r.slice(u,c,"audio/mp3"))}else s.onloadedmetadata=G,s.src=URL.createObjectURL(r.slice(u,c,"audio/mp3"));e.res[n][a[t].id]=s}else if("json"==a[t].type&&"_a2x_con"==a[t].id){var _=new FileReader;_.onload=function(){e.res[n]._a2x_con=JSON.parse(_.result),i(e.res[n]._a2x_con),_.onload=null},_.readAsText(r.slice(u,c))}}(t)}}}else if("js"!=t.data.type&&"css"!=t.data.type)if(e.res[n][B[C][0].id]=r,"_a2x_con"==B[C][0].id)Y++,i(r);else if("image"==t.data.type){Y++;var _=new Image;_.onload=G,_.src=URL.createObjectURL(r),e.res[n][B[C][0].id]=_}else if("sound"==t.data.type){var d=new Audio;if(Y++,"ios"==e.osType){var p=new FileReader;p.onload=function(){d.src=p.result,G(null)},p.readAsDataURL(r)}else d.onloadedmetadata=G,d.src=URL.createObjectURL(r);e.res[n][B[C][0].id]=d}else o();else o()}function o(){if(e._isReleased||B[C].shift(),L++,U=L/S,!e._isReleased&&B[C].length>0)s();else{e.res[A[C]]._f2x_had_loaded_scene=!0;var t={};t.sceneName=A[C],C++,t.sceneId=C,t.sceneTotal=A.length,C==A.length?(O=!1,D(t)):(D(t),s())}}function s(){var t=P+B[C][0].src;e._isReleased?(k.responseType="swf",t+="?v="+e._isReleased):t+="?v="+X,k.load(t)}function l(t){return!(void 0==e.res[t]||null==e.res[t]||!e.res[t]._f2x_had_loaded_scene)}function u(t){delete e.res[t];var n=window,r=n[t];for(var i in r)delete r[i];delete n[t],r=null}function c(t,n){return e.res[t][n]}function _(t,n){var r=e.res[t][n];return"imageRect"==r.type?new e.Bitmap(e.res[t]["_$a2xSS"+r.ssIndex],new e.Rectangle(r.x,r.y,r.w,r.h)):new e.Bitmap(r)}function d(e,t,n){void 0===n&&(n=!1);var r;if(e._a2x_res_obj!=t){void 0!=t.tr&&1!=t.tr.length||(t.tr=[0,0,1,1,0,0]);var i=e._a2x_res_obj;if(void 0==t.al&&(t.al=1),void 0==t.m&&(t.m=0),e.blendMode=t.m,n){var a=e.a2x_um;e._changeTransformInfo[0]||e._x==t.tr[0]||(e._x=t.tr[0],a=!0),e._changeTransformInfo[1]||e._y==t.tr[1]||(e._y=t.tr[1],a=!0),e._changeTransformInfo[2]||e._scaleX==t.tr[2]||(e._scaleX=t.tr[2],a=!0),e._changeTransformInfo[3]||e._scaleY==t.tr[3]||(e._scaleY=t.tr[3],a=!0),e._changeTransformInfo[4]||(e._skewX!=t.tr[4]&&(e._skewX=t.tr[4],e._rotation=0,a=!0),e._skewY!=t.tr[5]&&(e._skewY=t.tr[5],e._rotation=0,a=!0)),e.a2x_um=a,e._changeTransformInfo[5]||e._alpha==t.al||(e._alpha=t.al,e.a2x_ua=!0)}else i.tr!=t.tr&&(r=t.tr,e._x=r[0],e._y=r[1],e._scaleX=r[2],e._scaleY=r[3],e._skewX=r[4],e._skewY=r[5],e.a2x_um=!0),e._alpha!=t.al&&(e._alpha=t.al,e.a2x_ua=!0);if(void 0!=t.w&&(e.textWidth=t.w,e.textHeight=t.h),void 0!=t.t&&(-1==t.t&&e.initButton&&e.initButton(),e._a2x_mode=t.t),i.fi!=t.fi)if(void 0!=t.fi){for(var o,s=[],l=void 0,u=0;u<t.fi.length;u++)switch(t.fi[u][0]){case 0:o=.5*(t.fi[u][2]+t.fi[u][3]),l=T.getRGBA(t.fi[u][10],t.fi[u][11]);var c=t.fi[u][4]*Math.cos(t.fi[u][1]),_=t.fi[u][4]*Math.sin(t.fi[u][1]);s[s.length]=new M(l,c,_,o);break;case 1:s[s.length]=new w(t.fi[u][1],t.fi[u][2],t.fi[u][3]);break;case 2:o=.5*(t.fi[u][1]+t.fi[u][2]),l=T.getRGBA(t.fi[u][7],t.fi[u][6]),s[s.length]=new M(l,0,0,o);break;case 6:s[s.length]=new R(t.fi[u][1],t.fi[u][2],t.fi[u][3],t.fi[u][4]);break;case 7:s[s.length]=new E(t.fi[u][1])}s.length>0?e.filters=s:e.filters=null}else e.filters=null;e._a2x_res_obj=t}}function p(t,n){var r,i=e.res[t]._a2x_con[n],a=decodeURIComponent(i[9]),o=decodeURIComponent(i[4]).replace(/\s(Regular|Medium)/,""),s=i[5],l=W[i[3]],u=H[i[2]],c=i[11],_=i[10],d=i[6],p=i[7],h=i[12],f=i[8];return 0==i[1]||1==i[1]?(r=new e.TextField,r.text=a,r.font=o,r.size=s,r.textAlign=l,r.lineType=u,r.italic=c,r.bold=_,r.color=d,r.textAlpha=p,r.border=h,r.lineHeight=f):(r=new e.InputText(i[2]),r.initInfo(a,d,l,s,o,h,f),r.italic=c,r.bold=_),r}function h(t,n){for(var r=e.res[t]._a2x_con[n][1],i=new e.Shape,a=0;a<r.length;a++)1==r[a][0]?(0==r[a][1]?i.beginFill(e.Shape.getRGBA(r[a][2][0],r[a][2][1])):1==r[a][1]?i.beginLinearGradientFill(r[a][2][0],r[a][2][1]):2==r[a][1]?i.beginRadialGradientFill(r[a][2][0],r[a][2][1]):i.beginBitmapFill(c(t,r[a][2][0]),r[a][2][1]),i.decodePath(r[a][3]),i.endFill()):(0==r[a][1]?i.beginStroke(e.Shape.getRGBA(r[a][2][0],r[a][2][1]),r[a][4],r[a][5],r[a][6],r[a][7]):1==r[a][1]?i.beginLinearGradientStroke(r[a][2][0],r[a][2][1],r[a][4],r[a][5],r[a][6],r[a][7]):2==r[a][1]?i.beginRadialGradientStroke(r[a][2][0],r[a][2][1],r[a][4],r[a][5],r[a][6],r[a][7]):i.beginBitmapStroke(c(t,r[a][2][0]),r[a][2][1],r[a][4],r[a][5],r[a][6],r[a][7]),i.decodePath(r[a][3]),i.endStroke());return i}function f(t,n){return new e.Sound(e.res[t][n])}function v(t){var n=new x;t.isNeedOption&&n.addHeader("X-Requested-With","XMLHttpRequest"),n.method=void 0==t.type?"get":t.type,n.data=void 0==t.data?null:t.data,n.responseType=void 0==t.responseType?void 0==t.dataType?"text":t.dataType:t.responseType,t.success instanceof Object&&n.addEventListener(e.Event.COMPLETE,t.success),t.error instanceof Object&&n.addEventListener(e.Event.ERROR,t.error),n.load(t.url)}function m(e,t,n,r){var i=window;1==t&&(i[n]=r);var a=document.createElement("script"),o=document.getElementsByTagName("head")[0];a.onload=function(e){0==t&&r(i[n]),e.path[0].src="",i[n]=null,delete i[n],o.removeChild(e.path[0])},o.appendChild(a);var s;s=e.indexOf("?")>0?"&":"?",a.src=e+s+"a_n_n_i_e="+Math.random()+"&callback="+n}function g(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null}function y(t,n,r){var i=window,a=e.res[n],o=a._a2x_con,s=o[r];t._a2x_res_class=s;var l,u=!1;if(s.tf>1&&(u=!0,void 0==s.timeLine)){var c=s.f.length,v=[],m=c>0?s.f[0].i:s.tf,g=0;if(m>0)for(var x=0;x<m;x++)v[v.length]=-1;if(c>0)for(l=0;l<c;l++){g=l+1<c?s.f[l+1].i:s.tf,m=s.f[l].i;for(var x=0;x<g-m;x++)v[v.length]=l}s.timeLine=v,s.f instanceof Object||(s.f=[]),s.a instanceof Object||(s.a={}),s.s instanceof Object||(s.s={}),s.e instanceof Object||(s.e={});var b={};if(s.l instanceof Object)for(var E in s.l)for(var T=0;T<s.l[E].length;T++)b[s.l[E][T]]=parseInt(E)+1;else s.l=[];s.label=b}var w=s.c;if(w instanceof Object){var M=[],R=w.length,O=null,A=0,P=null,C=0;for(l=0;l<R;l++){switch(A=o[w[l]]instanceof Array?o[w[l]][0]:o[w[l]].t){case 1:case 4:s.n&&s.n[l]&&t[s.n[l]]?O=t[s.n[l]]:(4==A?O=p(n,w[l]):0==w[l].indexOf("_$")?(O=o[w[l]].tf>1?new e.MovieClip:new e.Sprite,y(O,n,w[l])):O=new i[n][w[l]],s.n&&s.n[l]&&(t[s.n[l]]=O,O.name=s.n[l]));break;case 2:O=_(n,w[l]);break;case 3:O=h(n,w[l]);break;case 5:O=f(n,w[l]),O.name=w[l],t.addSound(O)}if(u)M[M.length]=O,5==A&&(O.isPlaying=!1,t._a2x_sounds instanceof Object||(t._a2x_sounds={}),t._a2x_sounds[l]=O);else{var E=l+1;5==A?O._loop=O._repeate=s.s[0][E]:(d(O,s.f[0].c[E]),void 0!=s.f[0].c[E].ma?(P=O,C=s.f[0].c[E].ma-1):P instanceof Object&&l<=C&&(O.mask=P,l==C&&(P=null)),t.addChildAt(O,0))}}if(u){var S=s.ol;if(S instanceof Object)for(var L=0;L<S.length;L++)t._a2x_res_children[L]=[S[L],M[S[L]-1]]}}}var x=e.URLLoader,b=e.Event,E=e.ColorFilter,T=e.Shape,w=e.BlurFilter,M=e.ShadowFilter,R=e.ColorMatrixFilter;e._isReleased=!1,e.suffixName=".swf",e._shareSceneList=[],e.res={};var O,A,P,C,S,L,D,F,I,k,j,B,U,N,X=(new Date).getTime();e.loadScene=function(i,o,u,c){if(void 0===c&&(c=""),O&&(I.loadCancel(),k.loadCancel()),A=[],P=c,"string"==typeof i)if(l(i)){var _={};_.sceneName=i,_.sceneId=1,_.sceneTotal=1,u(_)}else e.res[i]={},A.push(i);else for(var d=i.length,p=0,h=0;h<d;h++)if(l(i[h])){var _={};_.sceneName=i[h],_.sceneId=++p,_.sceneTotal=d,u(_)}else e.res[i[h]]={},A.push(i[h]);if(0!=A.length)if(j||(I=new x,I.addEventListener(b.COMPLETE,n),k=new x,k.addEventListener(b.COMPLETE,a),k.addEventListener(b.PROGRESS,r),j=!0),Y=0,U=0,C=0,S=0,L=0,O=!0,D=u,F=o,B=[],e._isReleased){if(e._shareSceneList.length>0&&!l("f2xShare"))for(var h=0;h<A.length;h++)if(e._shareSceneList.indexOf(A[h])>=0){A.unshift("f2xShare");break}C=0,S=A.length,N=1/S;for(var h=0;h<S;h++)B.push([{src:"src/"+A[h]+"/"+A[h]+e.suffixName}]);s()}else t()};var Y=0,G=function(e){void 0!=e&&(URL.revokeObjectURL(e.target.url),e.target instanceof Image?e.target.onload=null:e.target.mediaResourceOnload=null),0==--Y&&o()};e.isLoadedScene=l,e.unLoadScene=u,e.getResource=c,e.d=d;var H=["single","multiline"],W=["left","center","right"];e.ajax=v,e.jsonp=m,e.getQueryString=g,e.initRes=y,console.log("https://github.com/flash2x/AnnieJS")}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.pause=!1,t.currentFrame=0,t.totalFrames=0,t._isLoop=0,t._delay=0,t._isFront=!0,t._cParams=null,t._loop=!1,t}return __extends(t,e),t.prototype.init=function(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),t<=0||"number"!=typeof t)throw new Error("annie.Tween.to()或者annie.Tween.from()方法的第二个参数一定要是大于0的数字");var a=this;a.currentFrame=1;var o=60*t>>0;a.totalFrames=o>0?o:1,a.target=e,a._isTo=r,a._isLoop=0,a._startData={},a._disData={},a._delay=0,a._isFront=!0,a._ease=null,a._update=null,a._cParams=null,a._loop=!1,a._completeFun=null;for(var s in n)switch(s){case"useFrame":1==n[s]&&(a.totalFrames=t);break;case"yoyo":0==n[s]?a._isLoop=0:1==n[s]?a._isLoop=Number.MAX_VALUE:a._isLoop=n[s];break;case"delay":n.useFrame?a._delay=n[s]:a._delay=60*n[s]>>0;break;case"ease":a._ease=n[s];break;case"onUpdate":a._update=n[s];break;case"onComplete":a._completeFun=n[s];break;case"completeParams":a._cParams=n[s];break;case"loop":a._loop=n[s];break;default:"number"==typeof n[s]&&(r?(a._startData[s]=e[s],a._disData[s]=n[s]-e[s]):(a._startData[s]=n[s],a._disData[s]=e[s]-n[s],e[s]=n[s]))}},t.prototype.update=function(){var e=this;if(!e.pause){if(e._isFront&&e._delay>0)return void e._delay--;var t=e.currentFrame/e.totalFrames;if(!(t<0||t>1)){e._ease&&(t=e._ease(t));var r=!1;for(var i in e._disData)r=!0,e.target[i]=e._startData[i]+e._disData[i]*t;if(!r)return void n.kill(e.instanceId);e._update&&e._update(t);var a=e._completeFun,o=e._cParams;e._isFront?++e.currentFrame>e.totalFrames&&(e._loop?e.currentFrame=1:(a&&a(o,0==e._isLoop),e._isLoop>0?(e._isFront=!1,e.currentFrame=e.totalFrames,e._isLoop--):n.kill(e.instanceId))):--e.currentFrame<0&&(a&&a(o,0==e._isLoop),e._isLoop>0?(e._isFront=!0,e.currentFrame=1):n.kill(e.instanceId))}}},t.prototype.destroy=function(){var e=this;e._update=null,e._completeFun=null,e._ease=null},t}(e.AObject);e.TweenObj=t;var n=function(){function n(){}return n.to=function(e,t,r){return n.createTween(e,t,r,!0)},n.from=function(e,t,r){return n.createTween(e,t,r,!1)},n.createTween=function(r,i,a,o,s){void 0===s&&(s=!0);for(var l,u=n._tweenList.length,c=0;c<u;c++)if(l=n._tweenList[c],r==l.target)for(var _ in l._startData)void 0!=a[_]&&(delete l._startData[_],delete l._disData[_]);return u=n._tweenPool.length,u>0?(l=n._tweenPool.shift(),l._instanceId=e.AObject._object_id++):l=new t,n._tweenList.push(l),l.init(r,i,a,o,s),l.instanceId},n.killAll=function(){for(var e,t=n._tweenList.length,r=0;r<t;r++)e=n._tweenList[r],e.target=null,e._completeFun=null,e._cParams=null,e._update=null,e._ease=null,e._loop=!1,n._tweenPool.push(e);n._tweenList.length=0},n.kill=function(e){for(var t,r=n._tweenList.length,i=0;i<r;i++)if(t=n._tweenList[i],t.instanceId==e){t.target=null,t._completeFun=null,t._cParams=null,t._update=null,t._ease=null,t._loop=null,n._tweenPool.push(t),n._tweenList.splice(i,1);break}},n.quadraticIn=function(e){return e*e},n.quadraticOut=function(e){return e*(2-e)},n.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},n.cubicIn=function(e){return e*e*e},n.cubicOut=function(e){return--e*e*e+1},n.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},n.quarticIn=function(e){return e*e*e*e},n.quarticOut=function(e){return 1- --e*e*e*e},n.quarticInOut=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},n.quinticIn=function(e){return e*e*e*e*e},n.quinticOut=function(e){return--e*e*e*e*e+1},n.quinticInOut=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},n.sinusoidalIn=function(e){return 1-Math.cos(e*Math.PI/2)},n.sinusoidalOut=function(e){return Math.sin(e*Math.PI/2)},n.sinusoidalInOut=function(e){return.5*(1-Math.cos(Math.PI*e))},n.exponentialIn=function(e){return 0==e?0:Math.pow(1024,e-1)},n.exponentialOut=function(e){return 1==e?1:1-Math.pow(2,-10*e)},n.exponentialInOut=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},n.circularIn=function(e){return 1-Math.sqrt(1-e*e)},n.circularOut=function(e){return Math.sqrt(1- --e*e)},n.circularInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},n.elasticIn=function(e){return 0==e?0:1==e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},n.elasticOut=function(e){return 0==e?0:1==e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},n.elasticInOut=function(e){return 0==e?0:1==e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)},n.backIn=function(e){var t=1.70158;return e*e*((t+1)*e-t)},n.backOut=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},n.backInOut=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},n.bounceIn=function(e){return 1-n.bounceOut(1-e)},n.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},n.bounceInOut=function(e){return e<.5?.5*n.bounceIn(2*e):.5*n.bounceOut(2*e-1)+.5},n.flush=function(){for(var e=n._tweenList.length,t=e-1;t>=0;t--)n._tweenList[t]?n._tweenList[t].update():n._tweenList.splice(t,1)},n._tweenPool=[],n._tweenList=[],n}();e.Tween=n}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(n,r){void 0===r&&(r=0);var i=e.call(this)||this;i._currentCount=0,i._delay=0,i._frameDelay=0,i._currentFrameDelay=0,i._repeatCount=0,i._running=!1,n<=0&&(n=1);var a=i;return a._delay=n,a._frameDelay=Math.ceil(.06*n),a._repeatCount=r,t._timerList.push(a),i}return __extends(t,e),t.prototype.reset=function(){var e=this;e._running=!1,e._currentCount=0,e._currentFrameDelay=0},t.prototype.start=function(){var e=this;e._running=!0,e._currentCount==e._repeatCount&&(e._currentCount=0)},t.prototype.stop=function(){this._running=!1},Object.defineProperty(t.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=e,this._frameDelay=Math.ceil(.001*e*60)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){e<0&&(e=0),this._repeatCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),t.prototype.kill=function(){for(var e=t._timerList.length,n=this,r=0;r<e;r++)if(t._timerList[r]._instanceId==n._instanceId){t._timerList.splice(r,1);break}},t.prototype.update=function(){var e=this;e._running&&++e._currentFrameDelay==e._frameDelay&&(e._repeatCount&&e._currentCount++,e._currentFrameDelay=0,e.dispatchEvent("onTimer"),e._repeatCount&&e._currentCount==e._repeatCount&&(e._running=!1,e.dispatchEvent("onTimerComplete")))},t.flush=function(){for(var e=t._timerList.length,n=e-1;n>=0;n--)t._timerList[n]?t._timerList[n].update():t._timerList.splice(n,1)},t.prototype.destroy=function(){this.kill(),e.prototype.destroy.call(this)},t._timerList=[],t}(e.EventDispatcher);e.Timer=t}(annie||(annie={}));var annie;!function(e){function t(e){window.location.href=e}function n(e){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}e.Eval=eval.bind(window),e.debug=!1,e.isCutDraw=!1,e.version="4.0.0",e.osType=function(){var e=navigator.userAgent.toLocaleLowerCase(),t=/android/,n=/iphone/;return t.test(e)?"android":n.test(e)?"ios":"pc"}(),e.globalDispatcher=new e.EventDispatcher,e.devicePixelRatio=window.devicePixelRatio?window.devicePixelRatio:1,e.StageScaleMode={EXACT_FIT:"exactFit",NO_BORDER:"noBorder",NO_SCALE:"noScale",SHOW_ALL:"showAll",FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight"},e.navigateToURL=t,e.sendToURL=n,e._dRender=null,e.toDisplayDataURL=function(t,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=""),e._dRender||(e._dRender=new e.OffCanvasRender),t._updateMatrix(),n||(n=t.getBounds()),e._dRender._offsetX=n.x,e._dRender._offsetY=n.y;var a=t.parent;t.parent=null,t._onUpdateFrame(1,!0),t._updateMatrix(!0);var o=Math.ceil(n.width),s=Math.ceil(n.height);return e._dRender.init(e.DisplayObject._canvas),e._dRender.reSize(o,s),e._dRender.begin(i),e._dRender.draw(t),e._dRender.end(),t.parent=a,r?r.quality&&(r.quality/=100):r={type:"png"},e._dRender.rootContainer.toDataURL("image/"+r.type,r.quality)},e.createCache=function(t){e._dRender||(e._dRender=new e.OffCanvasRender);var n=t.parent,r=t.getBounds();t.getDrawRect();var i=e.DisplayObject._transformRect.x,a=e.DisplayObject._transformRect.y;e._dRender._offsetX=r.x,e._dRender._offsetY=r.y,t.parent=null,t._updateMatrix(!0),t._texture||(t._texture=document.createElement("canvas"));var o=Math.ceil(r.width),s=Math.ceil(r.height);e._dRender.init(t._texture),e._dRender.reSize(o,s),e._dRender.begin(""),e._dRender.draw(t),e._dRender.end();var l=t._filters,u=l.length;if(u>0){for(var c=e._dRender._ctx,_=c.getImageData(0,0,o,s),d=0;d<u;d++)l[d].drawFilter(_);c.putImageData(_,0,0)}t.parent=n,t._offsetX=i-t.x,t._offsetY=a-t.y,t.a2x_um=!0},e.getStagePixels=function(t,n){var r=t.localToGlobal(new e.Point(n.x,n.y));return t.renderObj.rootContainer.getContext("2d").getImageData(r.x,r.y,n.width,n.height)}}(annie||(annie={})),annie.Stage.addUpdateObj(annie.Tween),annie.Stage.addUpdateObj(annie.Timer),annie.Stage.flushAll();
window.AnnieRoot= window;
window.A2xExtend=__extends;
window.trace=console.log;