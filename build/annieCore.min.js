var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},annie;!function(t){var e=function(){function t(){this._instanceId=0,this._instanceType="annie.AObject",this._instanceId=t._object_id++}return Object.defineProperty(t.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instanceType",{get:function(){return this._instanceType},enumerable:!0,configurable:!0}),t._object_id=0,t}();t.AObject=e;var n=function(e){function n(){e.call(this),this.eventTypes={},this.eventTypes1={},this._instanceType="annie.EventDispatcher"}return __extends(n,e),n.getMouseEventCount=function(t){void 0===t&&(t="");var e=0;if(""==t)for(var i in n._MECO)0==i.indexOf("onMouse")&&(e+=n._MECO[i]);else n._MECO[t]&&(e=n._MECO[t]);return e},n.prototype.addEventListener=function(t,e,n){if(void 0===n&&(n=!0),!t)throw new Error("添加侦听的type值为undefined");if(!e)throw new Error("侦听回调函数不能为null");var i=this,r=i.eventTypes;n||(r=i.eventTypes1),r[t]||(r[t]=[]),r[t].indexOf(e)<0&&(r[t].unshift(e),0==t.indexOf("onMouse")&&i._changeMouseCount(t,!0))},n.prototype._changeMouseCount=function(t,e){var i=e?1:-1;n._MECO[t]||(n._MECO[t]=0),n._MECO[t]+=i,n._MECO[t]<0&&(n._MECO[t]=0),n._totalMEC+=i},n.prototype.dispatchEvent=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=!0);var r=this;"string"==typeof e&&(r._defaultEvent?r._defaultEvent.reset(e,r):r._defaultEvent=new t.Event(e),e=r._defaultEvent);var o=r.eventTypes[e.type];if(i||(o=r.eventTypes1[e.type]),o){var a=o.length;null==e.target&&(e.target=r),null!=n&&(e.data=n);for(var s=a-1;s>=0;s--)e._pd||(o[s]?o[s](e):o.splice(s,1));return!0}return!1},n.prototype.hasEventListener=function(t,e){void 0===e&&(e=!0);var n=this;if(e){if(n.eventTypes[t]&&n.eventTypes[t].length>0)return!0}else if(n.eventTypes1[t]&&n.eventTypes1[t].length>0)return!0;return!1},n.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=!0);var i=this,r=i.eventTypes[t];if(n||(r=i.eventTypes1[t]),r)for(var o=r.length,a=o-1;a>=0;a--)r[a]===e&&(r.splice(a,1),0==t.indexOf("onMouse")&&i._changeMouseCount(t,!1))},n.prototype.removeAllEventListener=function(){var t=this;for(var e in t.eventTypes)if(0==e.indexOf("onMouse"))for(var n=0;n<t.eventTypes[e].length;n++)t._changeMouseCount(e,!1);for(var e in t.eventTypes1)if(0==e.indexOf("onMouse"))for(var n=0;n<t.eventTypes1[e].length;n++)t._changeMouseCount(e,!1);t.eventTypes1={},t.eventTypes={}},n.prototype.destroy=function(){this.removeAllEventListener()},n._MECO={},n._totalMEC=0,n}(e);t.EventDispatcher=n}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e){t.call(this),this.type="",this.target=null,this.data=null,this._bpd=!1,this._pd=!1,this._instanceType="annie.Event",this.type=e}return __extends(e,t),e.prototype.stopImmediatePropagation=function(){this._pd=!0},e.prototype.stopPropagation=function(){this._bpd=!0},e.prototype.destroy=function(){var t=this;t.target=null,t.data=null},e.prototype.reset=function(t,e){this.target=e,this._pd=!1,this._bpd=!1,this.type=t},e.RESIZE="onResize",e.ON_RUN_CHANGED="onRunChanged",e.ON_PLAY_UPDATE="onPlayUpdate",e.ON_PLAY_END="onPlayEnd",e.ON_PLAY_START="onPlayStart",e.ON_FLIP_START="onFlipStart",e.ON_FLIP_STOP="onFlipStop",e.ON_SCROLL_TO_HEAD="onScrollToHead",e.ON_SCROLL_STOP="onScrollStop",e.ON_SCROLL_START="onScrollStart",e.ON_SCROLL_TO_END="onScrollToEnd",e.ON_SLIDE_START="onSlideStart",e.ON_SLIDE_END="onSlideEnd",e.INIT_TO_STAGE="onInitStage",e.ADD_TO_STAGE="onAddToStage",e.REMOVE_TO_STAGE="onRemoveToStage",e.ENTER_FRAME="onEnterFrame",e.END_FRAME="onEndFrame",e.CALL_FRAME="onCallFrame",e.COMPLETE="onComplete",e.PROGRESS="onProgress",e.ERROR="onError",e.ABORT="onAbort",e.START="onStart",e.TIMER="onTimer",e.TIMER_COMPLETE="onTimerComplete",e}(t.AObject);t.Event=e}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e){t.call(this,e),this.clientX=0,this.clientY=0,this.stageX=0,this.stageY=0,this.localX=0,this.localY=0,this.currentTarget=null,this.identifier=0,this._instanceType="annie.MouseEvent"}return __extends(e,t),e.prototype.updateAfterEvent=function(){this.target.stage._cp=!0},e.prototype.destroy=function(){this.currentTarget=null,t.prototype.destroy.call(this)},e.MOUSE_DOWN="onMouseDown",e.MOUSE_UP="onMouseUp",e.CLICK="onMouseClick",e.MOUSE_MOVE="onMouseMove",e.MOUSE_OVER="onMouseOver",e.MOUSE_OUT="onMouseOut",e}(t.Event);t.MouseEvent=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(n){e.call(this,n),this.clientPoint1=new t.Point,this.clientPoint2=new t.Point,this.scale=0,this.rotate=0,this._instanceType="annie.TouchEvent"}return __extends(n,e),n.prototype.updateAfterEvent=function(){this.target.stage._cp=!0},n.prototype.destroy=function(){var t=this;t.clientPoint1=null,t.clientPoint2=null,e.prototype.destroy.call(this)},n.ON_MULTI_TOUCH="onMultiTouch",n}(t.Event);t.TouchEvent=e}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0),t.call(this),this.x=0,this.y=0;var i=this;i._instanceType="annie.Point",i.x=e,i.y=n}return __extends(e,t),e.prototype.destroy=function(){},e.distance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.length;return 4==n?Math.sqrt((t[0]-t[2])*(t[0]-t[2])+(t[1]-t[3])*(t[1]-t[3])):2==n?Math.sqrt((t[0].x-t[1].x)*(t[0].x-t[1].x)+(t[0].y-t[1].y)*(t[0].y-t[1].y)):void 0},e}(t.AObject);t.Point=e}(annie||(annie={}));var annie;!function(t){function e(t){switch(t){case r:case-o:return 0;case i:case-i:return-1;case o:case-r:return 0;default:return Math.cos(t)}}function n(t){switch(t){case r:case-o:return 1;case i:case-i:return 0;case o:case-r:return-1;default:return Math.sin(t)}}var i=Math.PI,r=i>>1,o=i+r,a=Math.PI/180,s=function(i){function r(e,n,r,o,a,s){void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),i.call(this),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.transformPoint=function(e,n,i){void 0===i&&(i=null);var r=this;return i||(i=new t.Point),i.x=e*r.a+n*r.c+r.tx,i.y=e*r.b+n*r.d+r.ty,i},this.prepend=function(t){var e=this,n=t.a,i=t.b,r=t.c,o=t.d,a=t.tx,s=t.ty,l=e.a,u=e.c,c=e.tx;e.a=n*l+r*e.b,e.b=i*l+o*e.b,e.c=n*u+r*e.d,e.d=i*u+o*e.d,e.tx=n*c+r*e.ty+a,e.ty=i*c+o*e.ty+s};var l=this;l._instanceType="annie.Matrix",l.a=e,l.b=n,l.c=r,l.d=o,l.tx=a,l.ty=s}return __extends(r,i),r.prototype.clone=function(){var t=this;return new r(t.a,t.b,t.c,t.d,t.tx,t.ty)},r.prototype.setFrom=function(t){var e=this;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},r.prototype.identity=function(){var t=this;t.a=t.d=1,t.b=t.c=t.tx=t.ty=0},r.prototype.invert=function(){var t=this,e=new r(t.a,t.b,t.c,t.d,t.tx,t.ty),n=t.a,i=t.b,o=t.c,a=t.d,s=t.tx,l=t.ty;if(0==i&&0==o)return 0==n||0==a?e.a=e.d=e.tx=e.ty=0:(n=e.a=1/n,a=e.d=1/a,e.tx=-n*s,e.ty=-a*l),e;var u=n*a-i*o;if(0==u)return e.identity(),e;u=1/u;var c=e.a=a*u;return i=e.b=-i*u,o=e.c=-o*u,a=e.d=n*u,e.tx=-(c*s+o*l),e.ty=-(i*s+a*l),e},r.prototype.createBox=function(t,i,r,o,s,l,u,c,h){var d=this;if(0!=s?l=u=s%360:(l%=360,u%=360),0==l&&0==u)d.a=r,d.b=d.c=0,d.d=o;else{l*=a,u*=a;var _=e(l),p=n(l);l==u?(d.a=_*r,d.b=p*r):(d.a=e(u)*r,d.b=n(u)*r),d.c=-p*o,d.d=_*o}d.tx=t+c-(c*d.a+h*d.c),d.ty=i+h-(c*d.b+h*d.d)},r.isEqual=function(t,e){return t.tx==e.tx&&t.ty==e.ty&&t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d},r.prototype.concat=function(t){var e=this,n=e.a,i=e.b,r=e.c,o=e.d,a=e.tx,s=e.ty,l=t.a,u=t.b,c=t.c,h=t.d,d=t.tx,_=t.ty;e.a=n*l+i*c,e.b=n*u+i*h,e.c=r*l+o*c,e.d=r*u+o*h,e.tx=a*l+s*c+d,e.ty=a*u+s*h+_},r.prototype.rotate=function(t){var e=this,n=Math.sin(t),i=Math.cos(t),r=e.a,o=e.b,a=e.c,s=e.d,l=e.tx,u=e.ty;e.a=r*i-o*n,e.b=r*n+o*i,e.c=a*i-s*n,e.d=a*n+s*i,e.tx=l*i-u*n,e.ty=l*n+u*i},r.prototype.scale=function(t,e){var n=this;n.a*=t,n.d*=e,n.c*=t,n.b*=e,n.tx*=t,n.ty*=e},r.prototype.translate=function(t,e){var n=this;n.tx+=t,n.ty+=e},r.prototype.destroy=function(){},r}(t.AObject);t.Matrix=s}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),t.call(this),this.x=0,this.y=0,this.width=0,this.height=0;var o=this;o._instanceType="annie.Rectangle",o.x=e,o.y=n,o.height=r,o.width=i}return __extends(e,t),e.prototype.isPointIn=function(t){var e=this;return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},e.createFromRects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(0==t.length)return null;if(1==t.length)return t[0];for(var n=t[0],i=n.x,r=n.y,o=n.width,a=n.height,s=void 0,l=void 0,u=void 0,c=void 0,h=1;h<t.length;h++)s=i+o,u=r+a,l=t[h].x+t[h].width,c=t[h].y+t[h].height,(i>t[h].x||0==s)&&(i=t[h].x),(r>t[h].y||0==u)&&(r=t[h].y),s<l&&(s=l),u<c&&(u=c),n.x=i,n.y=r,n.width=s-i,n.height=u-r;return n},e.createFromPoints=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=e[0].x,r=e[0].y,o=e[0].x,a=e[0].y,s=1;s<e.length;s++)null!=e[s]&&(i>e[s].x&&(i=e[s].x),r>e[s].y&&(r=e[s].y),o<e[s].x&&(o=e[s].x),a<e[s].y&&(a=e[s].y));return t.x=i,t.y=r,t.width=o-i,t.height=a-r,t},e.createRectform2Point=function(t,e,n){var i=e.x,r=e.y,o=e.x,a=e.y;i>n.x&&(i=n.x),r>n.y&&(r=n.y),o<n.x&&(o=n.x),a<n.y&&(a=n.y),t.x=i,t.y=r,t.width=o-i,t.height=a-r},e.testRectCross=function(t,e){var n,i,r,o;return n=t.x+t.width/2,i=t.y+t.height/2,r=e.x+e.width/2,o=e.y+e.height/2,Math.abs(n-r)<=t.width/2+e.width/2&&Math.abs(i-o)<=t.height/2+e.height/2},e.prototype.destroy=function(){},e}(t.AObject);t.Rectangle=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._UI={UD:!1,UM:!0,UA:!0,UF:!1},this.stage=null,this.parent=null,this.cAlpha=1,this.cMatrix=new t.Matrix,this.mouseEnable=!0,this.cFilters=[],this.name="",this._x=0,this._y=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._alpha=1,this._skewX=0,this._skewY=0,this._anchorX=0,this._anchorY=0,this._visible=!0,this._matrix=new t.Matrix,this._mask=null,this._filters=[],this._cp=!0,this._dragBounds=new t.Rectangle,this._isDragCenter=!1,this._lastDragPoint=new t.Point,this._isUseToMask=0,this._texture=null,this._offsetX=0,this._offsetY=0,this._bounds=new t.Rectangle,this._drawRect=new t.Rectangle,this.soundList=[],this._a2x_res_obj={},this._instanceType="annie.DisplayObject"}return __extends(n,e),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._setProperty("_x",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._setProperty("_y",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._setProperty("_scaleX",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._setProperty("_scaleY",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._setProperty("_rotation",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._setProperty("_alpha",t,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewX",{get:function(){return this._skewX},set:function(t){this._setProperty("_skewX",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewY",{get:function(){return this._skewY},set:function(t){this._setProperty("_skewY",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){this._setProperty("_anchorX",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){this._setProperty("_anchorY",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this._visible},set:function(t){var e=this;t!=e._visible&&(e._visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matrix",{get:function(){return this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._mask},set:function(t){var e=this;t!=e._mask&&(t?t._isUseToMask++:null!=e._mask&&e._mask._isUseToMask--,e._mask=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filters",{get:function(){return this._filters},set:function(t){this._setProperty("_filters",t,2)},enumerable:!0,configurable:!0}),n.prototype.globalToLocal=function(t,e){return void 0===e&&(e=null),this.cMatrix.invert().transformPoint(t.x,t.y,e)},n.prototype.localToGlobal=function(t,e){void 0===e&&(e=null);var n=this;return n.parent?n.parent.cMatrix.transformPoint(t.x,t.y,e):n.cMatrix.transformPoint(t.x,t.y,e)},n.prototype.startDrag=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=null);var i=this;if(!i.stage)return void console.log("The DisplayObject is not on stage");t.Stage._dragDisplay=i,i._isDragCenter=e,i._lastDragPoint.x=Number.MAX_VALUE,i._lastDragPoint.y=Number.MAX_VALUE,n?(i._dragBounds.x=n.x,i._dragBounds.y=n.y,i._dragBounds.width=n.width,i._dragBounds.height=n.height):(i._dragBounds.x=0,i._dragBounds.y=0,i._dragBounds.width=0,i._dragBounds.height=0)},n.prototype.stopDrag=function(){t.Stage._dragDisplay==this&&(t.Stage._dragDisplay=null)},n.prototype.hitTestPoint=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=this;if(!r.visible||!r.mouseEnable&&i)return null;var o;return o=e?r.globalToLocal(t,n._bp):t,r.getBounds().isPointIn(o)?r:null},n.prototype.getBounds=function(){return this._bounds},n.prototype.getDrawRect=function(){var e=this,i=e.getBounds();if(e._mask){var r=e._mask.getDrawRect();i.x<r.x&&(i.x=r.x),i.y<r.y&&(i.y=r.y),i.width>r.width&&(i.width=r.width),i.height>r.height&&(i.height=r.height)}return e.matrix.transformPoint(i.x,i.y,n._p1),e.matrix.transformPoint(i.x+i.width,i.y,n._p2),e.matrix.transformPoint(i.x+i.width,i.y+i.height,n._p3),e.matrix.transformPoint(i.x,i.y+i.height,n._p4),t.Rectangle.createFromPoints(e._drawRect,n._p1,n._p2,n._p3,n._p4),e._drawRect},n.prototype.update=function(t){void 0===t&&(t=!0);var e=this;if(e._visible){var n=e._UI;e._cp&&(n.UM=n.UA=n.UF=!0,e._cp=!1),n.UM&&e._matrix.createBox(e._x,e._y,e._scaleX,e._scaleY,e._rotation,e._skewX,e._skewY,e._anchorX,e._anchorY),n.UM&&(e.cMatrix.setFrom(e._matrix),e.parent&&e.cMatrix.prepend(e.parent.cMatrix)),n.UA&&(e.cAlpha=e._alpha,e.parent&&(e.cAlpha*=e.parent.cAlpha)),n.UF}},n.prototype.render=function(t){t.draw(this)},Object.defineProperty(n.prototype,"width",{get:function(){return this.getWH().width},set:function(t){var e=this,n=e.width;if(t>0&&n>0){var i=t/n;e.scaleX*=i}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.getWH().height},set:function(t){var e=this,n=e.height;if(t>0&&n>0){var i=t/n;e.scaleY*=i}},enumerable:!0,configurable:!0}),n.prototype.getWH=function(){var t=this;t.update();var e=t.getDrawRect();return{width:e.width,height:e.height}},n.prototype._setProperty=function(t,e,n){var i=this;if(i[t]!=e){i[t]=e;var r=i._UI;0==n?r.UM=!0:1==n?r.UA=!0:2==n?r.UF=!0:3==n&&(r.UD=!0)}},n.prototype.stopAllSounds=function(){var t=this.soundList;if(t)for(var e=t.length-1;e>=0;e--)t[e].stop()},n.prototype.getSound=function(t){var e=this.soundList,n=[];if(e)if("string"==typeof t)for(var i=e.length-1;i>=0;i--)e[i].name==t&&n.push(e[i]);else t>=0&&t<e.length&&n.push(e[t]);return n},n.prototype.addSound=function(t){var e=this;e.soundList||(e.soundList=[]),e.soundList.push(t)},n.prototype.removeSound=function(t){var e=this.soundList;if(e)if("string"==typeof t)for(var n=e.length-1;n>=0;n--)e[n].name==t&&e.splice(t,1);else t>=0&&t<e.length&&e.splice(t,1)},n.prototype.destroy=function(){var t=this;t.stopAllSounds();for(var n=0;n<t.soundList.length;n++)t.soundList[n].destroy();t._a2x_res_obj=null,t.mask=null,t.filters=null,t.parent=null,t.stage=null,t._bounds=null,t._drawRect=null,t._dragBounds=null,t._lastDragPoint=null,t.cFilters=null,t._matrix=null,t.cMatrix=null,t._UI=null,t._texture=null,t._visible=!1,e.prototype.destroy.call(this)},n.prototype.callEventAndFrameScript=function(e){var n=this;if(n.stage){var i=n.soundList;if(0==e){if(n.dispatchEvent(t.Event.REMOVE_TO_STAGE),i.length>0)for(var r=0;r<i.length;r++)i[r].stop2()}else{if(1==e){if(i.length>0)for(var r=0;r<i.length;r++)i[r].play2();n.dispatchEvent(t.Event.ADD_TO_STAGE)}n._visible&&n.dispatchEvent(t.Event.ENTER_FRAME)}}},n._bp=new t.Point,n._p1=new t.Point,n._p2=new t.Point,n._p3=new t.Point,n._p4=new t.Point,n}(t.EventDispatcher);t.DisplayObject=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(n){e.call(this);var i=this;i._instanceType="annie.Bitmap",i._texture=t.getImageInfo(),i._texture.onload=function(){i._bounds.width=i._texture.width,i._bounds.height=i._texture.height},i._texture.src=n}return __extends(n,e),n.prototype.destroy=function(){this._texture="",e.prototype.destroy.call(this)},n.prototype.update=function(t){void 0===t&&(t=!0);var n=this;if(n._visible){e.prototype.update.call(this,t);var i=n._UI;i.UM=i.UA=i.UF=!1}},n}(t.DisplayObject);t.Bitmap=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._command=[],this.hitTestWidthPixel=!0,this.beginRadialGradientFill=function(t,e){this._fill(n.getGradientColor(t,e))},this.beginRadialGradientStroke=function(t,e,i,r,o,a){void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=10),this._stroke(n.getGradientColor(t,e),i,r,o,a)},this.decodePath=function(t){for(var e=this,n=["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"],i=t.length,r=0;r<i;r++)0==t[r]||1==t[r]?(e.addDraw(n[t[r]],[t[r+1],t[r+2]]),r+=2):(e.addDraw(n[t[r]],[t[r+1],t[r+2],t[r+3],t[r+4]]),r+=4)},this._offsetX=0,this._offsetY=0,this._instanceType="annie.Shape"}return __extends(n,e),n.getGradientColor=function(e,i){var r,o=t.CanvasRender.drawCtx;r=4==e.length?o.createLinearGradient(e[0],e[1],e[2],e[3]):o.createRadialGradient(e[0],e[1],0,e[2],e[3],e[4]);for(var a=0,s=i.length;a<s;a++)r.addColorStop(i[a][0],n.getRGBA(i[a][1],i[a][2]));return r},n.getBitmapStyle=function(e){return t.CanvasRender.drawCtx.createPattern(e,"repeat")},n.getRGBA=function(t,e){if(0==t.indexOf("0x")&&(t=t.replace("0x","#")),t.length<7&&(t="#000000"),1!=e){t="rgba("+parseInt("0x"+t.substr(1,2))+","+parseInt("0x"+t.substr(3,2))+","+parseInt("0x"+t.substr(5,2))+","+e+")"}return t},n.prototype.addDraw=function(t,e){var n=this;n._UI.UD=!0,n._command[n._command.length]=[1,t,e]},n.prototype.drawRoundRect=function(t,e,n,i,r,o,a,s){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0);var l=(n<i?n:i)/2,u=0,c=0,h=0,d=0;r<0&&(r*=u=-1),r>l&&(r=l),o<0&&(o*=c=-1),o>l&&(o=l),s<0&&(s*=h=-1),s>l&&(s=l),a<0&&(a*=d=-1),a>l&&(a=l);var _=this._command;_[_.length]=[1,"moveTo",[t+n-o,e]],_[_.length]=[1,"arcTo",[t+n+o*c,e-o*c,t+n,e+o,o]],_[_.length]=[1,"lineTo",[t+n,e+i-s]],_[_.length]=[1,"arcTo",[t+n+s*h,e+i+s*h,t+n-s,e+i,s]],_[_.length]=[1,"lineTo",[t+a,e+i]],_[_.length]=[1,"arcTo",[t-a*d,e+i+a*d,t,e+i-a,a]],_[_.length]=[1,"lineTo",[t,e+r]],_[_.length]=[1,"arcTo",[t-r*u,e-r*u,t+r,e,r]],_[_.length]=[1,"closePath",[]]},n.prototype.moveTo=function(t,e){this._command[this._command.length]=[1,"moveTo",[t,e]]},n.prototype.lineTo=function(t,e){this._command[this._command.length]=[1,"lineTo",[t,e]]},n.prototype.arcTo=function(t,e){this._command[this._command.length]=[1,"arcTo",[t,e]]},n.prototype.quadraticCurveTo=function(t,e,n,i){this._command[this._command.length]=[1,"quadraticCurveTo",[t,e,n,i]]},n.prototype.bezierCurveTo=function(t,e,n,i,r,o){this._command[this._command.length]=[1,"bezierCurveTo",[t,e,n,i,r,o]]},n.prototype.closePath=function(){this._command[this._command.length]=[1,"closePath",[]]},n.prototype.drawRect=function(t,e,n,i){var r=this._command;r[r.length]=[1,"moveTo",[t,e]],r[r.length]=[1,"lineTo",[t+n,e]],r[r.length]=[1,"lineTo",[t+n,e+i]],r[r.length]=[1,"lineTo",[t,e+i]],r[r.length]=[1,"closePath",[]]},n.prototype.drawArc=function(t,e,n,i,r){this._command[this._command.length]=[1,"arc",[t,e,n,i/180*Math.PI,r/180*Math.PI]]},n.prototype.drawCircle=function(t,e,n){this._command[this._command.length]=[1,"arc",[t,e,n,0,2*Math.PI]]},n.prototype.drawEllipse=function(t,e,n,i){var r=.5522848,o=n/2*r,a=i/2*r,s=t+n,l=e+i,u=t+n/2,c=e+i/2,h=this._command;h[h.length]=[1,"moveTo",[t,c]],h[h.length]=[1,"bezierCurveTo",[t,c-a,u-o,e,u,e]],h[h.length]=[1,"bezierCurveTo",[u+o,e,s,c-a,s,c]],h[h.length]=[1,"bezierCurveTo",[s,c+a,u+o,l,u,l]],h[h.length]=[1,"bezierCurveTo",[u-o,l,t,c+a,t,c]]},n.prototype.clear=function(){var t=this;t._command=[],t._UI.UD=!0,t._offsetX=0,t._offsetY=0,t._bounds.width=0,t._bounds.height=0},n.prototype.beginFill=function(t){this._fill(t)},n.prototype.beginLinearGradientFill=function(t,e){this._fill(n.getGradientColor(t,e))},n.prototype.beginBitmapFill=function(t,e){var i=this;e&&(i._isBitmapFill=e),i._fill(n.getBitmapStyle(t))},n.prototype._fill=function(t){var e=this,n=e._command;n[n.length]=[0,"fillStyle",t],n[n.length]=[1,"beginPath",[]],e._UI.UD=!0},n.prototype.beginStroke=function(t,e,n,i,r){void 0===e&&(e=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this._stroke(t,e,n,i,r)},n.prototype.beginLinearGradientStroke=function(t,e,i,r,o,a){void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=10),this._stroke(n.getGradientColor(t,e),i,r,o,a)},n.prototype.beginBitmapStroke=function(t,e,i,r,o,a){void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=10);var s=this;e&&(s._isBitmapStroke=e),s._stroke(n.getBitmapStyle(t),i,r,o,a)},n.prototype._stroke=function(t,e,i,r,o){var a=this._command;a[a.length]=[0,"lineWidth",e],a[a.length]=[0,"lineCap",n._caps[i]],a[a.length]=[0,"lineJoin",n._joins[r]],a[a.length]=[0,"miterLimit",o],a[a.length]=[0,"strokeStyle",t],a[a.length]=[1,"beginPath",[]],this._UI.UD=!0},n.prototype.endFill=function(){var t=this,e=t._command;e[e.length]=[1,"fill",[]]},n.prototype.endStroke=function(){var t=this,e=t._command;e[e.length]=[1,"stroke",[]]},n.prototype.update=function(t){void 0===t&&(t=!1);var n=this;if(n._visible){if(e.prototype.update.call(this,t),n._UI.UD||n._UI.UF){var i=n._command.length,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;if(i>0){var u=void 0,c=0,h=0,d=0;for(l=0;l<i;l++)if(u=n._command[l],1==u[0]){if("moveTo"==u[1]||"lineTo"==u[1]||"arcTo"==u[1]||"bezierCurveTo"==u[1])void 0==r&&(r=u[2][0]),void 0==o&&(o=u[2][1]),void 0==a&&(a=u[2][0]),void 0==s&&(s=u[2][1]),"bezierCurveTo"==u[1]?(r=Math.min(r,u[2][0],u[2][2],u[2][4]),o=Math.min(o,u[2][1],u[2][3],u[2][5]),a=Math.max(a,u[2][0],u[2][2],u[2][4]),s=Math.max(s,u[2][1],u[2][3],u[2][5]),c=u[2][4],h=u[2][5]):(r=Math.min(r,u[2][0]),o=Math.min(o,u[2][1]),a=Math.max(a,u[2][0]),s=Math.max(s,u[2][1]),c=u[2][0],h=u[2][1]);else if("quadraticCurveTo"==u[1]){var _=.5*(c+u[2][0]),p=.5*(h+u[2][1]),f=.5*(u[2][0]+u[2][2]),v=.5*(u[2][1]+u[2][3]);void 0==r&&(r=_),void 0==o&&(o=p),void 0==a&&(a=_),void 0==s&&(s=p),r=Math.min(r,_,f,u[2][2]),o=Math.min(o,p,v,u[2][3]),a=Math.max(a,_,f,u[2][2]),s=Math.max(s,p,v,u[2][3]),c=u[2][2],h=u[2][3]}else if("arc"==u[1]){var g=u[2][0],y=u[2][1],m=u[2][2],b=g-m,x=y-m,P=g+m,w=y+m;void 0==r&&(r=b),void 0==o&&(o=x),void 0==a&&(a=P),void 0==s&&(s=w),r=Math.min(r,b),o=Math.min(o,x),a=Math.max(a,P),s=Math.max(s,w)}}else"lineWidth"==u[1]&&d<u[2]&&(d=u[2]);if(void 0!=r||d>0){void 0==r&&(r=0,o=0),r-=d>>1,o-=d>>1,a+=d>>1,s+=d>>1;var M=a-r,E=s-o;n._offsetX=r,n._offsetY=o,n._bounds.x=r,n._bounds.y=o,n._bounds.width=M,n._bounds.height=E}}n._UI.UD=!1}n._UI.UM=!1,n._UI.UA=!1,n._UI.UF=!1}},n.prototype._draw=function(t,e){void 0===e&&(e=!1);var n,i=this,r=i._command,o=r.length,a=i._offsetX,s=i._offsetY,l=!1;e&&t.beginPath();for(var u=0;u<o;u++)if(n=r[u],n[0]>0){var c=n[2].length;if(e&&(l||"beginPath"==n[1]||"closePath"==n[1]||0==c))continue;if(0==c)t[n[1]]();else if(2==c)t[n[1]](n[2][0],n[2][1]);else if(4==c)t[n[1]](n[2][0],n[2][1],n[2][2],n[2][3]);else if(5==c)t[n[1]](n[2][0],n[2][1],n[2][2],n[2][3],n[2][4]);else if(6==c){var h=n[2][4],d=n[2][5];2==n[0]&&(h-=a,d-=s),t[n[1]](n[2][0],n[2][1],n[2][2],n[2][3],h,d)}}else e?"strokeStyle"==n[1]?l=!0:"fillStyle"==n[1]&&(l=!1):t[n[1]]=n[2];e&&t.closePath()},n.prototype.changeColor=function(t){for(var e=this,n=e._command.length,i=e._command,r=0;r<n;r++)0==i[r][0]&&("fillStyle"==i[r][1]&&t.fillColor&&i[r][2]!=t.fillColor&&(i[r][2]=t.fillColor,e._UI.UD=!0),"strokeStyle"==i[r][1]&&t.strokeColor&&i[r][2]!=t.strokeColor&&(i[r][2]=t.strokeColor,e._UI.UD=!0),"lineWidth"==i[r][1]&&t.lineWidth&&i[r][2]!=t.lineWidth&&(i[r][2]=t.lineWidth,e._UI.UD=!0))},n.prototype.render=function(t){e.prototype.render.call(this,t)},n.prototype.destroy=function(){var t=this;t._command=null,t._isBitmapStroke=null,t._isBitmapFill=null,e.prototype.destroy.call(this)},n._caps=["butt","round","square"],n._joins=["miter","round","bevel"],n}(t.DisplayObject);t.Shape=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this.mouseChildren=!0,this.children=[],this._removeChildren=[],this._instanceType="annie.Sprite"}return __extends(n,e),n.prototype.destroy=function(){for(var t=this,n=0;n<t.children.length;n++)t.children[n].destroy();t.removeAllChildren(),t.parent&&t.parent.removeChild(t),t.callEventAndFrameScript(0),t.children.length=0,t._removeChildren.length=0,e.prototype.destroy.call(this)},n.prototype.addChild=function(t){this.addChildAt(t,this.children.length)},n.prototype.removeChild=function(t){for(var e=this,n=e.children.length,i=0;i<n;i++)if(e.children[i]==t){e.removeChildAt(i);break}},n._getElementsByName=function(t,e,i,r,o){var a=e.children.length;if(a>0)for(var s,l=void 0,u=0;u<a;u++){if(l=e.children[u],(s=l.name)&&""!=s&&t.test(s)&&(o[o.length]=l,i))return;r&&null!=l.children&&n._getElementsByName(t,l,i,r,o)}},n.prototype.getChildByName=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),!t)return null;var r,o=this;r="string"==typeof t?new RegExp("^"+t+"$"):t;var a=[];n._getElementsByName(r,o,e,i,a);var s=a.length;return 0==s?null:1==s?a[0]:a},n.prototype.addChildAt=function(t,e){if(t){var n,i=this,r=i==t.parent,o=t.parent;if(o)if(r){n=i.children.length;for(var a=0;a<n;a++)if(i.children[a]==t){i.children.splice(a,1);break}}else{var s=o.children;n=s.length;for(var l=!0,a=0;a<n;a++)if(s[a]==t){s.splice(a,1),l=!1;break}if(l){var u=o._removeChildren;n=u.length;for(var a=0;a<n;a++)if(u[a]==t){u.splice(a,1);break}}}n=i.children.length,e>=n?i.children[i.children.length]=t:0==e?i.children.unshift(t):i.children.splice(e,0,t),o!=i&&(t._cp=!0,t.parent=i)}},n.prototype.getChildAt=function(t){return this.children.length-1>=t?this.children[t]:null},n.prototype.getChildIndex=function(t){for(var e=this,n=e.children.length,i=0;i<n;i++)if(e.children[i]==t)return i;return-1},n.prototype.swapChild=function(t,e){var n=this,i=-1,r=-1,o=n.children.length;if(i="number"==typeof t?t:n.getChildIndex(t),r="number"==typeof e?e:n.getChildIndex(e),i==r||i<0||i>=o||r<0||r>=o)return!1;var a=n.children[i];return n.children[i]=n.children[r],n.children[r]=a,!0},n.prototype.removeChildAt=function(t){var e,n=this,i=n.children.length-1;i<0||(e=t==i?n.children.pop():0==t?n.children.shift():n.children.splice(t,1)[0],n._removeChildren.push(e))},n.prototype.removeAllChildren=function(){for(var t=this,e=t.children.length,n=e-1;n>=0;n--)t.removeChildAt(0)},n.prototype.update=function(t){void 0===t&&(t=!0);var n=this;if(n._visible){e.prototype.update.call(this,t);var i=n._UI.UM,r=n._UI.UA,o=n._UI.UF;n._UI.UM=!1,n._UI.UA=!1,n._UI.UF=!1;for(var a=n.children.length,s=null,l=a-1;l>=0;l--)s=n.children[l],i&&(s._UI.UM=i),o&&(s._UI.UF=o),r&&(s._UI.UA=r),s.update(t)}},n.prototype.hitTestPoint=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=this;if(!i.visible||!i.mouseEnable&&n)return null;for(var r,o,a=i.children.length,s=a-1;s>=0;s--)if(o=i.children[s],!(o._isUseToMask>0)&&(!o.mask||o.mask.parent!=o.parent||o.mask.hitTestPoint(t,e,n))&&(r=o.hitTestPoint(t,e,n)))return r;return null},n.prototype.getBounds=function(){var e=this,n=e._bounds;n.x=0,n.y=0,n.width=0,n.height=0;var i=e.children.length;if(i>0){for(var r=0;r<i;r++)e.children[r].visible&&t.Rectangle.createFromRects(n,e.children[r].getDrawRect());if(e.mask&&e.mask.parent==e.parent){var o=e.mask.getDrawRect();n.x<o.x&&(n.x=o.x),n.y<o.y&&(n.y=o.y),n.width>o.width&&(n.width=o.width),n.height>o.height&&(n.height=o.height)}}return n},n.prototype.render=function(t){var n=this;if(!n._cp&&n._visible)if(n._cacheAsBitmap)e.prototype.render.call(this,t);else if(n.cAlpha>0&&n._visible){for(var i=void 0,r=void 0,o=n.children.length,a=0;a<o;a++)r=n.children[a],r._isUseToMask>0||r.cAlpha>0&&r._visible&&(i?r.mask&&r.mask.parent==r.parent?r.mask!=i&&(t.endMask(),i=r.mask,t.beginMask(i)):(t.endMask(),i=null):r.mask&&r.mask.parent==r.parent&&(i=r.mask,t.beginMask(i)),r.render(t));i&&t.endMask()}},n.prototype.callEventAndFrameScript=function(t){var n=this,i=null,r=null,o=0;if(0==t){r=n.children,o=r.length;for(var a=o-1;a>=0;a--)i=r[a],i.callEventAndFrameScript(t),i.stage=null;r=n._removeChildren,o=r.length;for(var a=o-1;a>=0;a--)i=r[a],i.callEventAndFrameScript(t),i.stage=null,i.parent=null}else if(1==t){r=n.children,o=r.length;for(var a=o-1;a>=0;a--)i=r[a],i.stage=n.stage,i.parent=n,i.callEventAndFrameScript(t)}else if(2==t){r=n.children,o=r.length;for(var a=o-1;a>=0;a--)i=r[a],i.stage?i.callEventAndFrameScript(2):(i.stage=n.stage,i.parent=n,i.callEventAndFrameScript(1));r=n._removeChildren,o=r.length;for(var a=o-1;a>=0;a--)i=r[a],i.callEventAndFrameScript(0),i.stage=null,i.parent=null}n._removeChildren.length=0,e.prototype.callEventAndFrameScript.call(this,t)},n}(t.DisplayObject);t.Sprite=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._curFrame=1,this._wantFrame=0,this._lastFrameObj=null,this._isPlaying=!0,this._isFront=!0,this._lastFrame=0,this._a2x_res_class={tf:1},this._a2x_res_children=[],this._a2x_script=null,this._mode=-2,this._clicked=!1,this.isUpdateFrame=!1,this._a2x_sounds=null,this._instanceType="annie.MovieClip"}return __extends(n,e),Object.defineProperty(n.prototype,"currentFrame",{get:function(){var t=this;return t._wantFrame>0?t._wantFrame:t._curFrame},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFront",{get:function(){return this._isFront},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this._a2x_res_class.tf},enumerable:!0,configurable:!0}),n.prototype.stop=function(){this._isPlaying=!1},n.prototype.addFrameScript=function(t,e){var n=this;void 0==n._a2x_script&&(n._a2x_script={}),n._a2x_script[t]=e},n.prototype.removeFrameScript=function(t){var e=this;void 0!=e._a2x_script&&(e._a2x_script[t]=null)},Object.defineProperty(n.prototype,"isButton",{get:function(){return-1==this._mode},enumerable:!0,configurable:!0}),n.prototype.initButton=function(){var t=this;-1!=t._mode&&t._a2x_res_class.tf>1&&(t.mouseChildren=!1,t.addEventListener("onMouseDown",t._mouseEvent.bind(t)),t.addEventListener("onMouseUp",t._mouseEvent.bind(t)),t.addEventListener("onMouseOut",t._mouseEvent.bind(t)),t.gotoAndStop(1),t._mode=-1)},Object.defineProperty(n.prototype,"clicked",{get:function(){return this._clicked},set:function(t){var e=this;t!=e._clicked&&(t?e._mouseEvent({type:"onMouseDown"}):e.gotoAndStop(1),e._clicked=t)},enumerable:!0,configurable:!0}),n.prototype._mouseEvent=function(t){var e=this;if(!e._clicked){var n=2;"onMouseDown"==t.type?e._curFrame>2&&(n=3):n=1,e.gotoAndStop(n)}},n.prototype.getCurrentLabel=function(){var t=this;return t._a2x_res_class.tf>1&&t._a2x_res_class.l[t._curFrame-1]?t._a2x_res_class.l[t._curFrame-1]:null},n.prototype.nextFrame=function(){
var t=this;0==t._wantFrame&&(t._wantFrame=t._curFrame),t._wantFrame<t.totalFrames&&(t._wantFrame+=1),t._isPlaying=!1},n.prototype.prevFrame=function(){var t=this;0==t._wantFrame&&(t._wantFrame=t._curFrame),t._wantFrame>1&&(t._wantFrame-=1),t._isPlaying=!1},n.prototype.gotoAndStop=function(t){var e=this;e._isPlaying=!1;var n=e._a2x_res_class;"string"==typeof t?t=void 0!=n.label[t]?n.label[t]:e._curFrame:"number"==typeof t&&(t>n.tf&&(t=n.tf),t<1&&(t=1)),e._wantFrame=t},n.prototype.play=function(t){void 0===t&&(t=!0);var e=this;if(e._isPlaying=!0,e._isFront=t,!(e._wantFrame>0)){var n=e._curFrame;e._isFront?n++:n--,n>e.totalFrames?n=1:n<1&&(n=e.totalFrames),e._wantFrame=n}},n.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=!0);var n=this;n._isFront=e,n._isPlaying=!0;var i=n._a2x_res_class;"string"==typeof t?t=void 0!=i.label[t]?i.label[t]:n._curFrame:"number"==typeof t&&(t>i.tf&&(t=i.tf),t<1&&(t=1)),n._wantFrame=t},n.prototype.update=function(i){void 0===i&&(i=!0);var r=this;if(r._visible&&i&&r._a2x_res_class.tf>1&&(r._mode>=0?(r._isPlaying=!1,r._curFrame=r.parent._curFrame-r._mode):0!=r._wantFrame&&(r._curFrame=r._wantFrame,r._wantFrame=0),r._lastFrame==r._curFrame&&r._isPlaying&&(r._isFront?++r._curFrame>r._a2x_res_class.tf&&(r._curFrame=1):--r._curFrame<1&&(r._curFrame=r._a2x_res_class.tf)),r._lastFrame!=r._curFrame)){r._mode<0&&(r.isUpdateFrame=!0),r._lastFrame=r._curFrame;var o=r._a2x_res_class,a=r._a2x_res_children,s=a.length,l=0,u=null,c=null,h=o.f[o.timeLine[r._curFrame-1]];if(r._lastFrameObj!=h){r._lastFrameObj=h,r.children.length=0,r._removeChildren.length=0;for(var d=null,_=-1,p=s-1;p>=0;p--)l=a[p][0],u=a[p][1],c=h&&h.c?h.c[l]:null,c&&t.d(u,c),c||0==l?(void 0!=c.ma?(d=u,_=c.ma):d&&(u.mask=d,l==_&&(d=null)),r.children.unshift(u),u.parent&&r.parent==r||(u._cp=!0,u.parent=r)):u.parent&&(r._removeChildren.push(u),n._resetMC(u))}}e.prototype.update.call(this,i)},n.prototype.callEventAndFrameScript=function(n){var i=this;if(i.isUpdateFrame){var r=i._a2x_res_class;i.isUpdateFrame=!1;var o=i._curFrame-1,a=void 0,s=!1,l=i._isFront;if(i._a2x_script&&void 0!=(a=i._a2x_script[o])&&(null!=a&&a(),s=!0),s||(a=r.a[o])&&i[a[0]](void 0==a[1]||a[1],void 0==a[2]||a[2]),i.hasEventListener(t.Event.CALL_FRAME)&&(a=r.e[o]))for(var u=0;u<a.length;u++)i.dispatchEvent(t.Event.CALL_FRAME,{frameIndex:i._curFrame,frameName:a[u]});(1==i._curFrame&&!l||i._curFrame==i._a2x_res_class.tf&&l)&&i.hasEventListener(t.Event.END_FRAME)&&i.dispatchEvent(t.Event.END_FRAME,{frameIndex:i._curFrame,frameName:"endFrame"});var c=r.s[o];if(c)for(var h in c)i._a2x_sounds[h-1].play(0,c[h])}e.prototype.callEventAndFrameScript.call(this,n)},n._resetMC=function(t){var e=!1;if("annie.MovieClip"==t._instanceType?(t._wantFrame=1,t._lastFrame=0,t._isFront=!0,t._mode<-1?t._isPlaying=!0:t._isPlaying=!1,e=!0):"annie.Sprite"==t._instanceType&&(e=!0),e)for(var i=0;i<t.children.length;i++)n._resetMC(t.children[i])},n.prototype.destroy=function(){var t=this;e.prototype.destroy.call(this),t._lastFrameObj=null,t._a2x_script=null,t._a2x_res_children=null,t._a2x_res_class=null,t._a2x_sounds=null},n}(t.Sprite);t.MovieClip=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._textAlign="left",this._textAlpha=1,this._textHeight=0,this._lineSpacing=14,this._textWidth=120,this._lineType="single",this._textOffX=0,this._text="",this._font="Arial",this._size=12,this._color="#fff",this._italic=!1,this._bold=!1,this._border=!1,this._instanceType="annie.TextField"}return __extends(n,e),Object.defineProperty(n.prototype,"textAlign",{get:function(){return this._textAlign},set:function(t){this._setProperty("_textAlign",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textAlpha",{get:function(){return this._textAlpha},set:function(t){this._setProperty("_textAlpha",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this._textHeight},set:function(t){this._setProperty("_textHeight",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._setProperty("_lineSpacing",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this._textWidth},set:function(t){this._setProperty("_textWidth",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineType",{get:function(){return this._lineType},set:function(t){this._setProperty("_lineType",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(t){this._setProperty("_text",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this._font},set:function(t){this._setProperty("_font",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},set:function(t){this._setProperty("_size",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){this._setProperty("_color",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return this._italic},set:function(t){this._setProperty("_italic",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return this._bold},set:function(t){this._setProperty("_bold",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"border",{get:function(){return this._border},set:function(t){this._setProperty("_border",t,3)},enumerable:!0,configurable:!0}),n.prototype._draw=function(e){var n=this;e.font=n.fontInfo,e.fillStyle=t.Shape.getRGBA(n._color,n._textAlpha),e.textAlign=n._textAlign,e.textBaseline="top";for(var i=0;i<n.realLines.length;i++)e.fillText(n.realLines[i],n._textOffX,i*n.lineSpacing,n._bounds.width)},n.prototype._getMeasuredWidth=function(e){return t.CanvasRender.drawCtx.measureText(e).width},n.prototype.getTextWidth=function(e){void 0===e&&(e=0);var n=this;return n.update(),t.CanvasRender.drawCtx.measureText(n.realLines[e]).width},Object.defineProperty(n.prototype,"lines",{get:function(){return this.realLines.length},enumerable:!0,configurable:!0}),n.prototype.update=function(n){void 0===n&&(n=!1),e.prototype.update.call(this,n);var i=this;if(i._visible){if(i._UI.UD||i._UI.UF){i._text+="";var r=t.CanvasRender.drawCtx,o=i._text.toString().split(/(?:\r\n|\r|\n)/);i.realLines=[],i.fontInfo=i.size||12,i.fontInfo+="px ",i.fontInfo+=i.font,i._bold&&(i.fontInfo="bold "+i.fontInfo),i._italic&&(i.fontInfo="italic "+i.fontInfo),r.font=i.fontInfo;var a=i._lineSpacing;if(i._text.indexOf("\n")<0&&"single"==i.lineType){i.realLines[i.realLines.length]=o[0];var s=o[0];if(i._getMeasuredWidth(s)>i._textWidth)for(var l=i._getMeasuredWidth(s[0]),u=s[0],c=0,h=s.length,d=1;d<h;d++){if(c=r.measureText(s[d]).width,(l+=c)>i._textWidth){i.realLines[0]=u;break}u+=s[d]}}else for(var _=0,p=o.length;_<p;_++){var s=o[_];if(s){for(var l=i._getMeasuredWidth(s[0]),u=s[0],c=0,h=s.length,d=1;d<h;d++)c=r.measureText(s[d]).width,l+=c,l>i._textWidth?(i.realLines[i.realLines.length]=u,u=s[d],l=c):u+=s[d];i.realLines[i.realLines.length]=u}}var f=a*i.realLines.length,v=i._textWidth;"center"==i._textAlign?i._textOffX=.5*v:"right"==i._textAlign?i._textOffX=v:i._textOffX=0,i._UI.UD=!1,i._bounds.height=f,i._bounds.width=v}i._UI.UM=!1,i._UI.UA=!1,i._UI.UF=!1}},n}(t.DisplayObject);t.TextField=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(i,r,o,a,s,l,u){void 0===r&&(r=640),void 0===o&&(o=960),void 0===a&&(a=640),void 0===s&&(s=1040),void 0===l&&(l=30),void 0===u&&(u="fixedHeight"),e.call(this),this.renderObj=null,this.viewRect=new t.Rectangle,this.isMultiTouch=!1,this.isMultiMouse=!1,this.desWidth=0,this.desHeight=0,this.divHeight=0,this.divWidth=0,this.bgColor="",this._scaleMode="onScale",this._flush=0,this._currentFlush=0,this._lastDpList={},this._ml=[],this._mp=[],this._mouseDownPoint={},this._mouseEventTypes={mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp",ontouchstart:"onMouseDown",ontouchmove:"onMouseMove",ontouchend:"onMouseUp"},this.muliPoints=[],this._mP1=new t.Point,this._mP2=new t.Point,this._onMouseEvent=function(e){var i=this,r=n._dragDisplay;if(i.isMultiTouch&&e.changedTouches&&e.changedTouches.length>1){if(2==e.changedTouches.length){i._mP1.x=e.changedTouches[0].clientX,i._mP1.y=e.changedTouches[0].clientY,i._mP2.x=e.changedTouches[1].clientX,i._mP2.y=e.changedTouches[1].clientY;var o=Math.atan2(i._mP1.y-i._mP2.y,i._mP1.x-i._mP2.x)/Math.PI*180,a=t.Point.distance(i._mP1,i._mP2);if(i.muliPoints.push({p1:i._mP1,p2:i._mP2,angle:o,dis:a}),i.muliPoints.length>=2){i._touchEvent||(i._touchEvent=new t.TouchEvent(t.TouchEvent.ON_MULTI_TOUCH),i._touchEvent.target=i);var s=i.muliPoints.length;i._touchEvent.rotate=2*(i.muliPoints[s-1].angle-i.muliPoints[s-2].angle),i._touchEvent.scale=(i.muliPoints[s-1].dis-i.muliPoints[s-2].dis)/(i.divHeight>i.divWidth?i.desWidth:i.desHeight)*4,i._touchEvent.clientPoint1.x=i.muliPoints[s-1].p1.x*t.devicePixelRatio,i._touchEvent.clientPoint2.x=i.muliPoints[s-1].p2.x*t.devicePixelRatio,i._touchEvent.clientPoint1.y=i.muliPoints[s-1].p1.y*t.devicePixelRatio,i._touchEvent.clientPoint2.y=i.muliPoints[s-1].p2.y*t.devicePixelRatio,i.dispatchEvent(i._touchEvent),i.muliPoints.shift()}}else i.muliPoints.length=0;r&&(r._lastDragPoint.x=Number.MAX_VALUE,r._lastDragPoint.y=Number.MAX_VALUE),i._mouseDownPoint={},i._lastDpList={}}else if(i.muliPoints.length>0&&(i._touchEvent.rotate=0,i._touchEvent.scale=0,i._touchEvent.clientPoint1.x=0,i._touchEvent.clientPoint2.x=0,i._touchEvent.clientPoint1.y=0,i._touchEvent.clientPoint2.y=0,i.dispatchEvent(i._touchEvent),i.muliPoints.length=0),t.EventDispatcher._totalMEC>0){var l,u=void 0,c=i._mouseEventTypes[e.type],h=void 0,d=void 0,_=void 0,p=void 0,f=void 0,v=void 0;u=i.isMultiMouse?e.changedTouches:[e.changedTouches[0]];for(var g=0;g<u.length;g++)if(f=0,h=[],v=u[g].identifier,p=i._mp.length>0?i._mp.shift():new t.Point,p.x=u[g].clientX*t.devicePixelRatio,p.y=u[g].clientY*t.devicePixelRatio,d=i.globalToLocal(p,t.DisplayObject._bp),i._ml[f]?(l=i._ml[f],l.type=c):(l=new t.MouseEvent(c),i._ml[f]=l),h[h.length]=l,i._initMouseEvent(l,p,d,v),f++,"onMouseDown"==c?i._mouseDownPoint[v]=p:"onMouseUp"==c&&i._mouseDownPoint[v]&&t.Point.distance(i._mouseDownPoint[v],p)<20&&t.EventDispatcher.getMouseEventCount("onMouseClick")>0&&(i._ml[f]?(l=i._ml[f],l.type="onMouseClick"):(l=new t.MouseEvent("onMouseClick"),i._ml[f]=l),h[h.length]=l,i._initMouseEvent(l,p,d,v),f++),f>0){var y=i.hitTestPoint(p,!0,!0),m=[];if(y)for(;y;)!1===y.mouseChildren&&(m.length=0),m[m.length]=y,y=y.parent;else m[m.length]=i;for(var s=m.length,b=s-1;b>=0;b--){y=m[b];for(var x=0;x<f;x++)h[x]._bpd||y.hasEventListener(h[x].type)&&(h[x].currentTarget=y,h[x].target=m[0],_=y.globalToLocal(p,t.DisplayObject._bp),h[x].localX=_.x,h[x].localY=_.y,y.dispatchEvent(h[x]))}m.reverse();for(var b=s-1;b>=0;b--){y=m[b];for(var x=0;x<f;x++)h[x]._bpd||y.hasEventListener(h[x].type)&&(h[x].currentTarget=y,h[x].target=m[f-1],_=y.globalToLocal(p,t.DisplayObject._bp),h[x].localX=_.x,h[x].localY=_.y,y.dispatchEvent(h[x],null,!1))}if("onMouseDown"!=c){if((t.EventDispatcher.getMouseEventCount("onMouseOver")>0||t.EventDispatcher.getMouseEventCount("onMouseOut")>0)&&i._lastDpList[v]){var P=i._lastDpList[v].length,w=m.length;s=P>w?P:w;for(var M=!1,E=void 0,T=void 0,b=1;b<s;b++)M||i._lastDpList[v][b]!=m[b]&&(M=!0,i._ml[f]?(E=i._ml[f],E.type="onMouseOver"):(E=new t.MouseEvent("onMouseOver"),i._ml[f]=E),i._initMouseEvent(E,p,d,v),f++,i._ml[f]?(T=i._ml[f],T.type="onMouseOut"):(T=new t.MouseEvent("onMouseOut"),i._ml[f]=T),i._initMouseEvent(T,p,d,v)),M&&(i._lastDpList[v][b]&&!1===T._bpd&&(y=i._lastDpList[v][b],y.hasEventListener("onMouseOut")&&(T.currentTarget=y,T.target=i._lastDpList[v][P-1],_=y.globalToLocal(p,t.DisplayObject._bp),T.localX=_.x,T.localY=_.y,y.dispatchEvent(T))),m[b]&&!1===E._bpd&&(y=m[b],y.hasEventListener("onMouseOver")&&(E.currentTarget=y,E.target=m[w-1],_=y.globalToLocal(p,t.DisplayObject._bp),E.localX=_.x,E.localY=_.y,y.dispatchEvent(E))))}i._mp[i._mp.length]=p}if(r&&r.stage&&r.parent){var O=r.x,F=r.y;_=r.parent.globalToLocal(p,t.DisplayObject._bp),r._isDragCenter?(O=_.x,F=_.y):(r._lastDragPoint.x!=Number.MAX_VALUE&&(O+=_.x-r._lastDragPoint.x,F+=_.y-r._lastDragPoint.y),r._lastDragPoint.x=_.x,r._lastDragPoint.y=_.y),_.x=O,_.y=F,0!=r._dragBounds.width&&(r._dragBounds.isPointIn(_)||(O<r._dragBounds.x?O=r._dragBounds.x:O>r._dragBounds.x+r._dragBounds.width&&(O=r._dragBounds.x+r._dragBounds.width),F<r._dragBounds.y?F=r._dragBounds.y:F>r._dragBounds.y+r._dragBounds.height&&(F=r._dragBounds.y+r._dragBounds.height))),r.x=O,r.y=F}"onMouseUp"==c?(r&&(r._lastDragPoint.x=Number.MAX_VALUE,r._lastDragPoint.y=Number.MAX_VALUE),delete i._mouseDownPoint[v],delete i._lastDpList[v]):i._lastDpList[v]=m}}},this.setAlign=function(){var t=this,e=t.divHeight,n=t.divWidth,i=t.desHeight,r=t.desWidth;t.anchorX=r>>1,t.anchorY=i>>1;var o=e>n,a=i>r,s=1,l=1;if(t.x=n-r>>1,t.y=e-i>>1,t.autoSteering&&a!=o){var u=e;e=n,n=u}if("noScale"!=t._scaleMode)switch(s=e/i,l=n/r,t._scaleMode){case"noBorder":l>s?s=l:l=s;break;case"showAll":l<s?s=l:l=s;break;case"fixedWidth":s=l;break;case"fixedHeight":l=s}t.scaleX=l,t.scaleY=s,t.viewRect.x=r-n/l>>1,t.viewRect.y=i-e/s>>1,t.viewRect.width=r-2*t.viewRect.x,t.viewRect.height=i-2*t.viewRect.y,t.rotation=a==o?0:i>r?-90:90};var c=this;this._instanceType="annie.Stage",c.stage=this,c.name="stageInstance"+c._instanceId,c.desWidth=a,c.desHeight=s,c.divWidth=r,c.divHeight=o,c.setFrameRate(l),c.anchorX=a>>1,c.anchorY=s>>1,c.renderObj=new t.CanvasRender(c,i),n.addUpdateObj(c),c.onTouchEvent=c._onMouseEvent.bind(c),c._scaleMode=u,c.setAlign()}return __extends(n,e),Object.defineProperty(n,"pause",{get:function(){return n._pause},set:function(e){var i=n;e!=i._pause&&(i._pause=e,e?t.Sound.stopAllSounds():t.Sound.resumePlaySounds(),t.globalDispatcher.dispatchEvent("onRunChanged",{pause:e}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){var e=this;t!=e._scaleMode&&(e._scaleMode=t,e.setAlign())},enumerable:!0,configurable:!0}),n.prototype.render=function(t){t.begin(),e.prototype.render.call(this,t),t.end()},n.prototype._initMouseEvent=function(t,e,n,i){t._pd=!1,t._bpd=!1,t.clientX=e.x,t.clientY=e.y,t.stageX=n.x,t.stageY=n.y,t.identifier=i},n.prototype.flush=function(){var t=this;0==t._flush?(t.callEventAndFrameScript(2),t.update(!0),t.render(t.renderObj),t.renderObj.drawSharedCanvas()):0==t._currentFlush?t._currentFlush=t._flush:(t._currentFlush==t._flush&&(t.callEventAndFrameScript(2),t.update(!0),t.render(t.renderObj),t.renderObj.drawSharedCanvas()),t._currentFlush--)},n.prototype.setFrameRate=function(t){var e=this;e._flush=60/t-1>>0,e._flush<0&&(e._flush=0)},n.prototype.getFrameRate=function(){return 60/(this._flush+1)},n.prototype.kill=function(){n.removeUpdateObj(this)},n.prototype.getBounds=function(){return this.viewRect},n.flushAll=function(){if(!n._pause)for(var t=n.allUpdateObjList.length,e=0;e<t;e++)n.allUpdateObjList[e]&&n.allUpdateObjList[e].flush();requestAnimationFrame(n.flushAll)},n.addUpdateObj=function(t){for(var e=!1,i=n.allUpdateObjList.length,r=0;r<i;r++)if(n.allUpdateObjList[r]===t){e=!0;break}e||n.allUpdateObjList.unshift(t)},n.removeUpdateObj=function(t){for(var e=n.allUpdateObjList.length,i=0;i<e;i++)if(n.allUpdateObjList[i]===t){n.allUpdateObjList.splice(i,1);break}},n.prototype.destroy=function(){var t=this;n.removeUpdateObj(t),e.prototype.destroy.call(this)},n._pause=!1,n._dragDisplay=null,n.allUpdateObjList=[],n}(t.Sprite);t.Stage=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(n){e.call(this),this.media=null,this._loop=0,this._repeate=1,this.isPlaying=!0,this.name="";var i=this;i._instanceType="annie.Sound",i.media=t.createAudio(),i.media.src=n,i.media.onEnded(function(t){i.dispatchEvent("onPlayEnd",t),i._loop>1&&(i._loop--,i.media.startTime=0,i.media.play())}),i.media.onPlay(function(t){i.dispatchEvent("onPlayStart",t)}),i.media.onTimeUpdate(function(t){i.dispatchEvent("onPlayUpdate",t)}),t.Sound._soundList.push(i)}return __extends(n,e),n.prototype.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this;n.media.startTime=t,0==e?n._loop=n._repeate:(n._loop=e,n._repeate=e),n.media.play(),n.isPlaying=!0},n.prototype.stop=function(){var t=this;t.media.stop(),t.isPlaying=!1},n.prototype.pause=function(t){void 0===t&&(t=!0);var e=this;t?(e.media.pause(),e.isPlaying=!1):(e.media.play(),e.isPlaying=!0)},Object.defineProperty(n.prototype,"volume",{get:function(){return this.media.volume},set:function(t){this.media.volume=t},enumerable:!0,configurable:!0}),n.prototype.stop2=function(){var t=this;t.isPlaying&&t.media.pause()},n.prototype.play2=function(){var t=this;t.isPlaying&&t.media.play()},n.stopAllSounds=function(){for(var e=t.Sound._soundList.length,n=e-1;n>=0;n--)t.Sound._soundList[n]?t.Sound._soundList[n].stop2():t.Sound._soundList.splice(n,1)},n.resumePlaySounds=function(){for(var e=t.Sound._soundList.length,n=e-1;n>=0;n--)t.Sound._soundList[n]?t.Sound._soundList[n].play2():t.Sound._soundList.splice(n,1)},n.setAllSoundsVolume=function(e){for(var i=t.Sound._soundList.length,r=i-1;r>=0;r--)t.Sound._soundList[r]?t.Sound._soundList[r].volume=e:t.Sound._soundList.splice(r,1);n._volume=e},n.prototype.destroy=function(){for(var e=this,n=t.Sound._soundList.length,i=n-1;i>=0;i--)if(t.Sound._soundList[i]==e){t.Sound._soundList[i].stop(),t.Sound._soundList.splice(i,1);break}e.media.offTimeUpdate(),e.media.offPlay(),e.media.offEnded(),e.media=null},n._soundList=[],n._volume=1,n}(t.EventDispatcher);t.Sound=e}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(){t.call(this),this.currentFrame=0,this.totalFrames=0,this._isLoop=0,this._delay=0,this._isFront=!0,this._cParams=null,this._loop=!1}return __extends(e,t),e.prototype.init=function(t,e,n,i){if(void 0===i&&(i=!0),e<=0||"number"!=typeof e)throw new Error("annie.Tween.to()或者annie.Tween.from()方法的第二个参数一定要是大于0的数字");var r=this;r.currentFrame=1;var o=60*e>>0;r.totalFrames=o>0?o:1,r.target=t,r._isTo=i,r._isLoop=0,r._startData={},r._disData={},r._delay=0,r._isFront=!0,r._ease=null,r._update=null,r._cParams=null,r._loop=!1,r._completeFun=null;for(var a in n)switch(a){case"useFrame":1==n[a]&&(r.totalFrames=e);break;case"yoyo":!1===n[a]?r._isLoop=0:!0===n[a]?r._isLoop=Number.MAX_VALUE:r._isLoop=n[a];break;case"delay":n.useFrame?r._delay=n[a]:r._delay=60*n[a]>>0;break;case"ease":r._ease=n[a];break;case"onUpdate":r._update=n[a];break;case"onComplete":r._completeFun=n[a];break;case"completeParams":r._cParams=n[a];break;case"loop":r._loop=n[a];break;default:"number"==typeof n[a]&&(i?(r._startData[a]=t[a],r._disData[a]=n[a]-t[a]):(r._startData[a]=n[a],r._disData[a]=t[a]-n[a],t[a]=n[a]))}},e.prototype.update=function(){var t=this;if(t._isFront&&t._delay>0)return void t._delay--;var e=t.currentFrame/t.totalFrames;if(!(e<0||e>1)){t._ease&&(e=t._ease(e));var i=!1;for(var r in t._disData)i=!0,t.target[r]=t._startData[r]+t._disData[r]*e;if(!i)return void n.kill(t.instanceId);t._update&&t._update(e);var o=t._completeFun,a=t._cParams;t._isFront?++t.currentFrame>t.totalFrames&&(t._loop?t.currentFrame=1:t._isLoop>0?(t._isFront=!1,t.currentFrame=t.totalFrames,t._isLoop--):n.kill(t.instanceId),o&&o(a)):--t.currentFrame<0&&(t._isLoop>0?(t._isFront=!0,t.currentFrame=1):n.kill(t.instanceId),o&&o(a))}},e.prototype.destroy=function(){var t=this;t._update=null,t._completeFun=null,t._ease=null},e}(t.AObject);t.TweenObj=e;var n=function(){function n(){}return n.to=function(t,e,i){return n.createTween(t,e,i,!0)},n.from=function(t,e,i){return n.createTween(t,e,i,!1)},n.createTween=function(i,r,o,a){for(var s,l=n._tweenList.length,u=0;u<l;u++)if(s=n._tweenList[u],i==s.target)for(var c in s._startData)void 0!=o[c]&&(delete s._startData[c],delete s._disData[c]);return l=n._tweenPool.length,l>0?(s=n._tweenPool.shift(),s._instanceId=t.AObject._object_id++):s=new e,n._tweenList.push(s),s.init(i,r,o,a),s.instanceId},n.killAll=function(){for(var t,e=n._tweenList.length,i=0;i<e;i++)t=n._tweenList[i],t.target=null,t._completeFun=null,t._cParams=null,t._update=null,t._ease=null,t._loop=!1,n._tweenPool.push(t);n._tweenList.length=0},n.kill=function(t){for(var e,i=n._tweenList.length,r=0;r<i;r++)if(e=n._tweenList[r],e.instanceId==t){e.target=null,e._completeFun=null,e._cParams=null,e._update=null,e._ease=null,e._loop=null,n._tweenPool.push(e),n._tweenList.splice(r,1);break}},n.quadraticIn=function(t){return t*t},n.quadraticOut=function(t){return t*(2-t)},n.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},n.cubicIn=function(t){return t*t*t},n.cubicOut=function(t){return--t*t*t+1},n.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},n.quarticIn=function(t){return t*t*t*t},n.quarticOut=function(t){return 1- --t*t*t*t},n.quarticInOut=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},n.quinticIn=function(t){return t*t*t*t*t},n.quinticOut=function(t){return--t*t*t*t*t+1},n.quinticInOut=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},n.sinusoidalIn=function(t){return 1-Math.cos(t*Math.PI/2)},n.sinusoidalOut=function(t){return Math.sin(t*Math.PI/2)},n.sinusoidalInOut=function(t){return.5*(1-Math.cos(Math.PI*t))},n.exponentialIn=function(t){return 0===t?0:Math.pow(1024,t-1)},n.exponentialOut=function(t){return 1===t?1:1-Math.pow(2,-10*t)},n.exponentialInOut=function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},n.circularIn=function(t){return 1-Math.sqrt(1-t*t)},n.circularOut=function(t){return Math.sqrt(1- --t*t)},n.circularInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},n.elasticIn=function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},n.elasticOut=function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},n.elasticInOut=function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)},n.backIn=function(t){var e=1.70158;return t*t*((e+1)*t-e)},n.backOut=function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},n.backInOut=function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},n.bounceIn=function(t){return 1-n.bounceOut(1-t)},n.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},n.bounceInOut=function(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5},n.flush=function(){for(var t=n._tweenList.length,e=t-1;e>=0;e--)n._tweenList[e]?n._tweenList[e].update():n._tweenList.splice(e,1)},n._tweenPool=[],n._tweenList=[],n}();t.Tween=n}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(n,i){void 0===i&&(i=0),t.call(this),this._currentCount=0,this._delay=0,this._frameDelay=0,this._currentFrameDelay=0,this._repeatCount=0,this._running=!1,n<=0&&(n=1);var r=this;r._delay=n,r._frameDelay=Math.ceil(.001*n*60),r._repeatCount=i,e._timerList.push(r)}return __extends(e,t),e.prototype.reset=function(){var t=this;t._running=!1,t._currentCount=0,t._currentFrameDelay=0},e.prototype.start=function(){var t=this;t._running=!0,t._currentCount==t._repeatCount&&(t._currentCount=0)},e.prototype.stop=function(){this._running=!1},Object.defineProperty(e.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._frameDelay=Math.ceil(.001*t*60)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(t){t<0&&(t=0),this._repeatCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),e.prototype.kill=function(){for(var t=e._timerList.length,n=this,i=0;i<t;i++)if(e._timerList[i]._instanceId==n._instanceId){e._timerList.splice(i,1);break}},e.prototype.update=function(){var t=this;t._running&&++t._currentFrameDelay==t._frameDelay&&(t._repeatCount&&t._currentCount++,t._currentFrameDelay=0,t.dispatchEvent("onTimer"),t._repeatCount&&t._currentCount==t._repeatCount&&(t._running=!1,t.dispatchEvent("onTimerComplete")))},e.flush=function(){for(var t=e._timerList.length,n=t-1;n>=0;n--)e._timerList[n]?e._timerList[n].update():e._timerList.splice(n,1)},e.prototype.destroy=function(){this.kill(),t.prototype.destroy.call(this)},e._timerList=[],e}(t.EventDispatcher);t.Timer=e}(annie||(annie={}));var annie;!function(t){var e=function(){function e(){}return e.init=function(n){var i=e;i.context||(i.context=wx.getOpenDataContext(),i.postMessage({event:"initSharedCanvasStage",data:{dw:n.divWidth,dh:n.divHeight,w:n.desWidth,h:n.desHeight,fps:n.getFrameRate(),scaleMode:n.scaleMode,devicePixelRatio:t.devicePixelRatio}}),i.width=n.divWidth,i.height=n.divHeight)},e.destroy=function(){var t=e;t.context=null,t.canvas=null},e.postMessage=function(t){var n=e;n.context&&n.context.postMessage(t)},e.show=function(){var t=e;t.context&&(t.context.postMessage({event:"onShow"}),t.canvas=t.context.canvas,t.canvas.width=t.width,t.canvas.height=t.height)},e.hide=function(n){if(void 0===n&&(n=!0),n)t.Stage.pause=!0,t.CanvasRender.drawCtx.canvas.width=t.CanvasRender.drawCtx.canvas.height=0;else{var i=e;i.context&&(i.context.postMessage({event:"onHide"}),i.canvas=null)}},e.width=0,e.height=0,e}();t.SharedCanvas=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(t,i){e.call(this);var r=this;r._instanceType="annie.CanvasRender",r._stage=t,n.drawCtx=i}return __extends(n,e),n.prototype.begin=function(){var t=this;n.drawCtx.setTransform(1,0,0,1,0,0);var e=n.drawCtx;""!=t._stage.bgColor?(e.fillStyle=t._stage.bgColor,e.fillRect(0,0,t._stage.divWidth,t._stage.divHeight)):e.clearRect(0,0,t._stage.divWidth,t._stage.divHeight)},n.prototype.beginMask=function(t){var e=this,i=n.drawCtx;i.save(),i.globalAlpha=0,e.drawMask(t,i),i.clip()},n.prototype.drawMask=function(t,e){var n=this,i=t.cMatrix;if(e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),"annie.Shape"==t._instanceType)t._draw(e,!0);else if("annie.Sprite"==t._instanceType||"annie.MovieClip"==t._instanceType)for(var r=0;r<t.children.length;r++)n.drawMask(t.children[r],e);else{var o=t._bounds;e.rect(0,0,o.width,o.height)}},n.prototype.endMask=function(){n.drawCtx.restore()},n.prototype.end=function(){},n.prototype.draw=function(t){t._cp&&this._stage.update(!1);var e=n.drawCtx;e.globalAlpha=t.cAlpha;var i=t.cMatrix;e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var r=t._texture;r?e.drawImage(r,0,0):t._draw(e)},n.prototype.drawSharedCanvas=function(){if(t.SharedCanvas.canvas){var e=n.drawCtx;e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),e.drawImage(t.SharedCanvas.canvas,0,0)}},n.prototype.destroy=function(){this._stage=null},n.drawCtx=null,n}(t.AObject);t.CanvasRender=e}(annie||(annie={}));var annie;!function(t){function e(e){return!!t.classPool[e]}function n(e){t.classPool[e]=null,delete t.classPool[e]}function i(t,e,n){h[t]={},h[t]._a2x_con=n;for(var i=0;i<e.length;i++)"image"!=e[i].type&&"sound"!=e[i].type||(h[t][e[i].id]=e[i].src);var r;for(var o in n)if(r=n[o],1==r.t){if(!r.f){r.f=[];continue}if(r.tf>1){for(var a=r.f,s=a.length,l=null,u=null,c=[],i=0;i<s;i++){if(l=a[i].c){for(var d in l){var _=l[d].at;if(void 0!=_&&-1!=_){if(0==_)c.push(d);else for(var p=0;p<c.length;p++)if(c[p]==_){c.splice(p,0,d);break}delete l[d].at}}if(u)for(var d in u)if(l[d])if(-1!=l[d].at)for(var f in u[d])void 0==l[d][f]&&(l[d][f]=u[d][f]);else delete l[d];else l[d]=u[d]}u=l}r.ol=c}}}function r(t,e){return h[t][e]?h[t][e]:null}function o(e,n){return new t.Bitmap(h[e][n])}function a(t,e){if(t._a2x_res_obj!=e){var n=t._a2x_res_obj;void 0!=e.w&&(t.textWidth=e.w,t.textHeight=e.h),void 0!=e.tr&&1!=e.tr.length||(e.tr=[0,0,1,1,0,0]),n.tr!=e.tr&&(i=e.tr,t.x=i[0],t.y=i[1],t.scaleX=i[2],t.scaleY=i[3],t.skewX=i[4],t.skewY=i[5]),t.alpha=void 0==e.al?1:e.al,void 0!=e.t&&(-1==e.t&&t.initButton&&t.initButton(),t._mode=e.t),t._a2x_res_obj=e;var i}}function s(e,n){var i,r=h[e]._a2x_con[n],o=decodeURIComponent(r[9]),a=decodeURIComponent(r[4]),s=r[5],l=_[r[3]],u=d[r[2]],c=r[11],p=r[10],f=r[6],v=r[7],g=r[12],y=r[8];return i=new t.TextField,i.text=o,i.font=a,i.size=s,i.textAlign=l,i.lineType=u,i.italic=c,i.bold=p,i.color=f,i.textAlpha=v,i.border=g,i.lineSpacing=y,2==r[1]&&console.log("wxApp isn't support inputText"),i}function l(e,n){for(var i=h[e]._a2x_con[n][1],r=new t.Shape,a=0;a<i.length;a++)1==i[a][0]?(0==i[a][1]?r.beginFill(t.Shape.getRGBA(i[a][2][0],i[a][2][1])):1==i[a][1]?r.beginLinearGradientFill(i[a][2][0],i[a][2][1]):2==i[a][1]?r.beginRadialGradientFill(i[a][2][0],i[a][2][1]):r.beginBitmapFill(o(e,i[a][2][0])._texture,i[a][2][1]),r.decodePath(i[a][3]),r.endFill()):(0==i[a][1]?r.beginStroke(t.Shape.getRGBA(i[a][2][0],i[a][2][1]),i[a][4],i[a][5],i[a][6],i[a][7]):1==i[a][1]?r.beginLinearGradientStroke(i[a][2][0],i[a][2][1],i[a][4],i[a][5],i[a][6],i[a][7]):2==i[a][1]?r.beginRadialGradientStroke(i[a][2][0],i[a][2][1],i[a][4],i[a][5],i[a][6],i[a][7]):r.beginBitmapStroke(o(e,i[a][2][0])._texture,i[a][2][1],i[a][4],i[a][5],i[a][6],i[a][7]),r.decodePath(i[a][3]),r.endStroke());return r}function u(e,n){return new t.Sound(h[e][n])}function c(e,n,i){var r=t.classPool,d=h[n],_=d._a2x_con,p=_[i];e._a2x_res_class=p;var f,v=!1;if(p.tf>1&&(v=!0,void 0==p.timeLine)){var g=p.f.length,y=[],m=g>0?p.f[0].i:p.tf,b=0;if(m>0)for(var x=0;x<m;x++)y[y.length]=-1;if(g>0)for(f=0;f<g;f++){b=f+1<g?p.f[f+1].i:p.tf,m=p.f[f].i;for(var x=0;x<b-m;x++)y[y.length]=f}p.timeLine=y,p.f||(p.f=[]),p.c||(p.c=[]),p.a||(p.a={}),p.s||(p.s={}),p.e||(p.e={});var P={};if(p.l)for(var w in p.l)for(var M=0;M<p.l[w].length;M++)P[p.l[w][M]]=parseInt(w)+1;else p.l=[];p.label=P}var E=p.c;if(E){var T=[],O=E.length,F=null,C=0,S=null,L=0;for(f=0;f<O;f++){switch(C=Array.isArray(_[E[f]])?_[E[f]][0]:_[E[f]].t){case 1:case 4:p.n&&p.n[f]&&e[p.n[f]]?F=e[p.n[f]]:(4==C?F=s(n,E[f]):0==E[f].indexOf("_$")?(F=_[E[f]].tf>1?new t.MovieClip:new t.Sprite,c(F,n,E[f])):F=new r[n][E[f]],p.n&&p.n[f]&&(e[p.n[f]]=F,F.name=p.n[f]));break;case 2:F=o(n,E[f]);break;case 3:F=l(n,E[f]);break;case 5:F=u(n,E[f]),F.name=E[f],e.addSound(F)}if(v)T[T.length]=F,5==C&&(F.isPlaying=!1,e._a2x_sounds||(e._a2x_sounds={}),e._a2x_sounds[f]=F);else{var w=f+1;5==C?F._loop=F._repeate=p.s[0][w]:(a(F,p.f[0].c[w]),void 0!=p.f[0].c[w].ma?(S=F,L=p.f[0].c[w].ma-1):S&&f<=L&&(F.mask=S,f==L&&(S=null)),e.addChildAt(F,0))}}if(v){var A=p.ol;if(A)for(var U=0;U<A.length;U++)e._a2x_res_children[U]=[A[U],T[A[U]-1]]}}}t.version="2.0.1",t.devicePixelRatio=1,t.globalDispatcher=new t.EventDispatcher,t.StageScaleMode={EXACT_FIT:"exactFit",NO_BORDER:"noBorder",NO_SCALE:"noScale",SHOW_ALL:"showAll",FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight"};var h={};t.createAudio=null,t.getImageInfo=null,t.A2xExtend=null,t.classPool=null,t.loadScene=null,t.isLoadedScene=e,t.unLoadScene=n,t.parseScene=i,t.getResource=r,t.d=a;var d=["single","multiline"],_=["left","center","right"];t.initRes=c,console.log("https://github.com/flash2x/AnnieJS")}(annie||(annie={})),annie.Stage.addUpdateObj(annie.Tween),annie.Stage.addUpdateObj(annie.Timer),annie.Stage.flushAll();
module.exports = annie;