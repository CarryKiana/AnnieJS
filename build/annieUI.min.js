var __extends=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function i(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),annieUI;!function(e){var a=annie.Sprite,t=annie.Shape,i=function(e){function i(i,n,s,r){void 0===r&&(r=!0);var o=e.call(this)||this;o.isVertical=!0,o.viewWidth=0,o.viewHeight=0,o._tweenId=0,o.maxDistance=1040,o.distance=0,o.minDis=2,o.maskObj=new t,o.view=new a,o.lastValue=0,o.speed=0,o.addSpeed=0,o.isStop=!0,o.maxSpeed=100,o.fSpeed=20,o.paramXY="y",o.stopTimes=-1,o.isMouseDownState=0,o.autoScroll=!1,o.isSpringBack=!0;var l=o;l._instanceType="annie.ScrollPage",l.addChild(l.maskObj),l.addChild(l.view),l.view.mask=l.maskObj,l.maskObj._isUseToMask=0,l.maskObj.alpha=0,l.maxDistance=s,l.setViewRect(i,n,r);var p=l.onMouseEvent.bind(l);return l.addEventListener(annie.MouseEvent.MOUSE_DOWN,p),l.addEventListener(annie.MouseEvent.MOUSE_MOVE,p),l.addEventListener(annie.MouseEvent.MOUSE_UP,p),l.addEventListener(annie.MouseEvent.MOUSE_OUT,p),l.addEventListener(annie.Event.ENTER_FRAME,function(){var e=l.view;if(!l.autoScroll){if(!l.isSpringBack){if(e[l.paramXY]>0)return l.addSpeed=0,l.speed=0,l.isStop=!0,void(e[l.paramXY]=0);if(e[l.paramXY]<l.distance-l.maxDistance)return l.addSpeed=0,l.speed=0,l.isStop=!0,void(e[l.paramXY]=l.distance-l.maxDistance)}if(l.isStop)l.stopTimes>=0&&++l.stopTimes>=15&&(l.speed=0,(e[l.paramXY]>0||e[l.paramXY]<l.distance-l.maxDistance)&&(l.isStop=!1,l.stopTimes=-1));else if(Math.abs(l.speed)>0)e[l.paramXY]+=l.speed,e[l.paramXY]>0||e[l.paramXY]<l.distance-l.maxDistance?l.speed+=l.addSpeed*l.fSpeed:l.speed+=l.addSpeed,l.speed*l.addSpeed>0&&(l.dispatchEvent("onScrollStop"),l.speed=0);else if(0!=l.addSpeed){if(e[l.paramXY]>0||e[l.paramXY]<l.distance-l.maxDistance){var a=0;l.addSpeed>0&&l.distance<l.maxDistance&&(a=l.distance-l.maxDistance),e[l.paramXY]+=.4*(a-e[l.paramXY]),Math.abs(a-e[l.paramXY])<.1&&(l.isStop=!0,l.addSpeed>0?l.dispatchEvent("onScrollToEnd"):l.dispatchEvent("onScrollToHead"))}}else l.isStop=!0}}),o}return __extends(i,e),i.prototype.setViewRect=function(e,a,t){var i=this;i.maskObj.clear(),i.maskObj.beginFill("#000000"),i.maskObj.drawRect(0,0,e,a),i.viewWidth=e,i.viewHeight=a,i.maskObj.endFill(),i.isVertical=t,t?(i.distance=i.viewHeight,i.paramXY="y"):(i.distance=i.viewWidth,i.paramXY="x"),i.isVertical=t},i.prototype.onMouseEvent=function(e){var a=this,t=a.view;if(e.type==annie.MouseEvent.MOUSE_DOWN)a.isStop||(a.isStop=!0),a.autoScroll&&(a.autoScroll=!1,annie.Tween.kill(a._tweenId)),a.isVertical?a.lastValue=e.localY:a.lastValue=e.localX,a.speed=0,a.isMouseDownState=1;else if(e.type==annie.MouseEvent.MOUSE_MOVE){if(a.isMouseDownState<1)return;1==a.isMouseDownState&&a.dispatchEvent("onScrollStart"),a.isMouseDownState=2;var i=void 0;if(i=a.isVertical?e.localY:e.localX,a.speed=i-a.lastValue,a.speed>a.minDis?(a.addSpeed=-2,a.speed>a.maxSpeed&&(a.speed=a.maxSpeed)):a.speed<-a.minDis?(a.speed<-a.maxSpeed&&(a.speed=-a.maxSpeed),a.addSpeed=2):a.speed=0,0!=a.speed){var n=1;(t[a.paramXY]>0||t[a.paramXY]<a.distance-a.maxDistance)&&(n=.2),t[a.paramXY]+=(i-a.lastValue)*n}a.lastValue=i,a.stopTimes=0}else a.isStop=!1,a.stopTimes=-1,0==a.speed&&2==a.isMouseDownState&&a.dispatchEvent("onScrollStop"),a.isMouseDownState=0},i.prototype.scrollTo=function(e,a){void 0===a&&(a=0);var t=this,i="x"==t.paramXY?t.viewWidth:t.viewHeight;if(e<0?e=0:e>t.maxDistance-i&&(e=t.maxDistance-i),a>0){if(Math.abs(t.view[t.paramXY]+e)>2){-1!=t._tweenId&&annie.Tween.kill(t._tweenId),t.autoScroll=!0,t.isStop=!0,t.isMouseDownState=0;var n={};n.onComplete=function(){t.autoScroll=!1,t.dispatchEvent("onScrollStop"),0==e?t.dispatchEvent("onScrollToHead"):e==t.maxDistance-i&&t.dispatchEvent("onScrollToEnd")},n[t.paramXY]=-e,t._tweenId=annie.Tween.to(t.view,a,n),0==t.speed&&t.dispatchEvent("onScrollStart")}}else t.view[t.paramXY]=-e},i.prototype.destroy=function(){var a=this;a.maskObj=null,a.view=null,e.prototype.destroy.call(this)},Object.defineProperty(i.prototype,"currentPos",{get:function(){var e=this;return-e.view[e.paramXY]},enumerable:!0,configurable:!0}),i}(a);e.ScrollPage=i}(annieUI||(annieUI={}));var annieUI;!function(e){var a=annie.Sprite,t=function(e){function a(a,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=null);var s=e.call(this)||this;s.listLen=0,s.view=new annie.Sprite,s.maskObj=new annie.Shape,s.slideSpeed=.2,s._isBreak=!1,s.distance=0,s.touchEndX=0,s.movingX=0,s.movingY=0,s._moveDis=0,s.touchEndY=0,s.currentPageIndex=0,s.reBound=.3,s.isPageFollowToMove=!1,s.follow=.7,s.isMoving=!1,s.viewWidth=0,s.viewHeight=0,s.pageList=[],s.pageClassList=[],s.lastX=0,s.lastY=0,s.isMouseDown=!1,s.canSlideNext=!0,s.canSlidePrev=!0,s.paramXY="y";var r=s;r._instanceType="annieUI.SlidePage",r.isVertical=i,r._ease=n,i?(r.paramXY="y",r.distance=t):(r.paramXY="x",r.distance=a),r.addChild(r.maskObj),r.addChild(r.view),r.view.mask=r.maskObj,r.maskObj._isUseToMask=0,r.maskObj.alpha=0,r.setMask(a,t);var o=r.onMouseEvent.bind(r);return r.addEventListener(annie.MouseEvent.MOUSE_DOWN,o),r.addEventListener(annie.MouseEvent.MOUSE_MOVE,o),r.addEventListener(annie.MouseEvent.MOUSE_UP,o),r.addEventListener(annie.MouseEvent.MOUSE_OUT,o),s}return __extends(a,e),a.prototype.setMask=function(e,a){var t=this;t.maskObj.clear(),t.maskObj.beginFill("#000000"),t.maskObj.drawRect(0,0,e,a),t.viewWidth=e,t.viewHeight=a,t.maskObj.endFill()},a.prototype.onMouseEvent=function(e){var a=this;if(!a.isMoving)if(e.type==annie.MouseEvent.MOUSE_DOWN)a.touchEndX=e.localX,a.touchEndY=e.localY,a.movingX=a.movingY=0,a.isMouseDown=!0,a._isBreak=!1,a.lastX=e.localX,a.lastY=e.localY,a._moveDis=0;else if(e.type==annie.MouseEvent.MOUSE_MOVE){if(!a.isMouseDown)return;var t=e.localX-a.touchEndX,i=e.localY-a.touchEndY,n=i,s=t,r=a.movingY;if(a._moveDis=a.lastY-e.localY,a.movingX=t,a.movingY=i,a.isVertical||(n=t,s=i,r=a.movingX,a._moveDis=a.lastX-e.localX),Math.abs(n)>Math.abs(s)){if(a.isPageFollowToMove||Math.abs(n)-Math.abs(r)<-1&&(a._isBreak=!0),n>0){if(0==a.currentPageIndex)a.view[a.paramXY]-=a._moveDis*a.reBound;else if(a.isPageFollowToMove){a.view[a.paramXY]-=a._moveDis*a.follow;var o=a.currentPageIndex-1;a.pageList[o]||(a.pageList[o]=new a.pageClassList[o]),a.pageList[o].parent!=a.view&&(a.view.addChild(a.pageList[o]),a.pageList[o][a.paramXY]=o*a.distance)}}else if(n<0)if(a.currentPageIndex==a.listLen-1)a.view[a.paramXY]-=a._moveDis*a.reBound;else if(a.isPageFollowToMove){a.view[a.paramXY]-=a._moveDis*a.follow;var o=a.currentPageIndex+1;a.pageList[o]||(a.pageList[o]=new a.pageClassList[o]),a.pageList[o].parent!=a.view&&(a.view.addChild(a.pageList[o]),a.pageList[o][a.paramXY]=o*a.distance)}}else a.movingX=a.movingY=0;a.lastX=e.localX,a.lastY=e.localY}else{if(!a.isMouseDown)return;var n=a.movingY,s=a.movingX;if(a.isMouseDown=!1,a.isVertical||(n=a.movingX,s=a.movingY),0==a.currentPageIndex&&a.view[a.paramXY]>0||a.currentPageIndex==a.listLen-1&&a.view[a.paramXY]<-a.currentPageIndex*a.distance){var l={};l[a.paramXY]=-a.currentPageIndex*a.distance,a._ease&&(l.ease=a._ease),annie.Tween.to(a.view,a.slideSpeed*a.reBound,l)}else{var p=a.currentPageIndex;if(a.isPageFollowToMove)if(Math.abs(a._moveDis)>5||Math.abs(n*a.follow<<1)>=a.distance)a.slideTo(n<0?p+1:p-1);else{var d=-a.currentPageIndex*a.distance;if(d==a.view[a.paramXY])return;a.view.mouseEnable=!1,a.isMoving=!0;var l={};l[a.paramXY]=d,a._ease&&(l.ease=a._ease),l.onComplete=function(){a.view.mouseEnable=!0,a.isMoving=!1,a.currentPageIndex>0&&a.pageList[a.currentPageIndex-1]&&a.pageList[a.currentPageIndex-1].parent==a.view&&a.view.removeChild(a.pageList[a.currentPageIndex-1]),a.currentPageIndex<a.listLen-1&&a.pageList[a.currentPageIndex+1]&&a.pageList[a.currentPageIndex+1].parent==a.view&&a.view.removeChild(a.pageList[a.currentPageIndex+1])},annie.Tween.to(a.view,.5*a.slideSpeed,l)}else Math.abs(n)>100&&!a._isBreak&&a.slideTo(n<0?p+1:p-1)}}},a.prototype.slideTo=function(e,a){void 0===a&&(a=!1);var t=this;if(!t.isMoving&&t.currentPageIndex!=e){var i=t.currentPageIndex,n=t.currentPageIndex<e;if(n){if(!(e<t.listLen&&t.canSlideNext))return;t.currentPageIndex=e}else{if(!(e>=0&&t.canSlidePrev))return;t.currentPageIndex=e}if(t.pageList[t.currentPageIndex]||(t.pageList[t.currentPageIndex]=new t.pageClassList[t.currentPageIndex]),t.pageList[t.currentPageIndex][t.paramXY]=t.currentPageIndex*t.distance,t.pageList[i][t.paramXY]=n?(t.currentPageIndex-1)*t.distance:(t.currentPageIndex+1)*t.distance,t.isPageFollowToMove||(t.view[t.paramXY]=-t.pageList[i][t.paramXY]),t.pageList[t.currentPageIndex]!=t.view&&t.view.addChild(t.pageList[t.currentPageIndex]),a)t.dispatchEvent("onSlideStart",{currentPage:t.currentPageIndex,lastPage:i}),t.view[t.paramXY]=-t.currentPageIndex*t.distance,t.view.removeChild(t.pageList[i]),t.dispatchEvent("onSlideEnd");else{t.view.mouseEnable=!1,t.isMoving=!0;var s={};s[t.paramXY]=-t.currentPageIndex*t.distance,t._ease&&(s.ease=t._ease),s.onComplete=function(){t.view.mouseEnable=!0,t.isMoving=!1,t.view.removeChild(t.pageList[i]),t.dispatchEvent("onSlideEnd")},annie.Tween.to(t.view,t.slideSpeed,s),t.dispatchEvent("onSlideStart",{currentPage:t.currentPageIndex,lastPage:i})}}},a.prototype.addPageList=function(e){var a=this;if(a.pageClassList=a.pageClassList.concat(e),0==a.listLen&&a.pageClassList.length>0){var t=new a.pageClassList[0];a.pageList.push(t),a.view.addChild(t)}a.listLen=a.pageClassList.length},a.prototype.destroy=function(){var a=this;a.pageList=null,a.pageClassList=null,e.prototype.destroy.call(this)},a}(a);e.SlidePage=t}(annieUI||(annieUI={}));var annieUI;!function(e){var a=annie.Sprite,t=annie.Shape,i=annie.Event,n=annie.MouseEvent,s=annie.Point,r=function(e){function r(r,o,l,p){var d=e.call(this)||this;d.totalPage=0,d.currPage=0,d.speed=.4,d.state="stop",d.timerArg0=0,d.timerArg1=0,d.px=0,d.py=0,d.rPage0=new a,d.rPage1=new a,d.pageMC=new a,d.leftPage=null,d.rightPage=null,d.rMask0=new t,d.rMask1=new t,d.shadow0=new t,d.shadow1=new t,d.sMask0=new t,d.sMask1=new t,d.pages=[],d.stageMP=new s,d.canFlip=!0;var g=d;g._instanceType="annie.FlipBook",g.getPageCallback=p,g.bW=r,g.bH=o,g.totalPage=l,g.currPage=g.toPage=0,g.crossGap=Math.sqrt(g.bW*g.bW+g.bH*g.bH),g.p1=new s(0,0),g.p2=new s(0,g.bH),g.p3=new s(g.bW+g.bW,0),g.p4=new s(g.bW+g.bW,g.bH),g.limitP1=new s(g.bW,0),g.limitP2=new s(g.bW,g.bH),g.toPosArr=[g.p3,g.p4,g.p1,g.p2],g.myPosArr=[g.p1,g.p2,g.p3,g.p4],g.rPage0.mouseEnable=!1,g.rPage1.mouseEnable=!1,g.shadow0.mouseEnable=!1,g.shadow1.mouseEnable=!1,g.setShadowMask(g.shadow0,1.5*g.bW,3*g.bH),g.setShadowMask(g.shadow1,1.5*g.bW,3*g.bH),g.rPage1.mask=g.rMask1,g.shadow1.mask=g.rMask1,g.shadow0.mask=g.rMask0,g.rPage0.mask=g.rMask0,g.shadow0.visible=!1,g.shadow1.visible=!1,g.addChild(g.pageMC),g.addChild(g.rPage0),g.addChild(g.shadow0),g.addChild(g.rPage1),g.addChild(g.shadow1),g.addChild(g.rMask0),g.addChild(g.rMask1),g.setPage(g.currPage);var c=g.onMouseDown.bind(g),u=g.onMouseUp.bind(g),v=g.onMouseMove.bind(g),h=g.onEnterFrame.bind(g);return g.addEventListener(annie.Event.ADD_TO_STAGE,function(e){g.stage.addEventListener(n.MOUSE_DOWN,c),g.stage.addEventListener(n.MOUSE_UP,u),g.stage.addEventListener(n.MOUSE_MOVE,v),g.addEventListener(i.ENTER_FRAME,h)}),g.addEventListener(annie.Event.REMOVE_TO_STAGE,function(e){g.stage.removeEventListener(n.MOUSE_DOWN,c),g.stage.removeEventListener(n.MOUSE_UP,u),g.stage.removeEventListener(n.MOUSE_MOVE,v),g.removeEventListener(i.ENTER_FRAME,h)}),d}return __extends(r,e),r.prototype.drawPage=function(e,a){var t,i,n=this;1==e?(a=n.checkLimit(a,n.limitP1,n.bW),a=n.checkLimit(a,n.limitP2,n.crossGap),i=n.getBookArr(a,n.p1,n.p2),t=i[1],n.getLayerArr(a,t,n.p1,n.p2,n.limitP1,n.limitP2),n.getShadow(n.shadow0,n.p1,a,.5),n.getShadow(n.shadow1,n.p1,a,.45),n.rPage1.rotation=n.angle(a,t)+90,n.rPage1.x=i[3].x,n.rPage1.y=i[3].y,n.rPage0.x=n.p1.x,n.rPage0.y=n.p1.y):2==e?(a=n.checkLimit(a,n.limitP2,n.bW),a=n.checkLimit(a,n.limitP1,n.crossGap),i=n.getBookArr(a,n.p2,n.p1),t=i[1],n.getLayerArr(a,t,n.p2,n.p1,n.limitP2,n.limitP1),n.getShadow(n.shadow0,n.p2,a,.5),n.getShadow(n.shadow1,n.p2,a,.45),n.rPage1.rotation=n.angle(a,t)-90,n.rPage1.x=i[2].x,n.rPage1.y=i[2].y,n.rPage0.x=n.p1.x,n.rPage0.y=n.p1.y):3==e?(a=n.checkLimit(a,n.limitP1,n.bW),a=n.checkLimit(a,n.limitP2,n.crossGap),i=n.getBookArr(a,n.p3,n.p4),t=i[1],n.getLayerArr(a,t,n.p3,n.p4,n.limitP1,n.limitP2),n.getShadow(n.shadow0,n.p3,a,.5),n.getShadow(n.shadow1,n.p3,a,.4),n.rPage1.rotation=n.angle(a,t)+90,n.rPage1.x=a.x,n.rPage1.y=a.y,n.rPage0.x=n.limitP1.x,n.rPage0.y=n.limitP1.y):(a=n.checkLimit(a,n.limitP2,n.bW),a=n.checkLimit(a,n.limitP1,n.crossGap),i=n.getBookArr(a,n.p4,n.p3),t=i[1],n.getLayerArr(a,t,n.p4,n.p3,n.limitP2,n.limitP1),n.getShadow(n.shadow0,n.p4,a,.5),n.getShadow(n.shadow1,n.p4,a,.4),n.rPage1.rotation=n.angle(a,t)-90,n.rPage1.x=t.x,n.rPage1.y=t.y,n.rPage0.x=n.limitP1.x,n.rPage0.y=n.limitP1.y),n.getShape(n.rMask1,n.layer1Arr),n.getShape(n.rMask0,n.layer0Arr)},r.prototype.checkLimit=function(e,a,t){var i=this,n=Math.abs(i.pos(a,e)),r=i.angle(a,e);if(n>t){var o=t*Math.sin(r/180*Math.PI),l=t*Math.cos(r/180*Math.PI);e=new s(a.x-l,a.y-o)}return e},r.prototype.getPage=function(e){var a=this;return a.pages[e-1]||(a.pages[e-1]=a.getPageCallback(e)),a.pages[e-1]},r.prototype.getBookArr=function(e,a,t){var i=this,n=[],r=Math.abs(.5*i.pos(a,e)),o=i.angle(a,e),l=r/Math.cos(o/180*Math.PI),p=new s(a.x-l,a.y),d=i.angle(e,p)-i.angle(e,t),g=i.pos(e,t),c=g*Math.sin(d/180*Math.PI),u=g*Math.cos(d/180*Math.PI),v=new s(a.x+u,a.y+c),h=i.angle(p,e),m=i.bW*Math.sin(h/180*Math.PI),P=i.bW*Math.cos(h/180*Math.PI),w=new s(v.x+P,v.y+m),M=new s(e.x+P,e.y+m);return n.push(e),n.push(v),n.push(w),n.push(M),n},r.prototype.getLayerArr=function(e,a,t,i,n,r){var o=this,l=[],p=[],d=Math.abs(.5*o.pos(t,e)),g=o.angle(t,e),c=d/Math.sin(g/180*Math.PI),u=d/Math.cos(g/180*Math.PI),v=new s(t.x-u,t.y),h=new s(t.x,t.y-c),m=a;if(Math.abs(o.pos(e,i))>o.bH){l.push(m);var P=Math.abs(.5*o.pos(m,i)),w=P/Math.cos(g/180*Math.PI);h=new s(i.x-w,i.y)}else p.push(i);l.push(h),l.push(v),l.push(e),o.layer1Arr=l,p.push(r),p.push(n),p.push(v),p.push(h),o.layer0Arr=p},r.prototype.getShape=function(e,a){var t=a.length;e.clear(),e.beginFill("#000"),e.moveTo(a[0].x,a[0].y);for(var i=1;i<t;i++)e.lineTo(a[i].x,a[i].y);e.endFill()},r.prototype.setShadowMask=function(e,a,t){e.beginLinearGradientFill([.5*-a,4,.5*a,4],[[0,"#000000",0],[1,"#000000",.6]]),e.drawRect(.5*-a,.5*-t,.5*a,t),e.endFill(),e.beginLinearGradientFill([.5*-a,4,.5*a,4],[[1,"#000000",0],[0,"#000000",.6]]),e.drawRect(0,.5*-t,.5*a,t),e.endFill()},r.prototype.getShadow=function(e,a,t,i){var n,s,r=this;e.visible=!0,e.x=t.x+(a.x-t.x)*i,e.y=t.y+(a.y-t.y)*i,e.rotation=r.angle(a,t),n=.5*Math.abs(a.x-t.x)/r.bW,s=1-n*n,e.scaleX=n+.1,e.alpha=s+.1},r.prototype.setPage=function(e){var a=this;e>0&&e<=a.totalPage&&(a.leftPage=a.getPage(e),a.leftPage.x=a.leftPage.y=0,a.pageMC.addChild(a.leftPage)),e+1>0&&e+1<a.totalPage&&(a.rightPage=a.getPage(e+1),a.rightPage.x=a.bW,a.rightPage.y=0,a.pageMC.addChild(a.rightPage))},r.prototype.onMouseDown=function(e){var a=this;if(a.canFlip&&"stop"==a.state){a.stageMP.x=e.clientX,a.stageMP.y=e.clientY;var t=a.globalToLocal(a.stageMP);a.stageMP=t,a.timerArg0=a.checkArea(t),a.timerArg0=a.timerArg0<0?-a.timerArg0:a.timerArg0,a.timerArg0>0&&(a.timerArg0<3&&a.currPage>0||a.timerArg0>2&&a.currPage<=a.totalPage-2)&&(a.state="start",a.flushPage(),a.dispatchEvent("onFlipStart"))}},r.prototype.onMouseUp=function(e){var a=this;if("start"==a.state){a.stageMP.x=e.clientX,a.stageMP.y=e.clientY;var t=a.globalToLocal(a.stageMP);a.timerArg1=a.checkArea(t),a.state="auto",a.stageMP=t}},r.prototype.onMouseMove=function(e){var a=this;if("start"==a.state){a.stageMP.x=e.clientX,a.stageMP.y=e.clientY;var t=a.globalToLocal(a.stageMP);a.stageMP=t}},r.prototype.checkArea=function(e){var a,t=this,i=t.bW+t.bW,n=t.bH;return e.x>0&&e.x<=.5*i?(a=e.y>0&&e.y<=.5*n?1:e.y>.5*n&&e.y<n?2:0,e.x<=50&&(a=e.y>0&&e.y<=50?-1:e.y>n-50&&e.y<n?-2:a),a):e.x>.5*i&&e.x<i?(a=e.y>0&&e.y<=.5*n?3:e.y>.5*n&&e.y<n?4:0,e.x>=i-50&&(a=e.y>0&&e.y<=50?-3:e.y>n-50&&e.y<n?-4:a),a):0},r.prototype.flipTo=function(e){var a,t=this;e=e%2==1?e-1:e,a=e-t.currPage,"stop"==t.state&&e>=0&&e<=t.totalPage&&0!=a&&(t.timerArg0=a<0?1:3,t.timerArg1=-1,t.toPage=e>t.totalPage?t.totalPage:e,t.state="auto",t.flushPage())},r.prototype.nextPage=function(){this.flipTo(this.currPage+2)},r.prototype.prevPage=function(){this.flipTo(this.currPage-1)},r.prototype.startPage=function(){this.flipTo(0)},r.prototype.endPage=function(){this.flipTo(this.totalPage)},r.prototype.flushPage=function(){var e,a,t=this,i=t.myPosArr[t.timerArg0-1],n=null;1==t.timerArg0||2==t.timerArg0?(t.toPage=t.toPage==t.currPage?t.currPage-2:t.toPage,e=t.currPage,a=t.toPage+1,this.pageMC.removeChild(t.leftPage),t.toPage>0&&(n=t.getPage(t.currPage-2),n.x=0,t.leftPage=n,t.pageMC.addChild(n))):3!=t.timerArg0&&4!=t.timerArg0||(t.toPage=t.toPage==t.currPage?t.currPage+2:t.toPage,e=t.currPage+1,a=t.toPage,t.pageMC.removeChild(t.rightPage),t.toPage+1<t.totalPage&&(n=t.getPage(t.currPage+3),n.x=t.bW,t.rightPage=n,t.pageMC.addChild(n))),t.px=i.x,t.py=i.y,e>0&&e<=t.totalPage&&(n=t.getPage(e),n.x=0,n.y=0,t.rPage0.addChild(n)),a>0&&a<=t.totalPage&&(n=t.getPage(a),n.x=0,n.y=0,t.rPage1.addChild(n))},r.prototype.onEnterFrame=function(e){var a,t,i,n,r,o,l=this,p=l.toPosArr[l.timerArg0-1],d=l.myPosArr[l.timerArg0-1];if("start"==l.state){o=l.speed;var g=l.stageMP;l.px+=(g.x-l.px)*o>>0,l.py+=(g.y-l.py)*o>>0;var c=new s(l.px,l.py);l.drawPage(l.timerArg0,c)}else"auto"==l.state&&(Math.abs(p.x-l.px)>1.5*l.bW&&l.timerArg1>0?(a=d.x,t=d.y,i=0):(a=p.x,t=p.y,i=1),n=a-l.px>>0,r=t-l.py>>0,l.timerArg1<0?(o=.7*l.speed,l.py=l.arc(l.bW,n,p.y)):(o=l.speed,l.py=r*o+l.py),l.px=n*o+l.px,l.drawPage(l.timerArg0,new s(l.px,l.py)),0==n&&0==r&&(l.rPage0.removeAllChildren(),l.rPage1.removeAllChildren(),l.shadow0.visible=!1,l.shadow1.visible=!1,l.toPage=0==i?l.currPage:l.toPage,l.currPage=l.toPage,l.pageMC.removeAllChildren(),l.setPage(l.currPage),l.state="stop",l.dispatchEvent("onFlipStop")))},r.prototype.arc=function(e,a,t){var i=2*e,n=e*e+i*i,s=Math.abs(a)-e;return t-(Math.sqrt(n-s*s)-i)},r.prototype.angle=function(e,a){var t=e.x-a.x,i=e.y-a.y,n=180*Math.atan2(i,t)/Math.PI;return n<0?n+360:n},r.prototype.pos=function(e,a){var t=e.x-a.x,i=e.y-a.y,n=Math.sqrt(t*t+i*i);return e.x>a.x?n:-n},r.prototype.destroy=function(){var a=this;a.layer0Arr=null,a.layer1Arr=null,a.toPosArr=null,a.myPosArr=null,a.rPage0=null,a.rMask0=null,a.rMask1=null,a.sMask0=null,a.sMask1=null,a.leftPage=null,a.rightPage=null,a.pageMC=null,a.rightPage=null,a.shadow0=null,a.shadow1=null,a.p1=null,a.p2=null,a.p3=null,a.p4=null,a.limitP1=null,a.limitP2=null,a.pages=null,a.stageMP=null,a.getPageCallback=null,e.prototype.destroy.call(this)},r}(a);e.FlipBook=r}(annieUI||(annieUI={}));var annieUI;!function(e){var a=function(e){function a(a,t,i,n,s,r,o){void 0===r&&(r=!0),void 0===o&&(o=1);var l=e.call(this,n,s,0,r)||this;l._items=null,l._isInit=0,l.data=[],l.downL=null,l._lastFirstId=-1;var p=l;return p._instanceType="annie.ScrollList",p._itemW=t,p._itemH=i,p._items=[],p._itemClass=a,p._itemCount=0,p._cols=o,p._updateViewRect(),p.addEventListener(annie.Event.ENTER_FRAME,p.flushData.bind(p)),l}return __extends(a,e),Object.defineProperty(a.prototype,"loadingView",{get:function(){return this.downL},enumerable:!0,configurable:!0}),a.prototype.updateData=function(e,a){void 0===a&&(a=!1);var t=this;if(!t._isInit||a?(t.data=e,t._isInit=1):t.data=t.data.concat(e),t._lastFirstId=-1,t.maxDistance=Math.ceil(t.data.length/t._cols)*t._itemRow,t.downL){t.downL[t.paramXY]=Math.max(t.distance,t.maxDistance);var i=t.downL.getWH();t.maxDistance+="x"==t.paramXY?i.width:i.height}},a.prototype.flushData=function(){var e=this;if(e._isInit>0){var a=(Math.abs(Math.floor(e.view[e.paramXY]/e._itemRow))-1)*e._cols;if((a=a<0?0:a)!=e._lastFirstId&&(e._lastFirstId=a,a!=e._items[0].id))for(var t=0;t<e._cols;t++)e.speed>0?e._items.unshift(e._items.pop()):e._items.push(e._items.shift());for(var i=0;i<e._itemCount;i++){var n=e._items[i];1==e._isInit&&(n._a2x_sl_id=-1),n._a2x_sl_id!=a&&(n.initData(e.data[a]?a:-1,e.data[a]),n[e.paramXY]=Math.floor(a/e._cols)*e._itemRow,n[e._disParam]=a%e._cols*e._itemCol,e.data[a]?(n._a2x_sl_id=a,n.visible=!0):(n._a2x_sl_id=-1,n.visible=!1)),a++}e._isInit=2}},a.prototype.setViewRect=function(a,t,i){e.prototype.setViewRect.call(this,a,t,i);var n=this;n._itemRow&&n._itemCol&&n._updateViewRect()},a.prototype._updateViewRect=function(){var e=this;e.isVertical?(e._disParam="x",e._itemRow=e._itemH,e._itemCol=e._itemW):(e._disParam="y",e._itemRow=e._itemW,e._itemCol=e._itemH);var a=(Math.ceil(e.distance/e._itemRow)+1)*e._cols;if(a!=e._itemCount){if(a>e._itemCount)for(var t=e._itemCount;t<a;t++){var i=new e._itemClass;i.id=-1,i.data=null,e._items.push(i),e.view.addChild(i)}else for(var t=0;t<e._itemCount-a;t++)e.view.removeChild(e._items.pop());e._itemCount=a,e._lastFirstId=-1}},a.prototype.setLoading=function(e){var a=this;if(a.downL){a.view.removeChild(a.downL);var t=a.downL.getWH();a.maxDistance-="x"==a.paramXY?t.width:t.height,a.downL=null}if(e){a.downL=e,a.view.addChild(e),a.downL[a.paramXY]=Math.max(a.distance,a.maxDistance);var t=a.downL.getWH();a.maxDistance+="x"==a.paramXY?t.width:t.height}else a.isStop=!1},a.prototype.destroy=function(){var a=this;a._items=null,a._itemClass=null,a.data=null,a.downL=null,e.prototype.destroy.call(this)},a}(e.ScrollPage);e.ScrollList=a}(annieUI||(annieUI={}));
GameGlobal.annieUI= annieUI;